[***********************************************************[[ cs.California[[ This logic manages the wagon trip cutscenes as Jerrod [ makes his way across California to finally get to [ Sutters Fort. The cutscene gets interrupted by a short[ interaction in another desert that Jerrod has to cross.[ There is also possibility of a snowstorm in the mountains.[[***********************************************************[ **************************************[ LOCAL DEFINES[ **************************************#define oCursor                      o1#define oMapExpander                 o2#define oSceneryWindow               o3#define oSnow1                       o4#define oSnow2                       o5#define oSnow3                       o6#define oSnow4                       o7#define oSnow5                       o8#define oSnow6                       o9#define oSnow7                      o10#define oSnow8                      o11[ o12 is not used#define oWinterWindow               o13#define oWindyJerrod                o14#define oWagon                      o15#define oTracks                     o16#define vSnowStormTime              v86  [ override CoalFireTime#define vMapPic                    v220#define vOvlPic                    v221#define vMapStage                  v222#define vMapTimer                  v223#define vCursorStage               v224#define vCursorSpeed               v225#define vTrackSpeed                v226#define vTmpY                      v227#define vFlashTimer                v228#define vStormStatus               v229#define vSceneStage                v230#define vNormalSpeed               v231#define vSceneTimer                v232#define vMsgStatus                 v233#define vTimeStatus                v234#define fCursorMoved               f220#define fFlashOn                   f221#define fJerrodMoved               f222#define fSceneDone                 f223[ **************************************[ FIRST CYCLE ONLY[ **************************************if (isset(newRoom))  {  [ pictures used in this cutscene are the main USA map and  [ the Utah detail map  vMapPic = map.USA;  vOvlPic = map.CaliforniaSmall;    [ normal speed for scene window cycle  vNormalSpeed = 2;  [ normal cursor speed is 2  vCursorSpeed = 2;    [ load main timing logic  load.logics(lgc.WagonTripTiming);    [ load views used in the room  load.view(vw.MapTracks);  load.view(vw.MapArt);  load.view(vw.CalifDetailArt);    [ load the large map of California detail, but don't show  [ it yet  load.pic(currentRoom);    [ if this is first time showing the map  [ (TripPoint_13 == 10)  if (CurrentTripTime == TripPoint_13)    {    [ load the overlay and the USA map    load.pic(vOvlPic);    load.pic(vMapPic);    }    [ if after the desert scene  if (CurrentTripTime == 12)    {    [ only overlay pic is needed    load.pic(vOvlPic);    }      [ if this is first time showing the map  [ (TripPoint_13 == 10)  if (CurrentTripTime == TripPoint_13)    {    [ draw and discard the main USA map    draw.pic(vMapPic);    discard.pic(vMapPic);        [ begin with map stage 1    vMapStage = 1;    [ add blocks to USA map to show the track progress up to    [ this point    add.to.pic(vw.MapTracks, 5, 0, 131, 53, 5, 5);    add.to.pic(vw.MapTracks, 5, 0, 120, 54, 5, 5);    add.to.pic(vw.MapTracks, 5, 0, 109, 57, 5, 5);    add.to.pic(vw.MapTracks, 5, 0, 109, 45, 5, 5);    add.to.pic(vw.MapTracks, 5, 0, 105, 43, 5, 5);    add.to.pic(vw.MapTracks, 5, 0, 103, 55, 5, 5);    add.to.pic(vw.MapTracks, 5, 0, 98, 67, 5, 5);    add.to.pic(vw.MapTracks, 5, 0, 96, 79, 5, 5);    add.to.pic(vw.MapTracks, 5, 0, 89, 91, 5, 5);    add.to.pic(vw.MapTracks, 5, 0, 86, 92, 5, 5);    add.to.pic(vw.MapTracks, 0, 0, 73, 86, 9, 9);    add.to.pic(vw.MapTracks, 2, 0, 73, 86, 9, 9);    add.to.pic(vw.MapTracks, 0, 1, 58, 73, 9, 9);    add.to.pic(vw.MapTracks, 2, 1, 58, 73, 9, 9);    add.to.pic(vw.MapTracks, 0, 2, 46, 63, 9, 9);    add.to.pic(vw.MapTracks, 2, 2, 46, 63, 9, 9);    add.to.pic(vw.MapTracks, 0, 3, 34, 61, 9, 9);    add.to.pic(vw.MapTracks, 2, 3, 34, 61, 9, 9);    add.to.pic(vw.MapTracks, 0, 4, 21, 66, 9, 9);    add.to.pic(vw.MapTracks, 2, 4, 21, 66, 9, 9);    }      [ if this is second time in thsi cutscene  if (CurrentTripTime == 12)    {    [ start with the large California detail picture    draw.pic(currentRoom);    discard.pic(currentRoom);    [ add blocks to show the track status progress up to    [ this point    add.to.pic(vw.MapTracks, 5, 0, 146, 23, 5, 5);    add.to.pic(vw.MapTracks, 5, 0, 140, 35, 5, 5);    add.to.pic(vw.MapTracks, 5, 0, 134, 47, 5, 5);    }      [ wagon used in scenery detail  animate.obj(oWagon);  set.view(oWagon, vw.MapArt);  set.loop(oWagon, 1);  set.priority(oWagon, 11);  position(oWagon, 12, 66);    [ animal tracks to go with the wagon  animate.obj(oTracks);  set.view(oTracks, vw.MapArt);  set.loop(oTracks, 2);  set.priority(oTracks, 10);  position(oTracks, 9, 68);    [ flashing track cursor  animate.obj(oCursor);  set.view(oCursor, vw.MapTracks);  set.loop(oCursor, 4);  fix.loop(oCursor);  set.priority(oCursor, 7);  ignore.horizon(oCursor);  ignore.objs(oCursor);    [ if first time in cutscene  if (CurrentTripTime == TripPoint_13)    {    [ cursor will start at beginning of California map trail    [ (but not visible yet)    position(oCursor, 143, 11);    }  [ if second time in cutscene  if (CurrentTripTime == 12)    {    [ cursor is past desert    position(oCursor, 133, 44);    [ and visible    draw(oCursor);    set(fCursorMoved);    [ and starting at stage 4    vCursorStage = 4;    }  [ set to normal cursor speed of two  step.time(oCursor, vCursorSpeed);    [ map expander object  animate.obj(oMapExpander);  set.view(oMapExpander, vw.MapTracks);  set.loop(oMapExpander, 2);  set.cel(oMapExpander, 5);  fix.loop(oMapExpander);  position(oMapExpander, 10, 75);  set.priority(oMapExpander, 9);  ignore.horizon(oMapExpander);  ignore.objs(oMapExpander);  stop.cycling(oMapExpander);    [ scenery detail window  animate.obj(oSceneryWindow);  set.view(oSceneryWindow, vw.MapArt);  [ start with mountain view  set.loop(oSceneryWindow, 8);  set.cel(oSceneryWindow, 0);  set.priority(oSceneryWindow, 9);  position(oSceneryWindow, 6, 79);      [ these objects are needed in case Jerrod gets caught in  [ winter storm    [ winter scenery detail window  animate.obj(oWinterWindow);  set.view(oWinterWindow, vw.CalifDetailArt);  set.loop(oWinterWindow, 0);  set.cel(oWinterWindow, 0);  set.priority(oWinterWindow, 9);  position(oWinterWindow, 6, 79);    [ Jerrod, walking against wind  animate.obj(oWindyJerrod);  set.view(oWindyJerrod, vw.CalifDetailArt);  set.loop(oWindyJerrod, 1);  set.priority(oWindyJerrod, 10);  position(oWindyJerrod, 54, 70);    [ snow falling down; uses eight different screen objects,  [ with different starting cels to give a nice snow storm  [ effect  animate.obj(oSnow1);  set.view(oSnow1, vw.CalifDetailArt);  set.loop(oSnow1, 2);  set.cel(oSnow1, 0);  set.priority(oSnow1, 12);  position(oSnow1, 9, 43);  ignore.objs(oSnow1);  [ snow 2  animate.obj(oSnow2);  set.view(oSnow2, vw.CalifDetailArt);  set.loop(oSnow2, 2);  set.cel(oSnow2, 1);  set.priority(oSnow2, 12);  position(oSnow2, 23, 43);  ignore.objs(oSnow2);  [ snow 3  animate.obj(oSnow3);  set.view(oSnow3, vw.CalifDetailArt);  set.loop(oSnow3, 2);  set.cel(oSnow3, 2);  set.priority(oSnow3, 12);  position(oSnow3, 37, 43);  ignore.objs(oSnow3);  [ snow 4  animate.obj(oSnow4);  set.view(oSnow4, vw.CalifDetailArt);  set.loop(oSnow4, 2);  set.cel(oSnow4, 0);  set.priority(oSnow4, 12);  position(oSnow4, 51, 43);  ignore.objs(oSnow4);  [ snow 5  animate.obj(oSnow5);  set.view(oSnow5, vw.CalifDetailArt);  set.loop(oSnow5, 2);  set.cel(oSnow5, 1);  set.priority(oSnow5, 12);  position(oSnow5, 9, 72);  ignore.objs(oSnow5);  [ snow 6  animate.obj(oSnow6);  set.view(oSnow6, vw.CalifDetailArt);  set.loop(oSnow6, 2);  set.cel(oSnow6, 2);  set.priority(oSnow6, 12);  position(oSnow6, 23, 72);  ignore.objs(oSnow6);  [ snow 7  animate.obj(oSnow7);  set.view(oSnow7, vw.CalifDetailArt);  set.loop(oSnow7, 2);  set.cel(oSnow7, 0);  set.priority(oSnow7, 12);  position(oSnow7, 37, 72);  ignore.objs(oSnow7);  [ snow 8  animate.obj(oSnow8);  set.view(oSnow8, vw.CalifDetailArt);  set.loop(oSnow8, 2);  set.cel(oSnow8, 1);  set.priority(oSnow8, 12);  position(oSnow8, 51, 72);  ignore.objs(oSnow8);    [ now show the picture  show.pic();  }  [ **************************************[ EVERY CYCLE[ **************************************[ if cursor has just started moving ( on first time through)if (posn(oCursor, 125, 57, 125, 57) && vSceneStage == 0)  {  [ advance to next stage  vSceneStage = 1;  [ set cursor step time to normal speed  step.time(oCursor, vNormalSpeed);  [ show the scene window, with smallest image  draw(oSceneryWindow);  stop.cycling(oSceneryWindow);  }  [ if at scene stage 1if (vSceneStage == 1)  {  [ increment timer  ++vSceneTimer;  [ after five cycles  if (vSceneTimer == 5)    {    [ reset timer    vSceneTimer = 0;    [ advance to next stage    vSceneStage = 2;    [ show mid size image of scene window    set.cel(oSceneryWindow, 1);    }  }  [ if at scene stage 2if (vSceneStage == 2)  {  [ increment timer  ++vSceneTimer;  [ after five cycles  if (vSceneTimer == 5)    {    [ reset timer    vSceneTimer = 0;    [ advance to next stage    vSceneStage = 3;    [ show scenery window with full size image    set.cel(oSceneryWindow, 2);    [ force it to update right now    force.update(oSceneryWindow);    [ add wagon to the scene    draw(oWagon);    [ set track speed to two    vTrackSpeed = 2;    cycle.time(oTracks, vTrackSpeed);    [ then show the animal tracks    draw(oTracks);    }  }  [ if time for a snow stormif (CurrentTripTime == vSnowStormTime)  {  [ when cursor gets to mountains, and storm hasn't  [ started yet  if (posn(oCursor, 90, 83, 90, 83) && vStormStatus == 0)    {    [ advance to next stage    vStormStatus = 1;    [ begin shrinking normal scenery window    set.cel(oSceneryWindow, 1);    erase(oWagon);    erase(oTracks);    reverse.loop(oSceneryWindow, fSceneDone);    }    [ after scene window is minimized  if (isset(fSceneDone) && vStormStatus == 1)    {    [ advance to next stage    reset(fSceneDone);    vStormStatus = 2;    [ remove the scenery window    erase(oSceneryWindow);    [ stop moving the cursor    vTrackSpeed = 0;    step.size(oCursor, vTrackSpeed);    [ add winter scene window    draw(oWinterWindow);    [ and expand it (cycle speed not changed from default of    [ 1?)    end.of.loop(oWinterWindow, fSceneDone);    }  [ after storm scene is up  if (isset(fSceneDone) && vStormStatus == 2)    {    [ advance to next stage    reset(fSceneDone);    vStormStatus = 3;    [ show Jerrod walking in the storm    draw(oWindyJerrod);    [ move him slowly across the scene    move.obj(oWindyJerrod, 22, 70, 1, fJerrodMoved);    vTrackSpeed = 1;    cycle.time(oWindyJerrod, vTrackSpeed);    vTrackSpeed = 3;    step.time(oWindyJerrod, vTrackSpeed);    [ add the snow objects to create the    [ storm effect    draw(oSnow1);    draw(oSnow2);    draw(oSnow3);    draw(oSnow4);    draw(oSnow5);    draw(oSnow6);    draw(oSnow7);    draw(oSnow8);    }      [ when Jerrod gets across the screen  if (isset(fJerrodMoved) && vStormStatus == 3)    {    [ advance to next stage    reset(fJerrodMoved);    vStormStatus = 4;    [ change view to show Jerrod falling face first into the    [ snow    vTrackSpeed = -12; [ 244;    vTmpY = 0;    [ adjust position so it shows up in correct spot    reposition(oWindyJerrod, vTrackSpeed, vTmpY);    set.loop(oWindyJerrod, 3);    set.cel(oWindyJerrod, 0);    [ run the cycle once    end.of.loop(oWindyJerrod, fJerrodMoved);    vTrackSpeed = 2;    cycle.time(oWindyJerrod, vTrackSpeed);    }      [ after Jerrod falls down  if (isset(fJerrodMoved) && vStormStatus == 4)    {    [ advance to end stage    reset(fJerrodMoved);    vStormStatus = 5;    [ Jerrod dies in the storm    EgoHealthStatus = 45;    print("Your last thoughts are, \"I knew we should have left Indpendence "          "earlier.\"");    print("Then you fall into a deep, endless sleep.");    [ load and call logic to handle final details of    [ Jerrod's demise    load.logics(lgc.DeathOnTrail);    call(lgc.DeathOnTrail);    }  }  [ if in first map stageif (vMapStage == 1)  {  [ increment map timer  ++vMapTimer;    [ flash timer controls speed that the red box flashes  [ between on and off  ++vFlashTimer;    [ create flashing red box by drawing/erasing the box every  [ four cycles (why not just use a view, with a cycle time  [ of four?)  if (vFlashTimer == 4)    {    vFlashTimer = 0;    toggle(fFlashOn);    if (isset(fFlashOn))      {      draw(oMapExpander);      }    else      {      erase(oMapExpander);      }    }      [ after 80 cycles  if (vMapTimer == 80)    {    [ reset timer    vMapTimer = 0;    [ advance to next stage    vMapStage = 2;    [ change expander object to show first cel of the    [ California detail map    set.priority(oMapExpander, 9);    set.view(oMapExpander, vw.CalifDetailArt);    set.loop(oMapExpander, 4);    fix.loop(oMapExpander);    set.cel(oMapExpander, 0);    position(oMapExpander, 4, 97);    [ show it on screen    draw(oMapExpander);    }  }  [ if in map stage 2if (vMapStage == 2)  {  [ increment timer  ++vMapTimer;  [ after 15 cycles  if (vMapTimer == 15)    {    [ reset timer    vMapTimer = 0;    [ advance to next stage    vMapStage = 3;    [ show mid size image of California detail    set.cel(oMapExpander, 1);    }  }[ if in map stage 3if (vMapStage == 3)  {  [ increment timer  ++vMapTimer;  [ after 15 cycles  if (vMapTimer == 15)    {    [ reset timer    vMapTimer = 0;    [ advance to next stage    vMapStage = 4;    [ show largest cel in expanding map    set.cel(oMapExpander, 2);    }  }  [ if in map stage 4if (vMapStage == 4)  {  [ increment timer  ++vMapTimer;  [ after five cycles  if (vMapTimer == 5)    {    [ reset timer    vMapTimer = 0;    [ advance to next stage    vMapStage = 5;    [ add the small California overlay    overlay.pic(vOvlPic);    discard.pic(vOvlPic);    [ remove the expanding map object    erase(oMapExpander);    [ show the picture to force it to update    show.pic();    }  }  [ if in map stage 5if (vMapStage == 5)  {  [ increment timer  ++vMapTimer;  [ after five cycles  if (vMapTimer == 5)    {    [ reset timer    vMapTimer = 0;    [ advance to end stage    vMapStage = 6;    [ draw, discard and show the full California detail    [ picture    draw.pic(currentRoom);    discard.pic(currentRoom);    show.pic();        [ now draw cursor on screen    draw(oCursor);    [ and begin moving it    move.obj(oCursor, 143, 36, 1, fCursorMoved);    vCursorStage = 1;    }  }  [ need to periodically adjust cursor's destination so it[ follows the correct path across the screenif (isset(fCursorMoved) && vCursorStage == 1)  {  reset(fCursorMoved);  vCursorStage = 2;  move.obj(oCursor, 140, 38, 1, fCursorMoved);  }if (isset(fCursorMoved) && vCursorStage == 2)  {  reset(fCursorMoved);  vCursorStage = 3;  move.obj(oCursor, 139, 40, 1, fCursorMoved);  }if (isset(fCursorMoved) && vCursorStage == 3)  {  reset(fCursorMoved);  vCursorStage = 104;  move.obj(oCursor, 133, 44, 1, fCursorMoved);  }if (isset(fCursorMoved) && vCursorStage == 104)  {  set(ContinueJourney);  }if (isset(fCursorMoved) && vCursorStage == 4)  {  reset(fCursorMoved);  vCursorStage = 5;  move.obj(oCursor, 127, 56, 1, fCursorMoved);  }if (isset(fCursorMoved) && vCursorStage == 5)  {  reset(fCursorMoved);  vCursorStage = 6;  move.obj(oCursor, 123, 57, 1, fCursorMoved);  }if (isset(fCursorMoved) && vCursorStage == 6)  {  reset(fCursorMoved);  vCursorStage = 7;  move.obj(oCursor, 122, 59, 1, fCursorMoved);  }if (isset(fCursorMoved) && vCursorStage == 7)  {  reset(fCursorMoved);  vCursorStage = 8;  move.obj(oCursor, 114, 62, 1, fCursorMoved);  }if (isset(fCursorMoved) && vCursorStage == 8)  {  reset(fCursorMoved);  vCursorStage = 9;  move.obj(oCursor, 111, 66, 1, fCursorMoved);  }if (isset(fCursorMoved) && vCursorStage == 9)  {  reset(fCursorMoved);  vCursorStage = 10;  move.obj(oCursor, 99, 70, 1, fCursorMoved);  }if (isset(fCursorMoved) && vCursorStage == 10)  {  reset(fCursorMoved);  vCursorStage = 11;  move.obj(oCursor, 95, 77, 1, fCursorMoved);  }if (isset(fCursorMoved) && vCursorStage == 11)  {  reset(fCursorMoved);  vCursorStage = 12;  move.obj(oCursor, 93, 80, 1, fCursorMoved);  }if (isset(fCursorMoved) && vCursorStage == 12)  {  reset(fCursorMoved);  vCursorStage = 13;  move.obj(oCursor, 73, 86, 1, fCursorMoved);  }if (isset(fCursorMoved) && vCursorStage == 13)  {  reset(fCursorMoved);  vCursorStage = 14;  move.obj(oCursor, 69, 91, 1, fCursorMoved);  }if (isset(fCursorMoved) && vCursorStage == 14)  {  reset(fCursorMoved);  vCursorStage = 15;  move.obj(oCursor, 61, 93, 1, fCursorMoved);  }if (isset(fCursorMoved) && vCursorStage == 15)  {  reset(fCursorMoved);  vCursorStage = 16;  move.obj(oCursor, 51, 127, 1, fCursorMoved);  }if (isset(fCursorMoved) && vCursorStage == 16)  {  reset(fCursorMoved);  vCursorStage = 17;  move.obj(oCursor, 52, 127, 1, fCursorMoved);  }  [ when curser gets to end pointif (isset(fCursorMoved) && vCursorStage == 17)  {  [ trip is over! Jerrod made it to Sutters Fort    [ reset fadename flag so the name banner will appear when  [ entering Sutters Fort for first time  reset(FadeName);    [ Jerrod is officially in California  set(InCalifornia);    [ provide score feedback  if (isset(ReadBibleHint))    {    print("There are 95 points possible so far (not including the points for "          "reading Psalm 23).");    }  else    {    if (currentScore < 95)      {      print("You have %v3 points out of the 95 possible. Don't give up!");      }    if (currentScore == 95)      {      print("You have 95 out of 95! You are right on trek!!");      }    }    [ set flag so main timing logic will move on to Sutters  [ Fort  set(ContinueJourney);  }  [ as cursor moves across the screen, add blocks to the[ picture to keep previous portions of the track permanently[ visibleif (posn(oCursor, 143, 22, 143, 22))  {  add.to.pic(vw.MapTracks, 5, 2, 143, 22, 6, 6);  }if (posn(oCursor, 143, 34, 143, 34))  {  add.to.pic(vw.MapTracks, 5, 2, 143, 34, 6, 6);  }if (posn(oCursor, 134, 44, 134, 44))  {  add.to.pic(vw.MapTracks, 5, 2, 134, 44, 6, 6);  }if (posn(oCursor, 127, 55, 127, 55))  {  add.to.pic(vw.MapTracks, 5, 2, 127, 55, 6, 6);  }if (posn(oCursor, 117, 62, 117, 62))  {  add.to.pic(vw.MapTracks, 5, 2, 117, 62, 6, 6);  }if (posn(oCursor, 106, 70, 106, 70))  {  add.to.pic(vw.MapTracks, 5, 2, 106, 70, 6, 6);  }if (posn(oCursor, 95, 77, 95, 77))  {  add.to.pic(vw.MapTracks, 5, 2, 95, 77, 6, 6);  }if (posn(oCursor, 84, 86, 84, 86))  {  add.to.pic(vw.MapTracks, 5, 2, 84, 86, 6, 6);  }if (posn(oCursor, 73, 86, 73, 86))  {  add.to.pic(vw.MapTracks, 5, 2, 73, 86, 6, 6);  }if (posn(oCursor, 63, 93, 63, 93))  {  add.to.pic(vw.MapTracks, 5, 2, 63, 93, 6, 6);  }if (posn(oCursor, 52, 102, 52, 102))  {  add.to.pic(vw.MapTracks, 5, 2, 52, 102, 6, 6);  }if (posn(oCursor, 51, 114, 51, 114))  {  add.to.pic(vw.MapTracks, 5, 2, 51, 114, 6, 6);  }if (posn(oCursor, 51, 126, 51, 126))  {  add.to.pic(vw.MapTracks, 5, 2, 51, 126, 8, 8);  }[ as the cursor moves across the screen, update the total[ game travel timeif (posn(oCursor, 135, 44, 135, 44) && vTimeStatus == 0)  {  ++vTimeStatus;  GameDays  += 3;  }if (posn(oCursor, 121, 60, 121, 60) && vTimeStatus == 0)  {  ++vTimeStatus;  GameDays  += 3;  }if (posn(oCursor, 103, 70, 103, 70) && vTimeStatus == 1)  {  ++vTimeStatus;  GameDays  += 3;  }if (posn(oCursor, 79, 86, 79, 86) && vTimeStatus == 2)  {  ++vTimeStatus;  GameDays  += 3;  }if (posn(oCursor, 57, 97, 57, 97) && vTimeStatus == 3)  {  ++vTimeStatus;  GameDays  += 3;  }if (posn(oCursor, 51, 126, 51, 126) && vTimeStatus == 4)  {  ++vTimeStatus;  GameDays  += 3;  }  [ as cursor moves across the screen, display periodic [ messages to update player on the tripif (posn(oCursor, 142, 37, 142, 37) && vMsgStatus == 0)  {  [ this message is first to show during first time in this  [ cutscene  ++vMsgStatus;  if (!isset(HideTripMsgs))    {    print("You, along with everyone else in the company, are now beginning to "          "wonder why Captain Buddy selected the Truckee Route! It takes you "          "directly through a deadly desert, while the Lassen Cut-off avoids "          "the desert completely!!");    print("It is too late to go back. You'll just have to make the best of it "          "and hope you survive!!");    }  }if (posn(oCursor, 100, 70, 100, 70) && vMsgStatus == 0)  {  [ this message is first to show during second time in this  [ cutscene  ++vMsgStatus;  if (!isset(HideTripMsgs))    {    print("It wasn't far from here that the Donner Party encountered an early "          "winter storm. Just the thought of it sends chills up and down your "          "spine!!");    }  }if (posn(oCursor, 79, 86, 79, 86) && vMsgStatus == 1)  {  ++vMsgStatus;  if (!isset(HideTripMsgs))    {    print("Now you are over the summit of the Sierra-Nevada mountain range and "          "are beginning your descent into the Sacramento Valley!!");    print("Just knowing you are getting close gives you a little more energy!!");    }  }if (posn(oCursor, 51, 104, 51, 104) && vMsgStatus == 2)  {  ++vMsgStatus;  if (!isset(HideTripMsgs))    {    print("Once you reach the Sacramento Valley, you get word from travelers "          "who took Lassen's Cut-off that the terrain was formidable! Perhaps "          "Captain Buddy did make a wise decision!");    print("You also learn that the U.S. Army, in an attempt to prevent another "          "catastrophe which would dwarf that of the Donner Party, has sent "          "rescue teams to help those men, women, and children still on the "          "trails in the Sierras!");    }  }  [ **************************************[ PROCESS PLAYER INPUT[ **************************************[ if player hasn't provided input no need to do said testsif (!isset(haveInput))  {  goto(Done);  }[ (this boilerplate 'if' block isn't needed since no input[ is processed in this cutscene logic)Done:[ call the main timing logiccall(lgc.WagonTripTiming);return();[ **************************************[ MESSAGES[ **************************************#message 1 "Your last thoughts are, \"I knew we should have left Indpendence earlier.\""#message 2 "Then you fall into a deep, endless sleep."#message 10 "You, along with everyone else in the company, are now beginning to wonder why Captain Buddy selected the Truckee Route! It takes you directly through a deadly desert, while the Lassen Cut-off avoids the desert completely!!"#message 11 "It is too late to go back. You'll just have to make the best of it and hope you survive!!"#message 15 "It wasn't far from here that the Donner Party encountered an early winter storm. Just the thought of it sends chills up and down your spine!!"#message 20 "Now you are over the summit of the Sierra-Nevada mountain range and are beginning your descent into the Sacramento Valley!!"#message 21 "Just knowing you are getting close gives you a little more energy!!"#message 25 "Once you reach the Sacramento Valley, you get word from travelers who took Lassen's Cut-off that the terrain was formidable! Perhaps Captain Buddy did make a wise decision!"#message 26 "You also learn that the U.S. Army, in an attempt to prevent another catastrophe which would dwarf that of the Donner Party, has sent rescue teams to help those men, women, and children still on the trails in the Sierras!"#message 228 "There are 95 points possible so far (not including the points for reading Psalm 23)."#message 233 "You have %v3 points out of the 95 possible. Don't give up!"#message 234 "You have 95 out of 95! You are right on trek!!"