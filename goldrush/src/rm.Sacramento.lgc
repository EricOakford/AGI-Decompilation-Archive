[***********************************************************[[ rm.Sacramento[[ A large-view room of Sacramento, which is the end point[ for either boat trip. The ego object is a very tiny view[ in this room. Jerrod can explore the town a little, but[ he needs to catch a stagecoach to Sutters Fort before it[ leaves, or he's stuck in Sacramento (and loses).[[***********************************************************[ **************************************[ LOCAL DEFINES[ **************************************#define oShip                        o1#define oHull                        o2#define oRigging                     o3#define oPaddleWheel                 o4#define oSmoke                       o5#define oCoach                       o6#define oWagon2                      o7#define oWagon1                      o8#define oPerson10                    o9#define oPerson11                   o10#define oPerson12                   o11#define oLocation                   o12#define oPerson1                    o13#define oPerson2                    o14#define oPerson3                    o15#define oPerson4                    o16#define oPerson5                    o17#define oPerson6                    o18#define oPerson7                    o19#define oPerson8                    o20#define oPerson9                    o21#define vShipStatus                v220#define vWagon1Status              v221#define vWagon2Status              v222#define vLocationTimer             v223#define vCoachStatus               v224[ v225 is not used#define vWindowTimer               v226#define vCoachTimer                v227#define vCoachTimer2               v228#define vCoachDist                 v229#define vTimer                     v230#define fShipMoved                 f220#define fWagon1Moved               f221#define fWagon2Moved               f222#define fBannerDone                f223#define fAddShipworker             f224#define fCoachMoved                f225#define fOnCoach                   f226#define fSkipBanner                f227#define fJerrodMoved               f228[ **************************************[ FIRST CYCLE ONLY[ **************************************if (isset(newRoom))  {  [ make sure any status messages are cleared  clear.lines(24, 24, BLACK);    [  set(fJerrodMoved);    [ load current room picture  load.pic(currentRoom);    [ load views used in the room  load.view(vw.StmShipCA);  load.view(vw.SacPeople);  load.view(vw.SailShipCA);  load.view(vw.StageCoachCA);  load.view(vw.CaliforniaArt);    [ load sounds used in the room  load.sound(m.California);  load.sound(m.FoundGold);    [ draw the current room picture  draw.pic(currentRoom);    [ the ship that Jerrod arrives on  animate.obj(oShip);  [ if coming via the cape route  if (TicketChoice == TKT_CAPE)    {    [ use the steam ship    set.view(oShip, vw.StmShipCA);    set.loop(oShip, 0);    }  [ if coming from the Panama route  if (TicketChoice == TKT_PANAMA)    {    [ use the sailing ship    set.view(oShip, vw.SailShipCA);    set.loop(oShip, 0);    }  fix.loop(oShip);  set.priority(oShip, 14);  [ ship starts on right edge of room  position(oShip, 96, 167);  draw(oShip);  [ move it to center dock area  move.obj(oShip, 87, 167, 1, fShipMoved);  [ begin shipstatus at stage 1  vShipStatus = 1;    [ stagecoach that will take Jerrod to Sutters Fort  animate.obj(oCoach);  set.view(oCoach, vw.StageCoachCA);  set.loop(oCoach, 1);  [ it starts inside the coach barn (and out of view)  position(oCoach, 102, 103);  draw(oCoach);  stop.update(oCoach);    [ animate the location banner  animate.obj(oLocation);  set.view(oLocation, vw.CaliforniaArt);  set.loop(oLocation, 1);  fix.loop(oLocation);  set.cel(oLocation, 0);  ignore.horizon(oLocation);  position(oLocation, 52, 26);  set.priority(oLocation, 15);  draw(oLocation);  stop.cycling(oLocation);    [ now set up a whole bunch of people who will wander  [ around the town  animate.obj(oPerson1);  set.view(oPerson1, vw.SacPeople);  set.loop(oPerson1, 4);  fix.loop(oPerson1);  position(oPerson1, 153, 144);  set.priority(oPerson1, 14);  draw(oPerson1);  wander(oPerson1);  [ person #2  animate.obj(oPerson2);  set.view(oPerson2, vw.SacPeople);  set.loop(oPerson2, 5);  fix.loop(oPerson2);  position(oPerson2, 3, 149);  set.priority(oPerson2, 14);  draw(oPerson2);  wander(oPerson2);  [ person #3  animate.obj(oPerson3);  set.view(oPerson3, vw.SacPeople);  set.loop(oPerson3, 6);  fix.loop(oPerson3);  position(oPerson3, 98, 97);  draw(oPerson3);  wander(oPerson3);  [ person #4  animate.obj(oPerson4);  set.view(oPerson4, vw.SacPeople);  set.loop(oPerson4, 7);  fix.loop(oPerson4);  position(oPerson4, 120, 79);  draw(oPerson4);  wander(oPerson4);  [ person #5  animate.obj(oPerson5);  set.view(oPerson5, vw.SacPeople);  set.loop(oPerson5, 3);  fix.loop(oPerson5);  position(oPerson5, 70, 73);  draw(oPerson5);  wander(oPerson5);  [ person #6  animate.obj(oPerson6);  set.view(oPerson6, vw.SacPeople);  set.loop(oPerson6, 4);  fix.loop(oPerson6);  position(oPerson6, 11, 117);  draw(oPerson6);  wander(oPerson6);  [ person #7  animate.obj(oPerson7);  set.view(oPerson7, vw.SacPeople);  set.loop(oPerson7, 5);  fix.loop(oPerson7);  position(oPerson7, 149, 132);  draw(oPerson7);  wander(oPerson7);  [ person #8  animate.obj(oPerson8);  set.view(oPerson8, vw.SacPeople);  set.loop(oPerson8, 6);  fix.loop(oPerson8);  position(oPerson8, 81, 119);  draw(oPerson8);  wander(oPerson8);  [ person #9  animate.obj(oPerson9);  set.view(oPerson9, vw.SacPeople);  set.loop(oPerson9, 7);  fix.loop(oPerson9);  position(oPerson9, 73, 95);  draw(oPerson9);  wander(oPerson9);  [ wagons that occasionally show up driving across the town  animate.obj(oWagon1);  set.view(oWagon1, vw.SacPeople);  set.loop(oWagon1, 0);  fix.loop(oWagon1);  [ wagon #2  animate.obj(oWagon2);  set.view(oWagon2, vw.SacPeople);  set.loop(oWagon2, 1);  fix.loop(oWagon2);    [ show the picture  show.pic();    [ drop any items collected during boat trip that are no  [ longer needed in California  drop("Piece of ham");  drop("Paper clip");  drop("Metal scraps");  drop("Wooden stick");  drop("String");    [ Jerrod is officially in California! This changes the  [ dialect for most of the generic game responses  set(InCalifornia);    [ reset location name flag  reset(FadeName);    [ play sound to announce arrival in California  sound(m.California, DoneNoAction);  }  [ **************************************[ EVERY CYCLE[ **************************************[ if banner is not done fading and timer is still less than[ max (either check would be sufficient; it's not necessary[ to check for both)if (!isset(fBannerDone) && vLocationTimer < 144)  {  [ increment timer  ++vLocationTimer;  [ after 100 cycles  if (vLocationTimer == 100)    {    [ show the faded location marker    set.cel(oLocation, 1);    }  [ after 143 cycles  if (vLocationTimer == 143)    {    [ remove location marker from screen    erase(oLocation);    [ ego object won't override banner    set(fSkipBanner);    [ banner is done fading    set(fBannerDone);    [ ok to add shipworker    set(fAddShipworker);    }  }  [ if a shipworker is needed on rightmost boatif (isset(fAddShipworker))  {  [ reset the flag  reset(fAddShipworker);  [ convert location object into another person  set.view(oLocation, vw.SacPeople);  set.loop(oLocation, 3);  fix.loop(oLocation);  [ position worker on the boat  position(oLocation, 146, 144);  set.priority(oLocation, 14);  draw(oLocation);  wander(oLocation);  }  [ if Jerrod leaves boat before location banner is goneif (posn(ego, 95, 88, 122, 109) && !isset(fSkipBanner))  {  [ force location banner to go away  set(fSkipBanner);  erase(oLocation);  }  [ when ship gets to first pointif (isset(fShipMoved) && vShipStatus == 1)  {  [ advance to next stage  reset(fShipMoved);  vShipStatus = 2;  [ move to next point  move.obj(oShip, 61, 163, 1, fShipMoved);  }  [ when ship gets to second pointif (isset(fShipMoved) && vShipStatus == 2)  {  [ advance to next stage  reset(fShipMoved);  vShipStatus = 3;  [ move to next point  move.obj(oShip, 43, 158, 1, fShipMoved);  }  [ when ship gets to third point (at docking point)if (isset(fShipMoved) && vShipStatus == 3)  {  [ ship is done moving  reset(fShipMoved);  vShipStatus = 4;    [   set.priority(oShip, 12);  stop.update(oShip);    [ the ship object needs to be replaced with separate  [ components for the main hull, the wheel, and the rigging  [ so that Jerrod and other persons can move around and   [ show up behind the wheel and rigging    [ if coming from cape horn  if (TicketChoice == TKT_CAPE)    {    [ the front paddle wheel needs to be shown with correct    [ priority so Jerrod can go behind it    animate.obj(oPaddleWheel);    set.view(oPaddleWheel, vw.StmShipCA);    set.loop(oPaddleWheel, 3);    set.cel(oPaddleWheel, 0);    fix.loop(oPaddleWheel);    set.priority(oPaddleWheel, 14);    position(oPaddleWheel, 64, 147);    ignore.blocks(oPaddleWheel);    ignore.objs(oPaddleWheel);    draw(oPaddleWheel);    stop.update(oPaddleWheel);    }  [ animate rigging as a separate object  animate.obj(oRigging);  [ if coming from cape horn  if (TicketChoice == TKT_CAPE)    {    [ use the steam ship rigging    set.view(oRigging, vw.StmShipCA);    set.loop(oRigging, 2);    set.cel(oRigging, 1);    }  [ if coming from panama  if (TicketChoice == TKT_PANAMA)    {    [ use sailing ship rigging    set.view(oRigging, vw.SailShipCA);    set.loop(oRigging, 1);    set.cel(oRigging, 1);    }  fix.loop(oRigging);  set.priority(oRigging, 13);  position(oRigging, 43, 146);  ignore.blocks(oRigging);  ignore.objs(oRigging);  draw(oRigging);    [ animate the ship hull as a separate object  animate.obj(oHull);  if (TicketChoice == TKT_CAPE)    {    set.view(oHull, vw.StmShipCA);    set.loop(oHull, 2);    set.cel(oHull, 0);    }  if (TicketChoice == TKT_PANAMA)    {    set.view(oHull, vw.SailShipCA);    set.loop(oHull, 1);    set.cel(oHull, 0);    }  fix.loop(oHull);  set.priority(oHull, 12);  position(oHull, 47, 158);  ignore.blocks(oHull);  ignore.objs(oHull);  draw(oHull);  [ hull and rigging are static - they don't update  stop.update(oHull);  stop.update(oRigging);    [ if coming from Cape Horn,  if (TicketChoice == TKT_CAPE)    {    [ also need to add smoke from stack as a separate object    animate.obj(oSmoke);    set.view(oSmoke, vw.StmShipCA);    set.loop(oSmoke, 1);    fix.loop(oSmoke);    set.priority(oSmoke, 13);    position(oSmoke, 77, 111);    ignore.blocks(oSmoke);    ignore.objs(oSmoke);    draw(oSmoke);    start.cycling(oSmoke);    }      [ Jerrod  animate.obj(ego);  [ use the tiny view (loop doesn't change when using this  [ view)  set.view(ego, vw.SacPeople);  set.loop(ego, 2);  fix.loop(ego);  [ start on the boat  position(ego, 74, 145);  draw(ego);  egoDir = STOPPED;  [  reset(fJerrodMoved);    [ add a couple more people to the scene  animate.obj(oPerson10);  set.view(oPerson10, vw.SacPeople);  set.loop(oPerson10, 3);  fix.loop(oPerson10);  position(oPerson10, 86, 145);  draw(oPerson10);  wander(oPerson10);  [ person #11  animate.obj(oPerson11);  set.view(oPerson11, vw.SacPeople);  set.loop(oPerson11, 4);  fix.loop(oPerson11);  position(oPerson11, 70, 143);  draw(oPerson11);  wander(oPerson11);  [ person #12  animate.obj(oPerson12);  set.view(oPerson12, vw.SacPeople);  set.loop(oPerson12, 5);  fix.loop(oPerson12);  position(oPerson12, 64, 143);  draw(oPerson12);  wander(oPerson12);    [ erase original ship object  erase(oShip);  }  [ if Jerrod is moving, and move flag not set yetif (egoDir != STOPPED && !isset(fJerrodMoved))  {  [ set moving flag  set(fJerrodMoved);  }  [ Jerrod has not started moving yetif (!isset(fJerrodMoved))  {  [ increment timer  ++vTimer;  [ after 150 cycles  if (vTimer == 150)    {    [ tell player to get moving!    set(fJerrodMoved);    vTimer = 0;    print("You've been on this ship long enough. Go ahead and disembark!");    }  }  [ if wagon #1 is not on screenif (vWagon1Status != 250)  {  [ random chance wagon #1 appears  random(210, 249, vWagon1Status);  [ one in 40 chance  if (vWagon1Status == 230)    {    [ choose a random path for the wagon    random(0, 1, vWagon1Status);    if (vWagon1Status == 0)      {      position(oWagon1, 1, 116);      draw(oWagon1);      move.obj(oWagon1, 146, 116, 1, fWagon1Moved);      }    else      {      position(oWagon1, 1, 133);      draw(oWagon1);      move.obj(oWagon1, 146, 133, 1, fWagon1Moved);      }    [ set status to show wagon #1 is visible    vWagon1Status = 250;    }  }  [ when wagon #1 reaches destinationif (isset(fWagon1Moved))  {  [ remove it from screen  reset(fWagon1Moved);  erase(oWagon1);  [ set status so it can randomly appear again  ++vWagon1Status;  }  [if wagon #2 is not on screenif (vWagon2Status != 250)  {  [ random chance it appears  random(210, 249, vWagon2Status);  [ one in 40 chance  if (vWagon2Status == 230)    {    [ choose a random path for the wagon    random(0, 1, vWagon2Status);    if (vWagon2Status == 0)      {      position(oWagon2, 146, 112);      draw(oWagon2);      move.obj(oWagon2, 1, 112, 1, fWagon2Moved);      }    else      {      position(oWagon2, 146, 127);      draw(oWagon2);      move.obj(oWagon2, 1, 127, 1, fWagon2Moved);      }    [ set status to show wagon is on screen    vWagon2Status = 250;    }  }  [ when wagon #2 reaches its destinationif (isset(fWagon2Moved))  {  [ remove it from screen  reset(fWagon2Moved);  erase(oWagon2);  [ set status so it can randomly appear again  ++vWagon2Status;  }  [ if stagecoach is waiting to leaveif (vCoachStatus == 0)  {  [ increment timer  ++vCoachTimer;  [ after three cycles  if (vCoachTimer == 3)    {    [ reset timer    vCoachTimer = 0;    [ increment second timer    ++vCoachTimer2;    [ when second counter reaches 220 (a total of    [ 220 * 3 = 660 cycles)    if (vCoachTimer2 == 220)      {      [ the coach leaves without Jerrod      start.update(oCoach);      move.obj(oCoach, 70, 103, 1, fCoachMoved);      vCoachStatus = 1;      }    }  }  [ if Jerrod enters the stagecoach office and coach hasn't[ left yetif (posn(ego, 113, 104, 123, 104) && vCoachStatus == 0)  {  [ Jerrod gets on the stagecoach  erase(ego);  set(fOnCoach);  start.update(oCoach);  print.at("Ya jump on board the stage bound fer Sutter's Fort and yer on yer "           "way!", 2, 5, 0);  [ start window timer  vWindowTimer = 1;  [ play score sound  sound(m.FoundGold, DoneNoAction);  [ move coach to first point  move.obj(oCoach, 70, 103, 1, fCoachMoved);  vCoachStatus = 1;  [ score a point  ++currentScore;  }  [ this window timer doesn't actually do anything no print[ windows are displayed with the 'leaveWindow' flag set[ if window timer is activeif (vWindowTimer > 0)  {  [ increment it  ++vWindowTimer;  [ after 35 cycles  if (vWindowTimer == 35)    {    [ reset the timer    vWindowTimer = 0;    [ close any open print window    close.window();    }  }  [ when coach gets to first pointif (isset(fCoachMoved) && vCoachStatus == 1)  {  [ move to second point  reset(fCoachMoved);  vCoachStatus = 2;  move.obj(oCoach, 65, 106, 1, fCoachMoved);  }  [ when coach gets to second pointif (isset(fCoachMoved) && vCoachStatus == 2)  {  [ move to third point  reset(fCoachMoved);  vCoachStatus = 3;  move.obj(oCoach, 84, 125, 1, fCoachMoved);  }  [ when coach gets to third pointif (isset(fCoachMoved) && vCoachStatus == 3)  {  [ move to last point  reset(fCoachMoved);  vCoachStatus = 4;  move.obj(oCoach, 139, 125, 1, fCoachMoved);  }  [ when coach gets to last pointif (isset(fCoachMoved) && vCoachStatus == 4)  {  [ if Jerrod is on the coach  if (isset(fOnCoach))    {    [ move to Sutters Fort    new.room(rm.SuttersFortArea); [ ##LE001##    }  [ otherwise, reset the flag, and set status to show stage  [ is GONE  reset(fCoachMoved);  vCoachStatus = 5;  erase(oCoach);  }  [ **************************************[ PROCESS PLAYER INPUT[ **************************************[ if player hasn't provided input no need to do said testsif (!isset(haveInput))  {  goto(Done);  }  [ look boatif (said("examine", "boat"))  {  print("Ship after ship arrives loaded with people determined to strike it "        "rich!");  }  [ look roadif (said("examine", "path"))  {  print("The buildings of Sacramento line the streets.");  }  [ look buildingif ((said("examine", "building") ||     said("examine", "in", "building") ||     said("examine", "shop") ||     said("examine", "in", "shop") ||     said("examine", "home") ||     said("examine", "in", "home") ||     said("examine", "wall")))  {  [ if on the coach  if (isset(fOnCoach))    {    print("Ya watch the buildings go by through the stage windows.");    goto(Done);    }  [ otherwise, answer depends on Jerrod's location  if ((posn(ego, 0, 102, 15, 117) ||       posn(ego, 16, 110, 28, 117) ||       posn(ego, 22, 106, 23, 109) ||       posn(ego, 29, 110, 39, 117) ||       posn(ego, 32, 106, 34, 109) ||       posn(ego, 40, 96, 67, 117) ||       posn(ego, 89, 88, 94, 117) ||       posn(ego, 95, 110, 125, 117) ||       posn(ego, 95, 88, 122, 109) ||       posn(ego, 126, 110, 137, 117) ||       posn(ego, 133, 105, 134, 109) ||       posn(ego, 138, 105, 146, 117) ||       posn(ego, 147, 105, 159, 117) ||       posn(ego, 61, 78, 77, 95) ||       posn(ego, 69, 65, 91, 77) ||       posn(ego, 87, 78, 124, 87)))    {    if (posn(ego, 0, 102, 15, 117))      {      print("Of the many hotels and boardin' houses in town, this one, \"City "            "Hotel\", looks, perty much, the nicest.");      }    if (posn(ego, 16, 110, 28, 117))      {      print("This building was definitely built in a day. It's just some canvas "            "stretched over some poles with a wood storefront.");      }    if (posn(ego, 22, 106, 23, 109))      {      print("Yer inside of a building made of only canvas!");      }    if (posn(ego, 29, 110, 39, 117))      {      print("Yer outside of the Eagle Theater.");      }    if (posn(ego, 32, 106, 34, 109))      {      print("Yer inside of the Eagle Theater!");      }    if (posn(ego, 40, 96, 67, 117))      {      print("This building is one of the few in town that looks like it's gonna "            "be 'round fer awhile!");      }    if ((posn(ego, 89, 88, 94, 117) ||         posn(ego, 95, 110, 125, 117)))      {      print("Yer right outside the stage coach office!");      }    if (posn(ego, 95, 88, 122, 109))      {      if (vCoachStatus == 0)        {        print("Yer inside the stage building. It looks like the Sutter's Fort "              "stage is prepped and ready to roll!");        }      else        {        print("Yer inside the stage building. The stage area is empty right "              "now. There's a stage schedule on the wall.");        }      }    if (posn(ego, 126, 110, 137, 117))      {      print("Yer standin' smack dab in front of the Eldorado Exchange!");      }    if (posn(ego, 133, 105, 134, 109))      {      print("Yer inside the Eldorado Exchange.");      }    if (posn(ego, 138, 105, 146, 117))      {      print("This is one of Sacramento's supply stores. Many folks lookin' fer "            "gold get supplies here.");      }    if (posn(ego, 147, 105, 159, 117))      {      print("This establishment's name, \"The Elephant House\", comes from the "            "phrase you often hear from gold seekers. If you've seen the "            "elephant, you've experienced the \"GOLD RUSH!\" and the hard times "            "that come along with it.");      }    if (posn(ego, 61, 78, 77, 95))      {      print("These buildings all look shoddily made.");      }    if (posn(ego, 69, 65, 91, 77))      {      print("The less reputable businesses of Sacramento are housed in these "            "buildings!");      }    if (posn(ego, 87, 78, 124, 87))      {      print("New buildings seem to go up every day in this part of town.");      }    }  else    {    print("Sacramento has many buildings. You need to be closer to get a good "          "look.");    }  }  [ look city/look Sacramentoif ((said("examine", "city") ||     said("examine", "sacramento")))  {  print("Sacramento's a popular stop fer folks headin' to the hills in search "        "of gold.");  }  [ talk to man/womanif ((said("speak", "boy") ||     said("speak", "girl") ||     said("speak")))  {  [ if on the stagecoach  if (isset(fOnCoach))    {    print("Yer in an empty stage.");    }  else    {    print("These dodging codgers are so busy, they ain't got the time to talk "          "to you!");    }  }  [ look man/look womanif ((said("examine", "boy") ||     said("examine", "girl")))  {  [ if on the stagecoach  if (isset(fOnCoach))    {    print("Yer in an empty stage.");    }  else    {    print("There are people all over the place!");    }  }  [ look aroundif ((said("examine", "around") ||     said("examine")))  {  [ answer depends on Jerrod's location  if ((posn(ego, 22, 106, 23, 109) ||       posn(ego, 32, 106, 34, 109) ||       posn(ego, 95, 88, 122, 109) ||       posn(ego, 133, 105, 134, 109)))    {    if (posn(ego, 22, 106, 23, 109))      {      print("Yer inside of a building made of only canvas!");      }    if (posn(ego, 32, 106, 34, 109))      {      print("Yer inside of the Eagle Theater!");      }    if (posn(ego, 95, 88, 122, 109))      {      if (isset(fOnCoach))        {        print("This stage is top notch. Yer ridin' in luxury!");        }      else        {        if (vCoachStatus == 0)          {          print("Yer inside the stage building. It looks like the Sutter's Fort "                "stage is prepped and ready to roll!");          }        else          {          print("Yer inside the stage building. The stage area is empty right "                "now. There's a stage schedule on the wall.");          }        }      }    if (posn(ego, 133, 105, 134, 109))      {      print("Yer inside the Eldorado Exchange.");      }    }  else    {    print("Sacramento is a beehive of activity! But just like any other city "          "it's made of streets and buildings.");    }  }  [ look river/water/oceanif ((said("examine", "water") ||     said("examine", "creek") ||     said("examine", "ocean")))  {  print("Yer lookin' at the Sacramento River.");  }  [ look stagecoachif (said("examine", "coach"))  {  if (isset(fOnCoach))    {    print("This stage is top notch. Yer ridin' in luxury!");    }  else    {    if (vCoachStatus == 0)      {      if (posn(ego, 94, 82, 123, 109))        {        print("Inside this rather dimly-lit building you see a stagecoach, all "              "hitched and ready to go.");        }      else        {        print("You see no stage coach right here.");        }      }    else      {      if (posn(ego, 94, 82, 123, 109))        {        print("The stage has already left for Sutter's Fort.");        }      else        {        distance(ego, oCoach, vCoachDist);        if (vCoachDist == 255)          {          print("The stage has already left for Sutter's Fort.");          }        else          {          print("The stage is headin' to Sutter's Fort!");          }        }      }    }  }  [ get on coachif ((said("enter", "coach") ||     said("open", "coach") ||     said("open", "door") ||     said("board", "coach") ||     said("enter") ||     said("go", "coach") ||     said("acquire", "coach") ||     said("climb", "coach") ||     said("go", "door") ||     said("ride", "coach") ||     said("open", "coach", "door") ||     said("open", "door", "coach") ||     said("jump", "coach") ||     said("hop", "coach")))  {  [ if already on  if (isset(fOnCoach))    {    print("Yer in the stage.");    }  else    {    [ if Jerrod is in the stagecoach office    if (posn(ego, 94, 82, 123, 109))      {      [ if coach hasn't left yet      if (vCoachStatus == 0)        {        [ Jerrod gets on the coach        erase(ego);        set(fOnCoach);        start.update(oCoach);        print.at("Ya jump on board the stage bound fer Sutter's Fort and yer on "                 "yer way!", 2, 5, 0);        vWindowTimer = 1;        [ play score sound        sound(m.FoundGold, DoneNoAction);        [ coach moves to first point        move.obj(oCoach, 70, 103, 1, fCoachMoved);        vCoachStatus = 1;        [ score a point        ++currentScore;        }      else        {        print("The stage has already left for Sutter's Fort.");        }      }    else      {      if (vCoachStatus == 0)        {        print("You see no stage coach right here.");        }      else        {        print("It's too late. That stage is headin' to Sutter's Fort!");        }      }    }  }  [ look fortif (said("examine", "fort"))  {  print("There ain't no fort right here, this is Sacramento!");  }  [ buy ticketif ((said("acquire", "ticket") ||     said("buy", "ticket")))  {  print("At this point in your journey ya don't need a ticket!");  }  [ leave boatif ((said("exit", "boat") ||     said("acquire", "off", "boat")))  {  print("Ya got two healthy legs, walk!");  }  [ open doorif ((said("open", "door") ||     said("enter", "building")))  {  print("If ya see a door, go through it!");  }  [ ride boatif ((said("ride", "boat") ||     said("go", "boat")))  {  print("Ya just got off of that thing!");  }  [ blah provisions/provisions blahif ((said("anyword", "provisions") ||     said("provisions", "anyword")))  {  print("You may need supplies, but you can't get them here.");  }  [ look treesif (said("examine", "forest"))  {  print("The only interesting thing about these tress is they are in "        "California!");  }  [ look wagonif (said("examine", "cart"))  {  print("Some of these wagons head east into the hills.");  }  [ look hillsif (said("examine", "foot hill"))  {  print("The hills lie to the east.");  }  [ look scheduleif ((said("examine", "schedule") ||     said("examine", "coach", "schedule") ||     said("read", "schedule") ||     said("read", "coach", "schedule")))  {  [ if in the stagecoach office  if (posn(ego, 95, 88, 122, 109))    {    [ if coach has NOT left yet    if (vCoachStatus == 0)      {      print("According to the stage schedule, the stage should be leaving "            "anytime.");      }    else      {      print("According to the stage schedule, you have missed the one and only "            "stage to Sutter's Fort!");      }    }  else    {    print("You see no schedule right here.");    }  }if ((said("go", "fort") ||     said("ride", "fort")))  {  print("How are ya gonna to get there?");  }  Done:return();[ **************************************[ MESSAGES[ **************************************#message 1 "Ship after ship arrives loaded with people determined to strike it rich!"#message 2 "The buildings of Sacramento line the streets."#message 3 "Sacramento's a popular stop fer folks headin' to the hills in search of gold."#message 5 "Sacramento has many buildings. You need to be closer to get a good look."#message 8 "Of the many hotels and boardin' houses in town, this one, \"City Hotel\", looks, perty much, the nicest."#message 9 "This building was definitely built in a day. It's just some canvas stretched over some poles with a wood storefront."#message 10 "Yer outside of the Eagle Theater."#message 11 "This building is one of the few in town that looks like it's gonna be 'round fer awhile!"#message 12 "Yer right outside the stage coach office!"#message 13 "Yer standin' smack dab in front of the Eldorado Exchange!"#message 14 "This is one of Sacramento's supply stores. Many folks lookin' fer gold get supplies here."#message 15 "This establishment's name, \"The Elephant House\", comes from the phrase you often hear from gold seekers. If you've seen the elephant, you've experienced the \"GOLD RUSH!\" and the hard times that come along with it."#message 16 "The less reputable businesses of Sacramento are housed in these buildings!"#message 17 "New buildings seem to go up every day in this part of town."#message 18 "These buildings all look shoddily made."#message 19 "Sacramento is a beehive of activity! But just like any other city it's made of streets and buildings."#message 24 "These dodging codgers are so busy, they ain't got the time to talk to you!"#message 25 "This stage is top notch. Yer ridin' in luxury!"#message 26 "Ya watch the buildings go by through the stage windows."#message 27 "The stage is headin' to Sutter's Fort!"#message 28 "It's too late. That stage is headin' to Sutter's Fort!"#message 29 "Inside this rather dimly-lit building you see a stagecoach, all hitched and ready to go."#message 31 "Yer lookin' at the Sacramento River."#message 33 "The stage has already left for Sutter's Fort."#message 34 "Ya jump on board the stage bound fer Sutter's Fort and yer on yer way!"#message 35 "Yer in the stage."#message 38 "Yer in an empty stage."#message 39 "There are people all over the place!"#message 41 "Yer inside of a building made of only canvas!"#message 42 "Yer inside of the Eagle Theater!"#message 43 "Yer inside the stage building. It looks like the Sutter's Fort stage is prepped and ready to roll!"#message 44 "Yer inside the stage building. The stage area is empty right now. There's a stage schedule on the wall."#message 45 "Yer inside the Eldorado Exchange."#message 46 "There ain't no fort right here, this is Sacramento!"#message 47 "At this point in your journey ya don't need a ticket!"#message 48 "Ya got two healthy legs, walk!"#message 49 "If ya see a door, go through it!"#message 50 "Ya just got off of that thing!"#message 51 "You've been on this ship long enough. Go ahead and disembark!"#message 52 "You may need supplies, but you can't get them here."#message 53 "You see no stage coach right here."#message 54 "The only interesting thing about these tress is they are in California!"#message 55 "Some of these wagons head east into the hills."#message 56 "The hills lie to the east."#message 57 "You see no schedule right here."#message 58 "According to the stage schedule, the stage should be leaving anytime."#message 59 "According to the stage schedule, you have missed the one and only stage to Sutter's Fort!"#message 60 "How are ya gonna to get there?"