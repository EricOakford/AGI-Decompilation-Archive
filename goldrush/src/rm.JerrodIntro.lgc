[***********************************************************[[ rm.JerrodIntro[ [ Second screen of introduction animation. It introduces[ Jerrod and tells us why we are playing the game.[[***********************************************************[ **************************************[ LOCAL DEFINES[ **************************************#define oBanner                      o1#define oFace                        o2#define oBody                        o3#define oHat                         o4#define oMoveFrame                   o5#define oPhotoFade                   o6#define oFrameFade1                  o7#define oFrameFade2                  o8#define oFrameFade3                  o9#define oFrameFade4                 o10#define vPicNum                    v220#define vSequenceTimer             v221#define vSequencePhase             v222#define vRow                       v223#define vCol                       v224#define vIntroTextLine             v225#define vSeqPhase_2                v226#define vSeqTimer_2                v227#define vHatSequence               v228#define vFrameStep                 v229#define fBannerAtTop               f220#define fLoopDone                  f221#define fHatNext                   f222#define fMusicDone                 f223[ **************************************[ FIRST CYCLE ONLY[ **************************************if (isset(newRoom))  {  vPicNum = pic.IntroFrame;  load.pic(currentRoom);  load.view(vw.JerrodFramed);  load.view(vw.FrameAnimations);  load.view(vw.IntroBanners);  load.view(vw.Unties);  load.sound(m.JerrodIntro);  load.view(vw.CityClothes);    [ load the frame picture  load.pic(vPicNum);    [ draw the current room pic (which is blank); the frame  [ gets added after Jerrod is introduced  draw.pic(currentRoom);    [ banner at top of screen that introduces Jerrod  animate.obj(oBanner);  set.view(oBanner, vw.IntroBanners);  set.loop(oBanner, 0);  fix.loop(oBanner);  set.cel(oBanner, 0);  ignore.horizon(oBanner);  [ banner starts at bottom of screen  position(oBanner, 39, 167);  draw(oBanner);    [ Jerrod's face; it will change and animate several times  [ during the intro  animate.obj(oFace);  set.view(oFace, vw.FrameAnimations);  set.loop(oFace, 0);  fix.loop(oFace);  set.cel(oFace, 0);  position(oFace, 122, 77);  set.priority(oFace, 14);  stop.cycling(oFace);    [ Jerrod's body; he starts with city clothes, but will  [ transition to his country outfit later on  animate.obj(oBody);  set.view(oBody, vw.CityClothes);  set.loop(oBody, 0);  fix.loop(oBody);  set.cel(oBody, 0);  position(oBody, 114, 133);  set.priority(oBody, 14);  stop.cycling(oBody);    [ Jerrod's hat that gets tossed  animate.obj(oHat);  set.view(oHat, vw.CityClothes);  set.loop(oHat, 1);  fix.loop(oHat);  position(oHat, 100, 143);  ignore.objs(oHat);    [ this object fades out the main portrait to solid blue  [ at end of the cut scene  animate.obj(oPhotoFade);  set.view(oPhotoFade, vw.FrameAnimations);  set.loop(oPhotoFade, 4);  fix.loop(oPhotoFade);  set.cel(oPhotoFade, 0);  ignore.objs(oPhotoFade);  position(oPhotoFade, 114, 133);  set.priority(oPhotoFade, 13);    [ these four objects are used to wipe the photo frame from  [ the screen at the end of the scene  animate.obj(oFrameFade1);  set.view(oFrameFade1, vw.FrameAnimations);  set.loop(oFrameFade1, 5);  fix.loop(oFrameFade1);  set.cel(oFrameFade1, 0);  position(oFrameFade1, 105, 147);  set.priority(oFrameFade1, 12);  [ frame 2  animate.obj(oFrameFade2);  set.view(oFrameFade2, vw.FrameAnimations);  set.loop(oFrameFade2, 5);  fix.loop(oFrameFade2);  set.cel(oFrameFade2, 0);  position(oFrameFade2, 105, 115);  set.priority(oFrameFade2, 12);  [ frame 3  animate.obj(oFrameFade3);  set.view(oFrameFade3, vw.FrameAnimations);  set.loop(oFrameFade3, 5);  fix.loop(oFrameFade3);  set.cel(oFrameFade3, 0);  position(oFrameFade3, 105, 83);  set.priority(oFrameFade3, 12);  [ frame 4  animate.obj(oFrameFade4);  set.view(oFrameFade4, vw.FrameAnimations);  set.loop(oFrameFade4, 5);  fix.loop(oFrameFade4);  set.cel(oFrameFade4, 0);  position(oFrameFade4, 105, 51);  set.priority(oFrameFade4, 12);    [ this object moves the picture frame to the screen center  [ for the next phase in the introduction sequence  animate.obj(oMoveFrame);  set.view(oMoveFrame, vw.JerrodFramed);  set.loop(oMoveFrame, 0);  set.cel(oMoveFrame, 0);  position(oMoveFrame, 111, 137);  stop.cycling(oMoveFrame);    [ now show the picture  show.pic();    [ no input allowed during introduction  prevent.input();  lastChar = 0;  reset(haveMatch);  }  [ **************************************[ EVERY CYCLE:[ **************************************[ opening sequence - show the first banner[ (" are proud to present...")if (vSequencePhase == 0)  {  [ increment timer  ++vSequenceTimer;  [ after 10 cycles  if (vSequenceTimer == 10)    {    vSequenceTimer = 0;    [ move banner from bottom to top of screen    vSequencePhase = 1;    move.obj(oBanner, 39, 12,  10, fBannerAtTop);    }  }[ after first banner gets to top, get ready to show the[ second banner ("...the life and times of...")if (isset(fBannerAtTop) && vSequencePhase == 1)  {  reset(fBannerAtTop);  [ adjust position down four pixels to align it at right  [ spot for the rest of the banners  TmpX = 0;  TmpY = -4 ; [ 252;  reposition(oBanner, TmpX, TmpY);  vSequencePhase = 2;  }[ then show the second banner after another short delayif (vSequencePhase == 2)  {  ++vSequenceTimer;  if (vSequenceTimer == 20)    {    vSequenceTimer = 0;    vSequencePhase = 3;    [ adjust position for size of new banner    TmpX = -9; [ 247;    TmpY = 0;    reposition(oBanner, TmpX, TmpY);    [ display second banner    set.loop(oBanner, 1);    }  }  [ third banner is next after another short delay[ ("...a greate AMERICAN hero...")if (vSequencePhase == 3)  {  ++vSequenceTimer;  if (vSequenceTimer == 25)    {    vSequenceTimer = 0;    vSequencePhase = 4;    TmpX = -15; [ 241;    TmpY = 0;    reposition(oBanner, TmpX, TmpY);    [ then add it permanently to the picture    add.to.pic(vw.IntroBanners, 2, 0, 14, 12, 4, 4);    [ and get rid of the object    erase(oBanner);    }  }  [ after last banner, introduce Jerrodif (vSequencePhase == 4)  {  ++vSequenceTimer;  if (vSequenceTimer == 20)    {    vSequenceTimer = 0;    vSequencePhase = 5;    [ draw the frame for the picture    draw.pic(vPicNum);    discard.pic(vPicNum);    [ add the banner    add.to.pic(vw.IntroBanners, 2, 0, 14, 12, 4, 4);    [ and  Jerrod's body (with city clothes)    draw(oFace);    [ and face to the screen    draw(oBody);    show.pic();    display(20, 26, "Jerrod Wilson");    }  }  [ after another slight delay, set up to begin adding the[ intro textif (vSequencePhase == 5)  {  ++vSequenceTimer;  if (vSequenceTimer == 15)    {    vSequenceTimer = 0;    vSequencePhase = 6;    [ parameters to display intro text    vIntroTextLine = 1;    vRow = 4;    vCol = 0;    }  }  [ add intro text, one line after another, every 16 cyclesif (vSequencePhase == 6)  {  ++vSequenceTimer;  if (vSequenceTimer == 16)    {    vSequenceTimer = 0;    ++vIntroTextLine;    ++vRow;    display.v(vRow, vCol, vIntroTextLine);    if (vIntroTextLine == 2)      {      sound(m.JerrodIntro, fMusicDone);      }    if (vIntroTextLine == 13)      {      [ after all text is shown, move to next phase      vSequencePhase = 7;      }    }  }  [ after a slight pause, add the last banner at bottom of[ screen ("...dreaming of adventure!!")if (vSequencePhase == 7)  {  ++vSequenceTimer;  if (vSequenceTimer == 22)    {    vSequenceTimer = 0;    vSequencePhase = 8;    display(20, 17, "                       ");    add.to.pic(vw.IntroBanners, 3, 0, 24, 167, 4, 4);    }  }[ erase the text lines in pairs starting with top and[ bottom, and working in to the center (they are listed[ backwards so they don't cascade; i.e. if #8 was done[ first, then it would immediately trigger #9, and so on...)if (vSequencePhase == 13)  {  display(11, 0, "                       ");  display(10, 0, "                       ");  vSequencePhase = 14;  }if (vSequencePhase == 12)  {  display(12, 0, "                       ");  display(9, 0, "                       ");  vSequencePhase = 13;  }if (vSequencePhase == 11)  {  display(13, 0, "                       ");  display(8, 0, "                       ");  vSequencePhase = 12;  }if (vSequencePhase == 10)  {  display(14, 0, "                       ");  display(7, 0, "                       ");  vSequencePhase = 11;  }if (vSequencePhase == 9)  {  display(15, 0, "                       ");  display(6, 0, "                       ");  vSequencePhase = 10;  }if (vSequencePhase == 8)  {  ++vSequenceTimer;  if (vSequenceTimer == 15)    {    vSequenceTimer = 0;    vSequencePhase = 9;    display(16, 0, "                       ");    display(5, 0, "                       ");    }  }[ once line 4 of text is shown, begin second sequenceif (vSeqPhase_2 == 0 && vIntroTextLine == 4)  {  vSeqPhase_2 = 1;  }  [ during line four, Jerrod looks from left to right once if (vSeqPhase_2 == 1)  {  ++vSeqTimer_2;  if (vSeqTimer_2 == 1)    {    [ toggle Jerrod's eyes    set.cel(oFace, 1);    }  if (vSeqTimer_2 == 4)    {    [ then toggle them back    set.cel(oFace, 0);    vSeqTimer_2 = 0;    vSeqPhase_2 = 102;    [ it looks like they decided later on to add a few    [ phases between 1 and 2 so they used these 3-digit    [ values    }  }[ then during line 5, Jerrod looks left to right again  if (vSeqPhase_2 == 102 && vIntroTextLine == 5)  {  vSeqPhase_2 = 103;  }if (vSeqPhase_2 == 103)  {  ++vSeqTimer_2;  if (vSeqTimer_2 == 1)    {    set.cel(oFace, 1);    }  if (vSeqTimer_2 == 4)    {    set.cel(oFace, 0);    vSeqTimer_2 = 0;    vSeqPhase_2 = 2;    }  }  [ with line 6, same thing - Jerrod looks left to rightif (vSeqPhase_2 == 2 && vIntroTextLine == 6)  {  vSeqPhase_2 = 3;  }if (vSeqPhase_2 == 3)  {  ++vSeqTimer_2;  if (vSeqTimer_2 == 3)    {    set.cel(oFace, 1);    }  if (vSeqTimer_2 == 12)    {    set.cel(oFace, 0);    vSeqTimer_2 = 0;    vSeqPhase_2 = 104;    }  }  [ at line 7, once more look left to rightif (vSeqPhase_2 == 104 && vIntroTextLine == 7)  {  vSeqPhase_2 = 105;  }if (vSeqPhase_2 == 105)  {  ++vSeqTimer_2;  if (vSeqTimer_2 == 3)    {    set.cel(oFace, 1);    }  if (vSeqTimer_2 == 12)    {    set.cel(oFace, 0);    vSeqTimer_2 = 0;    vSeqPhase_2 = 4;    }  }  [ at line 8, change Jerrod's expression to a slight nod and[ twist of headif (vSeqPhase_2 == 4 && vIntroTextLine == 8)  {  vSeqPhase_2 = 5;  }if (vSeqPhase_2 == 5)  {  ++vSeqTimer_2;  if (vSeqTimer_2 == 3)    {    set.loop(oFace, 1);    set.cel(oFace, 0);    cycle.time(oFace, vSeqTimer_2);    end.of.loop(oFace, fLoopDone);    }  if (isset(fLoopDone) && vSeqPhase_2 == 5)    {    vSeqPhase_2 = 6;    vSeqTimer_2 = 0;    set.cel(oFace, 0);    reset(fLoopDone);    }  }  [ at line 10, do two more cycles of head twistif (vSeqPhase_2 == 6 && vIntroTextLine == 10)  {  vSeqPhase_2 = 7;  }if ((vSeqPhase_2 == 7 || vSeqPhase_2 == 8))  {  ++vSeqTimer_2;  if (vSeqTimer_2 == 3)    {    vSeqTimer_2 = 2;    cycle.time(oFace, vSeqTimer_2);    end.of.loop(oFace, fLoopDone);    vSeqTimer_2 = 3;    }  if (isset(fLoopDone) && vSeqPhase_2 == 7)    {    reset(fLoopDone);    vSeqPhase_2 = 8;    set.cel(oFace, 0);    end.of.loop(oFace, fLoopDone);    }  if (isset(fLoopDone) && vSeqPhase_2 == 8)    {    reset(fLoopDone);    vSeqPhase_2 = 9;    vSeqTimer_2 = 0;    set.cel(oFace, 0);    }  }  [ at line 12, change Jerrod's expression again to a smirk[ with raised eyebrowsif (vSeqPhase_2 == 9 && vIntroTextLine == 12)  {  set.loop(oFace, 2);  set.cel(oFace, 0);  vSeqPhase_2 = 1;  cycle.time(oFace, vSeqPhase_2);  end.of.loop(oFace, fLoopDone);  vSeqPhase_2 = 10;  }  [ after the smirk, toss the hatif (isset(fLoopDone) && vSeqPhase_2 == 10)  {  reset(fLoopDone);  vSeqPhase_2 = 11;  set.cel(oFace, 0);  v230 = 2;  cycle.time(oBody, v230);  end.of.loop(oBody, fLoopDone);  }  [ after the hat toss, untie the tie and set the hat sailing[ across the screenif (isset(fLoopDone) && vSeqPhase_2 == 11)  {  reset(fLoopDone);  vHatSequence = 1;  draw(oHat);  [ send hat on first leg of the toss  move.obj(oHat, 81, 148, 5, fHatNext);    [ begin animation to untie the tie  set.view(oBody, vw.Unties);  set.loop(oBody, 0);  set.cel(oBody, 0);  end.of.loop(oBody, fLoopDone);    [ now Jerrod is wide-eyed and happy  set.loop(oFace, 3);  set.cel(oFace, 0);  start.cycling(oFace);  vSeqPhase_2 = 4;  cycle.time(oFace, vSeqPhase_2);  vSeqPhase_2 = 12;  }  [ once hat has reached the end of the toss, if (isset(fHatNext) &&     vHatSequence == 5 &&     vSeqPhase_2 == 12)  {  reset(fLoopDone);  reset(fHatNext);  vSeqPhase_2 = 13;  stop.update(oBody);    [begin fading out the photo frame  draw(oFrameFade1);  end.of.loop(oFrameFade1, fLoopDone);  draw(oFrameFade2);  end.of.loop(oFrameFade2, fLoopDone);  draw(oFrameFade3);  end.of.loop(oFrameFade3, fLoopDone);  draw(oFrameFade4);  end.of.loop(oFrameFade4, fLoopDone);  }  [ after photo frame is faded, add the framefade objects [ permanently to picture, and then erase the objectsif (isset(fLoopDone) && vSeqPhase_2 == 13)  {  reset(fLoopDone);  vSeqPhase_2 = 14;  add.to.pic(vw.FrameAnimations, 5, 3, 105, 147, 5, 5);  add.to.pic(vw.FrameAnimations, 5, 3, 105, 115, 5, 5);  add.to.pic(vw.FrameAnimations, 5, 3, 105, 83, 5, 5);  add.to.pic(vw.FrameAnimations, 5, 3, 105, 51, 5, 5);  erase(oFrameFade1);  erase(oFrameFade2);  erase(oFrameFade3);  erase(oFrameFade4);  [ now fade the background of the photo area to light blue  draw(oPhotoFade);  end.of.loop(oPhotoFade, fLoopDone);  }[ when both sequences are at step 14if (vSeqPhase_2 == 14 && vSequencePhase == 14)  {  [ redraw the room to get rid of the frame  draw.pic(currentRoom);  [ re-add the two banners at top and bottom  add.to.pic(vw.IntroBanners, 2, 0, 14, 12, 4, 4);  add.to.pic(vw.IntroBanners, 3, 0, 24, 167, 4, 4);    [ now animate the frame of Jerrod so it can move to center  [ of screen for next part of the introduction  draw(oMoveFrame);  show.pic();  [ the photo fade, face and body objects aren't needed  [ anymore  erase(oPhotoFade);  erase(oFace);  erase(oBody);  vSeqPhase_2 = 15;  }  [ at step 15 of phase-2, move Jerrod to the centerif (vSeqPhase_2 == 15)  {  [ advance the frame every two cycles  ++vSeqTimer_2;  if (vSeqTimer_2 == 2 && vFrameStep < 6)    {    vSeqTimer_2 = 0;    ++vFrameStep;    if (vFrameStep == 1)      {      TmpX = -4; [ 252;      TmpY = -18; [ 238;      reposition(oMoveFrame, TmpX, TmpY);      }    if (vFrameStep == 2)      {      TmpX = -18; [ 238;      TmpY = -11; [ 245;      reposition(oMoveFrame, TmpX, TmpY);      }    if (vFrameStep == 3)      {      TmpX = -17; [ 239;      TmpY = -1; [ 255;      reposition(oMoveFrame, TmpX, TmpY);      }    if (vFrameStep == 4)      {      TmpX = -22; [ 234;      TmpY = -1; [ 255;      reposition(oMoveFrame, TmpX, TmpY);      }    [ when last frame is shown    if (vFrameStep == 6)      {      [ ready to move to next room of the introduction      vSeqPhase_2 = 16;      }    [ adjust the cel to match the current frame step    set.cel.v(oMoveFrame, vFrameStep);    }  }  [ when at last step of phase-2if (vSeqPhase_2 == 16)  {  [ use a timer for a very short (3 cycle) pause  ++vSeqTimer_2;  if (vSeqTimer_2 == 3)    {    [ then advance to next room    new.room(rm.ExpandIntro); [ ##LE001##    }  }  [ sequences to move the hat across the screenif (isset(fHatNext) && vHatSequence == 1)  {  reset(fHatNext);  vHatSequence = 2;  move.obj(oHat, 55, 151, 5, fHatNext);  }if (isset(fHatNext) && vHatSequence == 2)  {  reset(fHatNext);  vHatSequence = 3;  move.obj(oHat, 19, 157, 5, fHatNext);  }if (isset(fHatNext) && vHatSequence == 3)  {  reset(fHatNext);  vHatSequence = 4;  move.obj(oHat, 0, 158, 5, fHatNext);  }if (isset(fHatNext) && vHatSequence == 4)  {  [ once hat object reaches the end, it isn't needed anymore  vHatSequence = 5;  erase(oHat);  [ update all objects so hat disappears right away  force.update(oHat);  [ view is no longer needed (not really necessary to   [ discard it, since there aren't any memory concerns, but  [ it doesn't hurt)  discard.view(vw.CityClothes);  }  [ always allow player to skip scene by pressing any keyif (have.key())  {  new.room(rm.MainSt); [ ##LE002##  }return();[ **************************************[ MESSAGES[ **************************************#message 1 "Jerrod Wilson"#message 2 "A young, ambitious city"#message 3 "slicker born and raised"#message 4 "in urban America. Quite"#message 5 "frankly, he's perfectly"#message 6 "prim and proper, caught"#message 7 "in the trap  of nine to"#message 8 "five.  Is this all life"#message 9 "has to offer? There has"#message 10 "to be more! This man is"#message 11 "ready for action! As of"#message 12 "this moment,  no longer"#message 13 "will he accept only..."#message 30 "                       "