[***********************************************************[[ rm.Title[[ After the player passes the copy protection test, the main[ title sequence begins. The title sequence includes an [ animation of the Sierra logo and name. The player can[ press any key to immediately cancel the title sequence and[ skip to the start of the game in Brooklyn.[[***********************************************************[ **************************************[ LOCAL DEFINES[ **************************************#define oLogo                        o1[ o2 is not used#define oSky2                        o3#define oSky3                        o4#define oSky4                        o5#define oSky5                        o6#define oSky6                        o7#define oSky1                        o8#define oTwinkle                     o9#define vSequenceTimer             v220#define vTmpVal                    v221#define vSequencePhase             v222#define vTwinkler                  v223#define fSequenceDone              f220  [ **************************************[ FIRST CYCLE ONLY[ **************************************if (isset(newRoom))  {  [ default animation interval is 2  animationInterval = 2;    [ set up keyboard input  set.key(0, 59, mnuHelp);           [ F1  set.key(0, 60, mnuToggleSound);    [ F2  set.key(0, 61, mnuEchoLine);       [ F3  set.key(0, 62, mnuToggleScore);    [ F4  set.key(0, 63, mnuSave);           [ F5  set.key(0, 64, mnuTime);           [ F6  set.key(0, 65, mnuRestore);        [ F7  set.key(0, 66, keyTrekMsgs);       [ F8  set.key(0, 67, mnuRestart);        [ F9  set.key(0, 68, mnuPause);          [ F10  set.key(3, 0, mnuCancelLine);      [ Ctrl+C  set.key(10, 0, mnuInitJoystick);   [ Ctrl+J  set.key(16, 0, keyShowPri);        [ Ctrl+P  set.key(18, 0, keyToggleMonitor);  [ Ctrl+R  set.key(0, 32, keyAltD);           [ Alt+D; unused - probably debug shortcut  set.key(14, 0, keyNextScene);      [ Ctrl+N  set.key(0, 31, keyShowCoords);     [ Alt+S  set.key(0, 44, mnuQuit);           [ Alt+Q  set.key(9, 0, mnuInventory);       [ Ctrl+I/TAB  set.key(27, 0, keyShowMenu);       [ ESC  set.key(1, 1, keyShowMenu);        [ joystick button A, single click  set.key(1, 2, mnuInventory);       [ joystick button B, single click  if (machineType == PCJR)    {    [ there are a few keycodes unique to PCJR; exact mapping    [ is not known    set.key(49, 0, mnuHelp);    set.key(50, 0, mnuToggleSound);    set.key(51, 0, mnuEchoLine);    set.key(52, 0, mnuToggleScore);    set.key(53, 0, mnuSave);    set.key(55, 0, mnuRestore);    set.key(56, 0, keyTrekMsgs);    set.key(57, 0, mnuRestart);    }    [ load and display title screen picture  load.pic(currentRoom);  load.view(vw.Titles);  draw.pic(currentRoom);    [ add the SIERRA graphic to screen; the 'sky chunk'  [ objects will initially cover it up, so it's not actually  [ visible at start, even though it's been added  add.to.pic(vw.Titles, 0, 1, 67, 119, 13, 13);    [ to make stars twinkle, we move a single pixel over the  [ existing star pixels at random  animate.obj(oTwinkle);  set.view(oTwinkle, vw.Titles);  set.loop(oTwinkle, 0);  set.cel(oTwinkle, 3);  set.priority(oTwinkle, 5);  stop.cycling(oTwinkle);  ignore.horizon(oTwinkle);    [ sky chunks, used to create the scrolling 'SIERRA' effect  [ uses oSky1, oSky2, oSky3, oSky4, oSky5, oSky6 - they are  [ positioned so that they cover up the 'SIERRA' graphic,  [ hiding it until they are moved  animate.obj(oSky1);  set.view(oSky1, vw.Titles);  set.loop(oSky1, 0);  set.cel(oSky1, 2);  set.priority(oSky1, 14);  position(oSky1, 67, 119);  draw(oSky1);  stop.cycling(oSky1);  [ chunk 2  animate.obj(oSky2);  set.view(oSky2, vw.Titles);  set.loop(oSky2, 0);  set.cel(oSky2, 2);  set.priority(oSky2, 14);  ignore.objs(oSky2);  position(oSky2, 79, 119);  draw(oSky2);  stop.cycling(oSky2);  [ chunk 3  animate.obj(oSky3);  set.view(oSky3, vw.Titles);  set.loop(oSky3, 0);  set.cel(oSky3, 2);  set.priority(oSky3, 14);  ignore.objs(oSky3);  position(oSky3, 91, 119);  draw(oSky3);  stop.cycling(oSky3);  [ chunk 4  animate.obj(oSky4);  set.view(oSky4, vw.Titles);  set.loop(oSky4, 0);  set.cel(oSky4, 2);  set.priority(oSky4, 14);  ignore.objs(oSky4);  position(oSky4, 103, 119);  draw(oSky4);  stop.cycling(oSky4);  [ chunk 5  animate.obj(oSky5);  set.view(oSky5, vw.Titles);  set.loop(oSky5, 0);  set.cel(oSky5, 2);  set.priority(oSky5, 14);  ignore.objs(oSky5);  position(oSky5, 115, 119);  draw(oSky5);  stop.cycling(oSky5);  [ chunk 6  animate.obj(oSky6);  set.view(oSky6, vw.Titles);  set.loop(oSky6, 0);  set.cel(oSky6, 2);  set.priority(oSky6, 14);  ignore.objs(oSky6);  position(oSky6, 127, 119);  draw(oSky6);  stop.cycling(oSky6);    [the Sierra Logo, rising like the moon!  animate.obj(oLogo);  set.view(oLogo, vw.Titles);  set.loop(oLogo, 0);  set.cel(oLogo, 0);  set.priority(oLogo, 13);  position(oLogo, 0, 167);  draw(oLogo);  stop.cycling(oLogo);    [ now show the picture  show.pic();    [ no player input during title scene  prevent.input();  lastChar = 0;  reset(haveMatch);    [ initialize sequence timer  vSequenceTimer = 1;  }[ change duration and location of twinkling star at random[ random chance of moving the twinklerandom(0, 3, vTwinkler);[ a one in four chanceif (vTwinkler == 0)  {  [ pick a random star position to twinkle  random(0, 8, vTwinkler);  erase(oTwinkle);  if (vTwinkler == 0)    {    position(oTwinkle, 1, 3);    }  if (vTwinkler == 1)    {    position(oTwinkle, 3, 34);    }  if (vTwinkler == 2)    {    position(oTwinkle, 1, 40);    }  if (vTwinkler == 3)    {    position(oTwinkle, 56, 0);    }  if (vTwinkler == 4)    {    position(oTwinkle, 47, 38);    }  if (vTwinkler == 5)    {    position(oTwinkle, 121, 0);    }  if (vTwinkler == 6)    {    position(oTwinkle, 151, 3);    }  if (vTwinkler == 7)    {    position(oTwinkle, 157, 9);    }  if (vTwinkler == 8)    {    position(oTwinkle, 149, 35);    }  draw(oTwinkle);  }[ increment the timer to control the animation effectsif (vSequenceTimer > 0)  {  ++vSequenceTimer;  [ if at max value  if (vSequenceTimer == 255)    {    [ increment another counter (this isn't used anywhere    [ though; perhaps they had a timer that needed more    [ than 255 counts at one time?)    ++vTmpVal;    [ then reset timer     vSequenceTimer = 0;    }  }  [ after two cycles in first phaseif (vSequencePhase == 0 && vSequenceTimer == 2)  {  [ the Sierra logo begins moving  vSequenceTimer = 0;  vSequencePhase = 1;  move.obj(oLogo, 39, 128, 2, fSequenceDone);  }  [ once logo has finished moving,if (isset(fSequenceDone) && vSequencePhase == 1)  {  [ begin sequence to show SIERRA graphic  reset(fSequenceDone);  vSequencePhase = 2;  [ add the 'and' graphic  add.to.pic(vw.Titles, 1, 0, 28, 92, 13, 13);    [ now start moving the first sky chunk; this will reveal  [ the SIERRA graphic in a 'wipe' effect  move.obj(oSky1, 130, 119, 2, fSequenceDone);  }  [ as the first chunk moves, get rid of the other chunks[ after first chunk passes over themif (posn(oSky1, 79, 119, 79, 119))  {  erase(oSky2);  }if (posn(oSky1, 91, 119, 91, 119))  {  erase(oSky3);  }if (posn(oSky1, 103, 119, 103, 119))  {  erase(oSky4);  }if (posn(oSky1, 115, 119, 115, 119))  {  erase(oSky5);  }if (posn(oSky1, 127, 119, 127, 119))  {  erase(oSky6);  }[ after SIERRA graphic is fully visibleif (isset(fSequenceDone) && vSequencePhase == 2)  {  [ move to next phase  reset(fSequenceDone);  vSequencePhase = 3;  [ the sky 'wipe' effect object no longer needed  erase(oSky1);  vSequenceTimer = 1;  }[ after waiting for 20 cycles after SIERRA is revealedif (vSequenceTimer == 20 && vSequencePhase == 3)  {  [ display the 'proud to present' banner  vSequenceTimer = 1;  vSequencePhase = 4;  add.to.pic(vw.Titles, 1, 1, 39, 167, 15, 15);  }[ after waiting another 50 cyclesif (vSequenceTimer == 50 && vSequencePhase == 4)  {  [ intro is over; go to next screen  new.room(rm.JerrodIntro); [ ##LE001##  }  [ if any key is pressedif (have.key())  {  [ skip rest of intro animation and go right to beginning  [ of game  new.room(rm.MainSt); [ ##LE002##  }return();[ **************************************[ MESSAGES[ **************************************