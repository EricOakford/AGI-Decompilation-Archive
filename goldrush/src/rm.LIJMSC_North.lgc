[***********************************************************[[ rm.LIJMSC_North [[ This is more like a cutscene; Jerrod goes here to watch[ the fields. Based on what Jerrod observes with the mud and[ growing grass, he needs to tell Captain Buddy when the[ wagons should head west.[[***********************************************************[ **************************************[ LOCAL DEFINES[ **************************************#define oGrass1                      o1#define oGrass2                      o2#define oGrass3                      o3#define oGrass4                      o4#define oGrass5                      o5#define oGrass6                      o6#define oGrass7                      o7#define oGrass8                      o8#define oGrass9                      o9#define oGrass10                    o10#define oGrass11                    o11#define oGrass12                    o12#define oGrass13                    o13#define oGrass14                    o14#define oGrass15                    o15#define oGrass16                    o16#define oGrass17                    o17#define oGrass18                    o18#define oGrass19                    o19#define oGrass20                    o20#define oGrass21                    o21#define vTmpY                      v220#define vRndNum                    v221#define vGrassTimer                v222#define vCycleTime                 v223#define fGrassGrown                f220[ **************************************[ FIRST CYCLE ONLY[ **************************************if (isset(newRoom))  {  [ cycle time for grass is quite long  vCycleTime = 45;    [ load main timing logic  load.logics(lgc.WagonTripTiming);    [ load picture for current room  load.pic(currentRoom);    [ load views used in the room  load.view(vw.JerrodCA);  [ (except sick Jerrod and dying Jerrod views aren't  [ actually used; they shouldn't be loaded if not being  [ used)  load.view(vw.SickJerrodCA);  load.view(vw.DyingJerrodCA);  load.view(vw.LIJMSCArt);    [ draw current room picture  draw.pic(currentRoom);    [ add grass/mud objects that will show the ground  [ transitioning from wet, muddy fields, to dry, young  [ grass to thick tall grass    [ grass 1  animate.obj(oGrass1);  set.view(oGrass1, vw.LIJMSCArt);  set.loop(oGrass1, 0);  position(oGrass1, 17, 120);  set.priority(oGrass1, 5);  stop.cycling(oGrass1);  cycle.time(oGrass1, vCycleTime);  [ grass 2  animate.obj(oGrass2);  set.view(oGrass2, vw.LIJMSCArt);  set.loop(oGrass2, 0);  position(oGrass2, 17, 98);  set.priority(oGrass2, 5);  stop.cycling(oGrass2);  cycle.time(oGrass2, vCycleTime);  [ grass 3  animate.obj(oGrass3);  set.view(oGrass3, vw.LIJMSCArt);  set.loop(oGrass3, 0);  position(oGrass3, 34, 100);  set.priority(oGrass3, 5);  stop.cycling(oGrass3);  cycle.time(oGrass3, vCycleTime);  [ grass 4  animate.obj(oGrass4);  set.view(oGrass4, vw.LIJMSCArt);  set.loop(oGrass4, 0);  position(oGrass4, 48, 123);  set.priority(oGrass4, 5);  stop.cycling(oGrass4);  cycle.time(oGrass4, vCycleTime);  [ grass 5  animate.obj(oGrass5);  set.view(oGrass5, vw.LIJMSCArt);  set.loop(oGrass5, 0);  position(oGrass5, 48, 100);  set.priority(oGrass5, 5);  stop.cycling(oGrass5);  cycle.time(oGrass5, vCycleTime);  [ grass 6  animate.obj(oGrass6);  set.view(oGrass6, vw.LIJMSCArt);  set.loop(oGrass6, 0);  position(oGrass6, 62, 100);  set.priority(oGrass6, 5);  stop.cycling(oGrass6);  cycle.time(oGrass6, vCycleTime);  [ grass 7  animate.obj(oGrass7);  set.view(oGrass7, vw.LIJMSCArt);  set.loop(oGrass7, 0);  position(oGrass7, 62, 123);  set.priority(oGrass7, 5);  stop.cycling(oGrass7);  cycle.time(oGrass7, vCycleTime);  [ grass 8  animate.obj(oGrass8);  set.view(oGrass8, vw.LIJMSCArt);  set.loop(oGrass8, 0);  position(oGrass8, 62, 146);  set.priority(oGrass8, 5);  stop.cycling(oGrass8);  cycle.time(oGrass8, vCycleTime);  [ grass 9  animate.obj(oGrass9);  set.view(oGrass9, vw.LIJMSCArt);  set.loop(oGrass9, 0);  position(oGrass9, 75, 146);  set.priority(oGrass9, 5);  stop.cycling(oGrass9);  cycle.time(oGrass9, vCycleTime);  [ grass 10  animate.obj(oGrass10);  set.view(oGrass10, vw.LIJMSCArt);  set.loop(oGrass10, 0);  position(oGrass10, 75, 123);  set.priority(oGrass10, 5);  stop.cycling(oGrass10);  cycle.time(oGrass10, vCycleTime);  [ grass 11  animate.obj(oGrass11);  set.view(oGrass11, vw.LIJMSCArt);  set.loop(oGrass11, 0);  position(oGrass11, 75, 100);  set.priority(oGrass11, 5);  stop.cycling(oGrass11);  cycle.time(oGrass11, vCycleTime);  [ grass 12  animate.obj(oGrass12);  set.view(oGrass12, vw.LIJMSCArt);  set.loop(oGrass12, 0);  position(oGrass12, 88, 100);  set.priority(oGrass12, 5);  stop.cycling(oGrass12);  cycle.time(oGrass12, vCycleTime);  [ grass 13  animate.obj(oGrass13);  set.view(oGrass13, vw.LIJMSCArt);  set.loop(oGrass13, 0);  position(oGrass13, 88, 123);  set.priority(oGrass13, 5);  stop.cycling(oGrass13);  cycle.time(oGrass13, vCycleTime);  [ grass 14  animate.obj(oGrass14);  set.view(oGrass14, vw.LIJMSCArt);  set.loop(oGrass14, 0);  position(oGrass14, 88, 146);  set.priority(oGrass14, 5);  stop.cycling(oGrass14);  cycle.time(oGrass14, vCycleTime);  [ grass 15  animate.obj(oGrass15);  set.view(oGrass15, vw.LIJMSCArt);  set.loop(oGrass15, 0);  position(oGrass15, 104, 146);  set.priority(oGrass15, 5);  stop.cycling(oGrass15);  cycle.time(oGrass15, vCycleTime);  [ grass 16  animate.obj(oGrass16);  set.view(oGrass16, vw.LIJMSCArt);  set.loop(oGrass16, 0);  position(oGrass16, 104, 123);  set.priority(oGrass16, 5);  stop.cycling(oGrass16);  cycle.time(oGrass16, vCycleTime);  [ grass 17  animate.obj(oGrass17);  set.view(oGrass17, vw.LIJMSCArt);  set.loop(oGrass17, 0);  position(oGrass17, 104, 100);  set.priority(oGrass17, 5);  stop.cycling(oGrass17);  cycle.time(oGrass17, vCycleTime);  [ grass 18  animate.obj(oGrass18);  set.view(oGrass18, vw.LIJMSCArt);  set.loop(oGrass18, 0);  position(oGrass18, 120, 100);  set.priority(oGrass18, 5);  stop.cycling(oGrass18);  cycle.time(oGrass18, vCycleTime);  [ grass 19  animate.obj(oGrass19);  set.view(oGrass19, vw.LIJMSCArt);  set.loop(oGrass19, 0);  position(oGrass19, 120, 123);  set.priority(oGrass19, 5);  stop.cycling(oGrass19);  cycle.time(oGrass19, vCycleTime);  [ grass 20  animate.obj(oGrass20);  set.view(oGrass20, vw.LIJMSCArt);  set.loop(oGrass20, 0);  position(oGrass20, 135, 103);  set.priority(oGrass20, 5);  stop.cycling(oGrass20);  cycle.time(oGrass20, vCycleTime);  [ grass 21  animate.obj(oGrass21);  set.view(oGrass21, vw.LIJMSCArt);  set.loop(oGrass21, 0);  position(oGrass21, 33, 123);  set.priority(oGrass21, 5);  stop.cycling(oGrass21);  cycle.time(oGrass21, vCycleTime);    [ if the current time is before earlist OK time  if (LeaveMinutes < BeginOkLeaveTime)    {    [ show mud    set.cel(oGrass1, 0);    set.cel(oGrass2, 0);    set.cel(oGrass3, 0);    set.cel(oGrass4, 0);    set.cel(oGrass5, 0);    set.cel(oGrass6, 0);    set.cel(oGrass7, 0);    set.cel(oGrass8, 0);    set.cel(oGrass9, 0);    set.cel(oGrass10, 0);    set.cel(oGrass11, 0);    set.cel(oGrass12, 0);    set.cel(oGrass13, 0);    set.cel(oGrass14, 0);    set.cel(oGrass15, 0);    set.cel(oGrass16, 0);    set.cel(oGrass17, 0);    set.cel(oGrass18, 0);    set.cel(oGrass19, 0);    set.cel(oGrass20, 0);    set.cel(oGrass21, 0);    }      [ if leave time is less than 30 seconds past beginning of  [ the ok window for leaving Missouri  if (LeaveMinutes == BeginOkLeaveTime &&       LeaveSeconds < 30)    {    [ still just mud    set.cel(oGrass1, 0);    set.cel(oGrass2, 0);    set.cel(oGrass3, 0);    set.cel(oGrass4, 0);    set.cel(oGrass5, 0);    set.cel(oGrass6, 0);    set.cel(oGrass7, 0);    set.cel(oGrass8, 0);    set.cel(oGrass9, 0);    set.cel(oGrass10, 0);    set.cel(oGrass11, 0);    set.cel(oGrass12, 0);    set.cel(oGrass13, 0);    set.cel(oGrass14, 0);    set.cel(oGrass15, 0);    set.cel(oGrass16, 0);    set.cel(oGrass17, 0);    set.cel(oGrass18, 0);    set.cel(oGrass19, 0);    set.cel(oGrass20, 0);    set.cel(oGrass21, 0);    }      [ if leave time is more than 30 seconds past beginning of  [ the ok window for leaving Missouri  if (LeaveMinutes == BeginOkLeaveTime &&       LeaveSeconds > 29)    {    [ show spots of early green grass    set.cel(oGrass1, 1);    set.cel(oGrass2, 1);    set.cel(oGrass3, 1);    set.cel(oGrass4, 1);    set.cel(oGrass5, 1);    set.cel(oGrass6, 1);    set.cel(oGrass7, 1);    set.cel(oGrass8, 1);    set.cel(oGrass9, 1);    set.cel(oGrass10, 1);    set.cel(oGrass11, 1);    set.cel(oGrass12, 1);    set.cel(oGrass13, 1);    set.cel(oGrass14, 1);    set.cel(oGrass15, 1);    set.cel(oGrass16, 1);    set.cel(oGrass17, 1);    set.cel(oGrass18, 1);    set.cel(oGrass19, 1);    set.cel(oGrass20, 1);    set.cel(oGrass21, 1);    }    [ if leave time is less than 30 seconds past last minute  [ of the ok window for leaving Missouri  if (LeaveMinutes == EndOkLeaveTime &&       LeaveSeconds < 30)    {    [ mud is gone, grass not too tall    set.cel(oGrass1, 2);    set.cel(oGrass2, 2);    set.cel(oGrass3, 2);    set.cel(oGrass4, 2);    set.cel(oGrass5, 2);    set.cel(oGrass6, 2);    set.cel(oGrass7, 2);    set.cel(oGrass8, 2);    set.cel(oGrass9, 2);    set.cel(oGrass10, 2);    set.cel(oGrass11, 2);    set.cel(oGrass12, 2);    set.cel(oGrass13, 2);    set.cel(oGrass14, 2);    set.cel(oGrass15, 2);    set.cel(oGrass16, 2);    set.cel(oGrass17, 2);    set.cel(oGrass18, 2);    set.cel(oGrass19, 2);    set.cel(oGrass20, 2);    set.cel(oGrass21, 2);    }      [ if leave time is more than 30 seconds past last minute  [ of the ok window for leaving Missouri  if (LeaveMinutes == EndOkLeaveTime &&       LeaveSeconds > 29)    {    [ lot of tall grass; Jerrod doesn't have much time to    [ leave    set.cel(oGrass1, 3);    set.cel(oGrass2, 3);    set.cel(oGrass3, 3);    set.cel(oGrass4, 3);    set.cel(oGrass5, 3);    set.cel(oGrass6, 3);    set.cel(oGrass7, 3);    set.cel(oGrass8, 3);    set.cel(oGrass9, 3);    set.cel(oGrass10, 3);    set.cel(oGrass11, 3);    set.cel(oGrass12, 3);    set.cel(oGrass13, 3);    set.cel(oGrass14, 3);    set.cel(oGrass15, 3);    set.cel(oGrass16, 3);    set.cel(oGrass17, 3);    set.cel(oGrass18, 3);    set.cel(oGrass19, 3);    set.cel(oGrass20, 3);    set.cel(oGrass21, 3);    }      [ if past ok window to leave  if (LeaveMinutes > EndOkLeaveTime)    {    [ show tall grass    set.cel(oGrass1, 3);    set.cel(oGrass2, 3);    set.cel(oGrass3, 3);    set.cel(oGrass4, 3);    set.cel(oGrass5, 3);    set.cel(oGrass6, 3);    set.cel(oGrass7, 3);    set.cel(oGrass8, 3);    set.cel(oGrass9, 3);    set.cel(oGrass10, 3);    set.cel(oGrass11, 3);    set.cel(oGrass12, 3);    set.cel(oGrass13, 3);    set.cel(oGrass14, 3);    set.cel(oGrass15, 3);    set.cel(oGrass16, 3);    set.cel(oGrass17, 3);    set.cel(oGrass18, 3);    set.cel(oGrass19, 3);    set.cel(oGrass20, 3);    set.cel(oGrass21, 3);    }      [ now add all 21 objects to the screen  draw(oGrass1);  draw(oGrass2);  draw(oGrass3);  draw(oGrass4);  draw(oGrass5);  draw(oGrass6);  draw(oGrass7);  draw(oGrass8);  draw(oGrass9);  draw(oGrass10);  draw(oGrass11);  draw(oGrass12);  draw(oGrass13);  draw(oGrass14);  draw(oGrass15);  draw(oGrass16);  draw(oGrass17);  draw(oGrass18);  draw(oGrass19);  draw(oGrass20);  draw(oGrass21);    [ add Jerrod, with California attire  animate.obj(ego);  set.view(ego, vw.JerrodCA);  draw(ego);    [ now show the picture  show.pic();    [ restrict Jerrod to bottom ten pixels of the screen  block(0, 157, 159, 167);  }  [ **************************************[ EVERY CYCLE[ **************************************[ if in the window of time that it's ok to leave Missouri if ((LeaveMinutes == BeginOkLeaveTime ||     LeaveMinutes == EndOkLeaveTime))  {  [ the grass begins to grow - every five cycles choose a  [ random grass object to start cycling    [ increment timer  ++vGrassTimer;  [ after 5 cycles  if (vGrassTimer == 5)    {    [ reset timer    vGrassTimer = 0;    [ pick a random grass object    random(1, 21, vRndNum);    if (vRndNum == 1)      {      end.of.loop(oGrass1, fGrassGrown);      }    if (vRndNum == 2)      {      end.of.loop(oGrass2, fGrassGrown);      }    if (vRndNum == 3)      {      end.of.loop(oGrass3, fGrassGrown);      }    if (vRndNum == 4)      {      end.of.loop(oGrass4, fGrassGrown);      }    if (vRndNum == 5)      {      end.of.loop(oGrass5, fGrassGrown);      }    if (vRndNum == 6)      {      end.of.loop(oGrass6, fGrassGrown);      }    if (vRndNum == 7)      {      end.of.loop(oGrass7, fGrassGrown);      }    if (vRndNum == 8)      {      end.of.loop(oGrass8, fGrassGrown);      }    if (vRndNum == 9)      {      end.of.loop(oGrass9, fGrassGrown);      }    if (vRndNum == 10)      {      end.of.loop(oGrass10, fGrassGrown);      }    if (vRndNum == 11)      {      end.of.loop(oGrass11, fGrassGrown);      }    if (vRndNum == 12)      {      end.of.loop(oGrass12, fGrassGrown);      }    if (vRndNum == 13)      {      end.of.loop(oGrass13, fGrassGrown);      }    if (vRndNum == 14)      {      end.of.loop(oGrass14, fGrassGrown);      }    if (vRndNum == 15)      {      end.of.loop(oGrass15, fGrassGrown);      }    if (vRndNum == 16)      {      end.of.loop(oGrass16, fGrassGrown);      }    if (vRndNum == 17)      {      end.of.loop(oGrass17, fGrassGrown);      }    if (vRndNum == 18)      {      end.of.loop(oGrass18, fGrassGrown);      }    if (vRndNum == 19)      {      end.of.loop(oGrass19, fGrassGrown);      }    if (vRndNum == 20)      {      end.of.loop(oGrass20, fGrassGrown);      }    if (vRndNum == 21)      {      end.of.loop(oGrass21, fGrassGrown);      }    }  }  [ **************************************[ CHECK FOR AN EXIT CONDITION[ **************************************[ if Jerrod is at bottom of room   if (posn(ego, 0, 166, 159, 166))  {  [ adjust position so ego object will be in correct  [ location in new room    [ y value is always 67  vTmpY = 67;    if (previousRoom == rm.LIJMSC_West)    {    if (EgoX < 2)      {      EgoX = 2;      }    if (EgoX < 38)      {      position.v(ego, EgoX, vTmpY);      }    if (EgoX > 37 && EgoX < 68)      {      position(ego, 37, 67);      }    if (EgoX > 67 && EgoX < 96)      {      position(ego, 96, 67);      }    if (EgoX > 95)      {      position.v(ego, EgoX, vTmpY);      }    }  if (previousRoom == rm.LIJMSC_East)    {    if (EgoX < 79)      {      position.v(ego, EgoX, vTmpY);      }    if (EgoX > 78 && EgoX < 101)      {      position(ego, 78, 67);      }    if (EgoX > 100 && EgoX < 160)      {      position(ego, 123, 67);      }    }  [ go back to previous room  new.room.v(previousRoom);  }  [ **************************************[ PROCESS PLAYER INPUT[ **************************************[ if player hasn't provided input no need to do said testsif (!isset(haveInput))  {  goto(Done);  }  [ look/look aroundif ((said("examine", "around") ||     said("examine", "camp") ||     said("examine")))  {  print("You are on the edge of camp overlooking the plains.");  }  [ look plains/look grassif ((said("examine", "plain") ||     said("examine", "field") ||     said("examine", "grass") ||     said("examine", "pasture") ||     said("examine", "west") ||     said("examine", "mud") ||     said("examine", "valley") ||     said("examine", "north") ||     said("examine", "west") ||     said("examine", "east") ||     said("examine", "scene")))  {  [ reponse depends on time    [ too early  if (LeaveMinutes < BeginOkLeaveTime)    {    print("The plains are still brown and muddy from the cold, wet winter.  "          "There is very little grass.");    }      [ ok to go  if ((LeaveMinutes == BeginOkLeaveTime ||       LeaveMinutes == EndOkLeaveTime))    {    print("Your keen eye has noticed that the plains are growing greener every "          "day.  The mud is beginning to dry.");    }      [ too late  if (LeaveMinutes > EndOkLeaveTime)    {    print("The plains are covered with fully grown, beautiful, green grass.");    }  }  [ look riverif ((said("examine", "creek") || said("examine", "water")))  {  print("In the distance you see the Missouri River.");  }  [ look treeif (said("examine", "forest"))  {  print("These trees are identical to the rest of the trees in the area.");  }  [ look groundif ((said("examine", "dirt") || said("examine", "down")))  {  print("You are standing on Independence ground!");  }  [ look tentif (said("examine", "tent"))  {  print("There will be many more just like these!");  }  [ go in tent/ go in wagonif ((said("enter", "tent") ||     said("enter", "cart") ||     said("crawl", "tent") ||     said("climb", "tent") ||     said("crawl", "cart") ||     said("climb", "cart")))  {  print("You'll spend plenty of time in a %w2 once you are on the trail.  No "        "need to do that now!!");  }  [ go to sleepif ((said("sleep") ||     said("sleep", "bed") ||     said("sleep", "in", "bed") ||     said("go", "sleep") ||     said("acquire", "sleep") ||     said("lay", "down") ||     said("lay", "down", "sleep") ||     said("lay", "down", "bed") ||     said("lay", "down", "in", "bed") ||     said("lay", "bed") ||     said("lay", "in", "bed") ||     said("use", "bed") ||     said("go", "bed") ||     said("enter", "bed") ||     said("nap") ||     said("acquire", "nap") ||     said("sleep", "tent") ||     said("sleep", "in", "tent") ||     said("sleep", "cart") ||     said("sleep", "in", "cart") ||     said("lay", "down", "tent") ||     said("lay", "down", "in", "tent") ||     said("lay", "down", "cart") ||     said("lay", "down", "in", "cart")))  {  print("You're having the adventure of a lifetime; there's no time for that!");  }  [ get tent/buy tentif ((said("buy", "tent") ||     said("acquire", "tent") ||     said("buy", "cart") ||     said("acquire", "cart")))  {  print("You can't do that; they are company property!");  }  Done:[ call main timing logiccall(lgc.WagonTripTiming);return();[ **************************************[ MESSAGES[ **************************************#message 1 "You are on the edge of camp overlooking the plains."#message 2 "In the distance you see the Missouri River."#message 3 "These trees are identical to the rest of the trees in the area."#message 4 "The plains are still brown and muddy from the cold, wet winter.  There is very little grass."#message 6 "You are standing on Independence ground!"#message 7 "There will be many more just like these!"#message 10 "Your keen eye has noticed that the plains are growing greener every day.  The mud is beginning to dry."#message 12 "The plains are covered with fully grown, beautiful, green grass."#message 84 "You'll spend plenty of time in a %w2 once you are on the trail.  No need to do that now!!"#message 91 "You're having the adventure of a lifetime; there's no time for that!"#message 92 "You can't do that; they are company property!"