[***********************************************************[[ rm.LIJMSC_East [[ This is the eest side of the Long Island Joint Mining and[ Stock Company camp. Jerrod can get the Bible from the man[ who is sitting by the fire reading. [[***********************************************************[ **************************************[ LOCAL DEFINES[ **************************************#define oReader                      o1#define oCampfire                    o2[ o3 is not used#define oWoodCutter                  o4#define vCholeraTime2               v79 [ override ScurvyTime[ no idea why they didn't use the existing global timepoint[ variable to check for cholera#define vTmpY                      v220#define vTmpX                      v221#define vRndNum                    v222#define vChopStatus                v223#define vChopCount                 v224#define vChopCel                   v225#define fChopped                   f220#define fTurnPage                  f221#define fSndDone                   f222[ **************************************[ FIRST CYCLE ONLY[ **************************************if (isset(newRoom))  {  [ load the main timing logic  load.logics(lgc.WagonTripTiming);    [ load current room picture  load.pic(currentRoom);    [ load views used in the room  load.view(vw.JerrodCA);  load.view(vw.SickJerrodCA);  load.view(vw.DyingJerrodCA);  load.view(vw.LIJMSCArt);    [ load the only sound used in the room  load.sound(s.AddToScore);    [ draw the current room picture  draw.pic(currentRoom);    [ add sleeping man with head sticking out of tent  add.to.pic(vw.LIJMSCArt, 1, 3, 47, 73, 0, 0);  [ add the woodpile  add.to.pic(vw.LIJMSCArt, 1, 4, 111, 130, 0, 0);    [ wood cutter  animate.obj(oWoodCutter);  set.view(oWoodCutter, vw.LIJMSCArt);  set.loop(oWoodCutter, 9);  set.cel(oWoodCutter, 0);  position(oWoodCutter, 97, 130);  ignore.blocks(oWoodCutter);  draw(oWoodCutter);  stop.cycling(oWoodCutter);  vTmpX = 2;  cycle.time(oWoodCutter, vTmpX);    [ campfire  animate.obj(oCampfire);  set.view(oCampfire, vw.LIJMSCArt);  set.loop(oCampfire, 2);  position(oCampfire, 49, 109);  ignore.blocks(oCampfire);  draw(oCampfire);    [ if Jerrod doesn't have the Bible yet  if (!has("Bible"))    {    [ reading man is sitting near tree to the left    animate.obj(oReader);    set.view(oReader, vw.LIJMSCArt);    set.loop(oReader, 8);    set.cel(oReader, 0);    position(oReader, 24, 110);    ignore.blocks(oReader);    draw(oReader);    [ stop cycling for now    stop.cycling(oReader);    }  else    {    [ add the reading man as background art    add.to.pic(vw.LIJMSCArt, 1, 5, 24, 110, 0, 0);    }      [ add Jerrod, in California attire  animate.obj(ego);  [ if time for Jerrod to get cholera  if (CurrentTripTime == vCholeraTime2)    {    [ use sick view    set.view(ego, vw.SickJerrodCA);    }  else    {    [ if not sick, use normal view    set.view(ego, vw.JerrodCA);    }  draw(ego);    [ now show the picture  show.pic();  }  [ **************************************[ EVERY CYCLE[ **************************************[ if Jerrod doesn't have the Bibleif (!has("Bible"))  {  [ random chance reading man turns a page  random(0, 100, vRndNum);  [ 5 in 100 chance  if (vRndNum < 5)    {    [ restart at first cel    set.cel(oReader, 0);    [ cycle loop one time    end.of.loop(oReader, fTurnPage);    }  }  [ if woodcutter is not choppingif (vChopStatus != 100)  {  [ random chance he starts chopping  random(0, 49, vChopStatus);  }[ one in 50 chanceif (vChopStatus == 30)  {  [ set status to show he's chopping  vChopStatus = 100;  [ start at first cel  set.cel(oWoodCutter, 0);  [ cycle one time  end.of.loop(oWoodCutter, fChopped);  [ reset count  vChopCount = 1;  }  [ when chopping loop reaches end and not at max countif (isset(fChopped) && vChopCount < 6)  {  [ reset the flag  reset(fChopped);  [ get current cel  current.cel(oWoodCutter, vChopCel);  [ if at start  if (vChopCel == 0)    {    [ cycle to end    end.of.loop(oWoodCutter, fChopped);    }  [ if at end  if (vChopCel == 3)    {    [ cycle back to start     reverse.loop(oWoodCutter, fChopped);    }  [ increment count  ++vChopCount;  }  [ when six cycles of chopping are doneif (isset(fChopped) && vChopCount == 6)  {  [ reset the flag  reset(fChopped);  [ reset count  vChopCount = 0;  [ increment status so randomizer can determine when to  [ start again  ++vChopStatus;  }  [ **************************************[ CHECK FOR AN EXIT CONDITION[ **************************************[ the camp wraps around in only two rooms; so going to[ left or right will take Jerrod to the west side of camp[ if near top of roomif (posn(ego, 0, 66, 159, 66))  {  [ adjust position so Jerrod shows up in correct spot in  [ new room  vTmpY = 165;  position.v(ego, EgoX, vTmpY);  new.room(rm.LIJMSC_North); [ ##LE001##  }  [ if near right edge of screenif (posn(ego, 152, 67, 152, 167))  {  [ adjust position so Jerrod will show in correct position  [ in west side of camp  vTmpX = 2;  position.v(ego, vTmpX, EgoY);  [ now go to west side of camp  new.room(rm.LIJMSC_West); [ ##LE002##  }  [ if Jerrod touches left edgeif (edgeEgoHit == LEFT_EDGE)  {  [ go to west side of camp  new.room(rm.LIJMSC_West); [ ##LE003##  }  [ if near bottom, and looking for team of animalsif (posn(ego, 0, 166, 159, 166) && CaptainBuddyStatus == 2)  {  [ adjust position so Jerrod shows up in correct position  [ in the corral  vTmpY = 165;  if (EgoX < 47)    {    EgoX = 47;    }  position.v(ego, EgoX, vTmpY);  [ change to 'up' loop  set.loop(ego, 3);  [ and set direction to UP  egoDir = UP;  [ now go to the corral  new.room(rm.LIJMSC_Corral); [ ##LE004##  }[ **************************************[ PROCESS PLAYER INPUT[ **************************************[ if player hasn't provided input no need to do said testsif (!isset(haveInput))  {  goto(Done);  }  [ talk to manif ((said("speak", "boy") || said("speak")))  {  [ if near one of the men  if ((posn(ego, 15, 98, 38, 116) ||       posn(ego, 38, 67, 55, 78) ||       posn(ego, 91, 116, 113, 135)))    {    [ if near reading man    if (posn(ego, 15, 98, 38, 116))      {      [ if Jerrod has the Bible      if (has("Bible"))        {        print.at("The man says, \"We better enjoy this relaxing setting while "                 "it lasts. Once we are on the trail things will be "                 "different!\"", 2, 5, 0);        }      else        {        [ reading man decides to give Bible to Jerrod        print.at("The man reading the book says, \"It is a beautiful day to "                 "just relax and read a good book.\"", 2, 5, 0);        print.at("\"The going will be tough in a few weeks so I'm enjoying "                 "every moment of this easy life!\"", 2, 5, 0);        print.at("The man continues, \"Since we'll be traveling together, I'd "                 "like to give you something. Here, take this book. I'd like "                 "you to have it.\"", 2, 5, 0);        print("You graciously receive it and say, \"Thank You.\"");        [ get the Bible        get("Bible");        [ score five points        currentScore  += 5;        [play sound        sound(s.AddToScore, fSndDone);        [ replace object with background image        add.to.pic(vw.LIJMSCArt, 1, 5, 24, 110, 0, 0);        erase(oReader);        }      }          [ if near sleeping man    if (posn(ego, 38, 67, 55, 78))      {      print("If this man were conscious, he just might talk back!");      }          [ if near woodcutter    if (posn(ego, 91, 116, 113, 135))      {      print("This man is out of breath from chopping wood.");      }    }  else    {    print("You are not close enough to talk to anyone.");    }  }  [ look Bibleif ((said("examine", "bible") ||     said("examine", "book")))  {  [ if near the reading man  if (posn(ego, 15, 98, 38, 116))    {    [ if Jerrod doesn't have the Bible    if (!has("Bible"))      {      print("It is average in size with a black cover and the pages are edged "            "with gold. It appears to be slightly worn out.");      }    }  else    {    [ if not by the reading man, and Jerrod doesn't have the    [ Bible    if (!has("Bible"))      {      print("You can't do that from here.");      }    }  }  [ take Bibleif ((said("acquire", "bible") ||     said("acquire", "book") ||     said("ask", "bible") ||     said("ask", "book") ||     said("ask", "boy", "book") ||     said("ask", "boy", "bible") ||     said("ask", "boy", "read", "book") ||     said("ask", "boy", "read", "bible") ||     said("ask", "read", "bible") ||     said("ask", "read", "book")))  {  [ if near the reading man  if (posn(ego, 15, 98, 38, 116))    {    [ if Jerrod already has it    if (has("Bible"))      {      print("You already have a Bible and you don't see another one.");      }    else      {      [ reading man gives the Bible to Jerrod      print.at("The man reading the book says, \"It is a beautiful day to just "               "relax and read a good book.\"", 2, 5, 0);      print.at("\"The going will be tough in a few weeks so I'm enjoying every "               "moment of this easy life!\"", 2, 5, 0);      print.at("The man continues, \"Since we'll be traveling together, I'd "               "like to give you something. Here, take this book. I'd like you "               "to have it.\"", 2, 5, 0);      print("You graciously receive it and say, \"Thank You.\"");      [ get five points      get("Bible");      [ score five points      currentScore  += 5;      [ play sound      sound(s.AddToScore, fSndDone);      [ replace object with background image      add.to.pic(vw.LIJMSCArt, 1, 5, 24, 110, 0, 0);      erase(oReader);      }    }  else    {    [ not near reading man        [ if Jerrod has the Bible    if (has("Bible"))      {      print("You already have a Bible and you don't see another one.");      }    else      {      print("You can't do that from here.");      }    }  }  [ look manif (said("examine", "boy"))  {  [ if near any of the three men  if ((posn(ego, 6, 99, 43, 121) ||       posn(ego, 83, 110, 117, 141) ||       posn(ego, 31, 60, 62, 83)))    {    [ if near the reading man    if (posn(ego, 6, 99, 43, 121))      {      [ if Jerrod has the Bible      if (has("Bible"))        {        print("He is just enjoying a beautiful day under the tree!");        }      else        {        print("This man is reading a book.");        }      }        [ if near the woodcutter    if (posn(ego, 83, 110, 117, 141))      {      print("Sweat runs down this man's face as he splits wood for the fire.");      }          [ if near the sleeping man    if (posn(ego, 31, 60, 62, 83))      {      print("This man is sawing logs of another kind!");      }    }  else    {    print("There are three people around here. There is a man sleeping in the "          "tent, a man relaxing under a tree and a man working hard with an ax.");    }  }  [ look/look aroundif ((said("examine", "around") ||     said("examine", "camp") ||     said("examine")))  {  print("This is the camp of the \"Long Island Joint Mining and Stock "        "Company.\" From the north edge of camp there is a great view of the "        "Missouri River and the plains.");  }  [ look wagonif (said("examine", "cart"))  {  print("These are the wagons you and your company will be taking on your "        "journey to California!");  }  [ look tentif (said("examine", "tent"))  {  print("Tents are the most common dwelling place on the frontier.");  }  [ look treeif (said("examine", "forest"))  {  print("This is just another tree around camp.");  }  [ look logif (said("examine", "log"))  {  print("There are logs lying all over. These are just a few of them.");  }  [ look fireif ((said("examine", "fire") ||     said("examine", "campfire") ||     said("examine", "camp", "fire")))  {  print("Every camp needs a campfire!");  }  [ look axif (said("examine", "ax"))  {  print("There is a man swinging an ax.");  }  [ take axif (said("acquire", "ax"))  {  print("The ax is not yours.");  }  [ look barrelif (said("examine", "barrel"))  {  print("The barrels are used for resting weary bones by the campfire.");  }  [ smell baconif (said("smell", "bacon"))  {  print("You detect the faint smell of roasting pig.");  }  [ sit downif ((said("sit") ||     said("sit", "down") ||     said("sit", "log") ||     said("sit", "down", "log") ||     said("sit", "barrel") ||     said("sit", "down", "barrel")))  {  print("Sitting down won't do you any good.");  }  [ look stumpif (said("examine", "stump"))  {  print("The man is attempting to chop the stump into firewood.");  }  [ look wood/look firewoodif ((said("examine", "beam") ||     said("examine", "firewood")))  {  print("The man is creating a stack of firewood.");  }  [ read Bibleif ((said("read", "bible") ||     said("read", "book")))  {  [ if Jerrod doesn't have the Bible  if (!has("Bible"))    {    print("You can't read the %w2 if you don't have it!");    }  }  [ take woodif ((said("acquire", "beam") ||     said("acquire", "firewood")))  {  print("Just leave it there. It will help the woodchopper think he is getting "        "something done.");  }  [ get in tentif ((said("enter", "tent") ||     said("crawl", "tent") ||     said("climb", "tent")))  {  print("You'll spend plenty of time in a tent once you are on the trail. No "        "need to do that now.");  }  [ get in wagonif ((said("enter", "cart") ||     said("crawl", "cart") ||     said("climb", "cart")))  {  print("You'll spend plenty of time in a wagon once you are on the trail. No "        "need to do that now.");  }  [ look grassif ((said("examine", "grass") ||     said("examine", "dirt") ||     said("examine", "down")))  {  print("This kind of grass is all over Independence.");  }  [ get fireif ((said("acquire", "fire") ||     said("acquire", "campfire") ||     said("acquire", "camp", "fire")))  {  print("How, or why, would you do that?");  }  [ go to sleep/take a napif ((said("sleep") ||     said("sleep", "bed") ||     said("sleep", "in", "bed") ||     said("go", "sleep") ||     said("acquire", "sleep") ||     said("lay", "down") ||     said("lay", "down", "sleep") ||     said("lay", "down", "bed") ||     said("lay", "down", "in", "bed") ||     said("lay", "bed") ||     said("lay", "in", "bed") ||     said("use", "bed") ||     said("go", "bed") ||     said("enter", "bed") ||     said("nap") ||     said("acquire", "nap") ||     said("sleep", "tent") ||     said("sleep", "in", "tent") ||     said("sleep", "cart") ||     said("sleep", "in", "cart") ||     said("lay", "down", "tent") ||     said("lay", "down", "in", "tent") ||     said("lay", "down", "cart") ||     said("lay", "down", "in", "cart")))  {  print("You're having the adventure of a lifetime; there's no time for that!");  }  [ get tentif ((said("buy", "tent") ||     said("acquire", "tent") ||     said("buy", "cart") ||     said("acquire", "cart")))  {  print("You can't do that; they are company property!");  }  [ look plainsif (said("examine", "plain"))  {  print("There is a great view of the plains from the north edge of camp.");  }Done:[ call main timing logiccall(lgc.WagonTripTiming);return();[ **************************************[ MESSAGES[ **************************************#message 1 "The man reading the book says, \"It is a beautiful day to just relax and read a good book.\""#message 2 "The man says, \"We better enjoy this relaxing setting while it lasts. Once we are on the trail things will be different!\""#message 3 "If this man were conscious, he just might talk back!"#message 4 "This man is out of breath from chopping wood."#message 5 "You are not close enough to talk to anyone."#message 6 "It is average in size with a black cover and the pages are edged with gold. It appears to be slightly worn out."#message 7 "You can't do that from here."#message 8 "You already have a Bible and you don't see another one."#message 9 "\"The going will be tough in a few weeks so I'm enjoying every moment of this easy life!\""#message 10 "You graciously receive it and say, \"Thank You.\""#message 11 "There are three people around here. There is a man sleeping in the tent, a man relaxing under a tree and a man working hard with an ax."#message 12 "This man is reading a book."#message 13 "Sweat runs down this man's face as he splits wood for the fire."#message 14 "This man is sawing logs of another kind!"#message 15 "He is just enjoying a beautiful day under the tree!"#message 16 "This is the camp of the \"Long Island Joint Mining and Stock Company.\" From the north edge of camp there is a great view of the Missouri River and the plains."#message 17 "These are the wagons you and your company will be taking on your journey to California!"#message 18 "Tents are the most common dwelling place on the frontier."#message 19 "This is just another tree around camp."#message 20 "There are logs lying all over. These are just a few of them."#message 21 "Every camp needs a campfire!"#message 22 "There is a man swinging an ax."#message 23 "The ax is not yours."#message 24 "The barrels are used for resting weary bones by the campfire."#message 25 "You detect the faint smell of roasting pig."#message 26 "Sitting down won't do you any good."#message 27 "The man is attempting to chop the stump into firewood."#message 28 "The man is creating a stack of firewood."#message 29 "Just leave it there. It will help the woodchopper think he is getting something done."#message 30 "You can't read the %w2 if you don't have it!"#message 31 "You'll spend plenty of time in a tent once you are on the trail. No need to do that now."#message 32 "This kind of grass is all over Independence."#message 33 "How, or why, would you do that?"#message 34 "The man continues, \"Since we'll be traveling together, I'd like to give you something. Here, take this book. I'd like you to have it.\""#message 35 "You'll spend plenty of time in a wagon once you are on the trail. No need to do that now."#message 91 "You're having the adventure of a lifetime; there's no time for that!"#message 92 "You can't do that; they are company property!"#message 93 "There is a great view of the plains from the north edge of camp."