[***********************************************************[[ cs.ChagresRiver[[ This room shows the small boat with passengers going up [ the Chagres River. The ego object is not used, but the[ player can use the input line to interact with the scene[ while it plays out.[[***********************************************************[ **************************************[ LOCAL DEFINES[ **************************************#define oBoat                        o1#define oGuide                       o2#define vTmpVal                    v220#define vBoatStatus                v221#define fBoatMoved                 f220#define fGuideMoved                f221[ **************************************[ FIRST CYCLE ONLY[ **************************************if (isset(newRoom))  {  [ load the main timing logic  load.logics(lgc.PanamaTripTiming);    [ load the room picture  load.pic(currentRoom);  [ load view with the small boat loop  load.view(vw.JungleArt_1);  [ draw the picture  draw.pic(currentRoom);    [ animate the small boat  animate.obj(oBoat);  set.view(oBoat, vw.JungleArt_1);  set.loop(oBoat, 0);  fix.loop(oBoat);  set.priority(oBoat, 9);  position(oBoat, 0, 119);  draw(oBoat);  [ move boat to first point along the path  move.obj(oBoat, 83, 119, 1, fBoatMoved);  [ set status to beginning of sequence  vBoatStatus = 1;  vTmpVal = 2;  step.time(oBoat, vTmpVal);    [ animate the guide using pole to push boat  animate.obj(oGuide);  set.view(oGuide, vw.JungleArt_1);  set.loop(oGuide, 1);  fix.loop(oGuide);  set.priority(oGuide, 10);  [ put guide at front of boat  position(oGuide, 22, 120);  draw(oGuide);  [ move him in synch with the boat  move.obj(oGuide, 105, 120, 1, fGuideMoved);  step.time(oGuide, vTmpVal);  cycle.time(oGuide, vTmpVal);    [ now show the picture  show.pic();  }  [ **************************************[ EVERY CYCLE[ **************************************[ if boat has reached first pointif (isset(fBoatMoved) && vBoatStatus == 1)  {  [ move boat and guide to second point  reset(fBoatMoved);  vBoatStatus = 2;  move.obj(oBoat, 114, 112, 1, fBoatMoved);  move.obj(oGuide, 136, 113, 1, fGuideMoved);  }  [ if boat has reached second pointif (isset(fBoatMoved) && vBoatStatus == 2)  {  [ done with the scene; set flag to move to next step in  [ the journey  reset(fBoatMoved);  vBoatStatus = 3;  set(ContinueJourney);  }  [ **************************************[ PROCESS PLAYER INPUT[ **************************************[ if player hasn't provided input no need to do said testsif (!isset(haveInput))  {  goto(Done);  }  [ look jungleif ((said("examine", "around") ||     said("examine", "jungle") ||     said("examine")))  {  print("The Panamanian jungle is all around you.");  }  [ look plantsif ((said("examine", "plant") || said("examine", "bush")))  {  print("You have never seen plants like this before, and you hope you never "        "will again!");  }  [ look riverif ((said("examine", "creek") || said("examine", "water")))  {  print("This is the Chagres River. Who knows what lurks below the surface of "        "the murky, muddy water!");  }  [ climb treesif (said("climb", "forest"))  {  print("You can't climb anything while you are in this boat!");  }  [ look treesif (said("examine", "forest"))  {  print("There are jungle trees of every species.");  }  [ look groundif (said("examine", "dirt"))  {  print("The only ground you can see are the banks of the river, and they are "        "typical riverbanks.");  }  [ look upif ((said("examine", "up") ||     said("examine", "sky")))  {  print("You see the blue Panamanian sky.");  }  [ look downif (said("examine", "down"))  {  print("All you see is the murky river.");  }  [ look rockif (said("examine", "rock"))  {  print("There are a few jungle rocks on the edge of the river.");  }  [ look vinesif (said("examine", "vine"))  {  print("It wouldn't be a jungle if there weren't vines!");  }  [ look swampif (said("examine", "swamp"))  {  print("It looks swampy at the river's edge.");  }  [ use mosquito netif ((said("wear", "mosquito net") ||     said("apply", "mosquito net") ||     said("use", "mosquito net")))  {  [ if Jerrod has the net  if (has("Mosquito net"))    {    [ it's going to save his life    print("Since you have entered the humid tropics, whenever necessary you "          "have worn the mosquito net to keep those pests from biting you!");    }  else    {    print("You don't have any mosquito net.");    }  }  [ go swimming/jump in waterif ((said("swim", "rol") ||     said("anyword", "swim", "rol") ||     said("go", "water") ||     said("go", "anyword", "water") ||     said("jump") ||     said("jump", "across") ||     said("jump", "across", "board") ||     said("jump", "overboard") ||     said("jump", "water") ||     said("jump", "anyword", "water") ||     said("go", "creek") ||     said("go", "anyword", "creek") ||     said("jump", "creek") ||     said("jump", "anyword", "creek") ||     said("enter", "water") ||     said("enter", "creek")))  {  print("Why do that? Who knows what dangers lie beneath the surface of the "        "river!");  }  [ look boatif (said("examine", "boat"))  {  print("This small boat is nothing but a hollowed-out log. You seriously doubt "        "that it will make the trip!");  }  [ look manif (said("examine", "boy"))  {  print("You are riding with other people on their way to California!");  }  [ speak manif ((said("speak", "boy") || said("speak")))  {  print("The people riding have very little to say; they are worried about "        "capsizing, and about what might be in the water.");  }  [ look guideif (said("examine", "guide"))  {  print("Your guide is completely at home in the jungle.");  }  [ drink waterif ((said("acquire", "water") ||     said("anyword", "drink", "rol") ||     said("drink", "rol")))  {  print("You don't need any water.");  }  Done:[ call main timing logic to manage trip timing eventscall(lgc.PanamaTripTiming);return();[ **************************************[ MESSAGES[ **************************************#message 1 "The Panamanian jungle is all around you."#message 2 "You have never seen plants like this before, and you hope you never will again!"#message 3 "This is the Chagres River. Who knows what lurks below the surface of the murky, muddy water!"#message 4 "You can't climb anything while you are in this boat!"#message 5 "There are jungle trees of every species."#message 6 "The only ground you can see are the banks of the river, and they are typical riverbanks."#message 7 "You see the blue Panamanian sky."#message 8 "All you see is the murky river."#message 9 "There are a few jungle rocks on the edge of the river."#message 10 "It wouldn't be a jungle if there weren't vines!"#message 11 "It looks swampy at the river's edge."#message 12 "Since you have entered the humid tropics, whenever necessary you have worn the mosquito net to keep those pests from biting you!"#message 13 "Why do that? Who knows what dangers lie beneath the surface of the river!"#message 14 "This small boat is nothing but a hollowed-out log. You seriously doubt that it will make the trip!"#message 15 "You don't have any mosquito net."#message 16 "You are riding with other people on their way to California!"#message 17 "The people riding have very little to say; they are worried about capsizing, and about what might be in the water."#message 18 "Your guide is completely at home in the jungle."#message 50 "You don't need any water."