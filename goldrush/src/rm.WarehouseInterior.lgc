[***********************************************************[[ rm.WarehouseInterior[[ This is the inside of the warehouse next to the dock;[ there is a poster that Jerrod can view which provides[ useful information for deciding how to get to California.[[***********************************************************[ **************************************[ LOCAL DEFINES[ **************************************#define oGull1                       o1#define oGull2                       o2#define vShipTimer                 v220[ v221 is not used#define vGullStep                  v222#define vGullX                     v223#define vGullY                     v224#define vPosterPic                 v225#define vGullCycle                 v226#define fGull1Moved                f220#define fGull2Moved                f221#define fHeardShip                 f222#define fShipStarted               f223#define fShowPoster                f224#define fSoundDone                 f225#define fSoundDone2                f226[ **************************************[ FIRST CYCLE ONLY[ **************************************if (isset(newRoom))  {  [ get picture that has close up of the poster  vPosterPic = pic.SeafarerPoster;    [ load picture for the current room  load.pic(currentRoom);  [ load the poster picture  load.pic(vPosterPic);    [ load the views used in the room  load.view(vw.JerrodNY);  load.view(vw.SkylineArt);  load.view(vw.Gulls);  load.view(vw.Posters);  load.view(vw.PosterArt);    [ load sounds used in the room  load.sound(s.AddToScore);  load.sound(s.UhOh);  load.sound(s.EngineStart);    [ draw the current room  draw.pic(currentRoom);    [ add skyline art  add.to.pic(vw.SkylineArt, 0, 2, 40, 52, 4, 4);  add.to.pic(vw.SkylineArt, 0, 3, 60, 52, 4, 4);  add.to.pic(vw.SkylineArt, 0, 4, 80, 52, 4, 4);  add.to.pic(vw.SkylineArt, 0, 5, 100, 52, 4, 4);  add.to.pic(vw.SkylineArt, 0, 6, 120, 52, 4, 4);    [ add the poster to the beam  add.to.pic(vw.Posters, 0, 7, 119, 126, 13, 13);    [ if the ship hasn't sailed yet  if (!isset(ShipSailed))    {    [ this is done to keep the ship from changing status    [ while Jerrod is in the warehouse without giving him a    [ chance to get back to the dock; if it were not set,    [ then in the main logic, ship would sail immediately    set(OnGangplank);    [ the programmers could have used a different     [ flag, looks like they chose the gangplank flag for     [ convenience    }      [ two seagulls fly about randomly  set.view(oGull1, vw.Gulls);  animate.obj(oGull1);  ignore.horizon(oGull1);  ignore.blocks(oGull1);  ignore.objs(oGull1);  position(oGull1, 30, 25);  set.priority(oGull1, 6);  vGullCycle = 2;  cycle.time(oGull1, vGullCycle);  set(fGull1Moved);  draw(oGull1);  [ seagull #2  set.view(oGull2, vw.Gulls);  animate.obj(oGull2);  ignore.horizon(oGull2);  ignore.blocks(oGull2);  ignore.objs(oGull2);  position(oGull2, 50, 35);  set.priority(oGull2, 6);  cycle.time(oGull2, vGullCycle);  set(fGull2Moved);  draw(oGull2);    [ add Jerrod, in normal Brooklyn attire  animate.obj(ego);  set.view(ego, vw.JerrodNY);  position(ego, 100, 155);  draw(ego);    [ now show the picture  show.pic();  }  [ **************************************[ EVERY CYCLE[ **************************************[ if seagull #1 has reached its destinationif (isset(fGull1Moved))  {  [ send it to a new random location  reset(fGull1Moved);  random(1, 150, vGullX);  random(5, 132, vGullY);  random(1, 2, vGullStep);  move.obj.v(oGull1, vGullX, vGullY, vGullStep, fGull1Moved);  }  [ if seagull #2 has reached its destinationif (isset(fGull2Moved))  {  [ send it to a new random destination  reset(fGull2Moved);  random(1, 150, vGullX);  random(5, 132, vGullY);  random(1, 2, vGullStep);  move.obj.v(oGull2, vGullX, vGullY, vGullStep, fGull2Moved);  }  [ if ship has started engines, but it hasn't been noted yetif (SteamshipPhase == 1 && !isset(fHeardShip))  {  [ play the engine sound  sound(s.EngineStart, fSoundDone2);  [ tell Jerrod about the noise  print("What is that horrendous noise? It must be the ship leaving!");  set(fHeardShip);  [ set flag indicating ship has started  set(fShipStarted);  }  [ if engine sound endsif (isset(fSoundDone2))  {  [ play it again, over and over  sound(s.EngineStart, fSoundDone2);  } [ if ship has started  if (isset(fShipStarted))  {  [ increment the ship timer; Jerrod has a little bit of  [ time to get to the ship (if he's got a ticket)  ++vShipTimer;  }  [ after 78 cyclesif (vShipTimer == 78)  {  [ ship has left the dock  print("Bon Voyage! The ship is gone!");  [ stop the engine sound  stop.sound();  [ reset the flag to the sound so it won't start again  reset(fSoundDone2);  [ increment timer so the ship sequence ends  ++vShipTimer;  [ reset the flags used to start the ship sequence  reset(fShipStarted);  [ and also reset the gangplank flag  reset(OnGangplank);  }  [ if returning from the closeup of the poster after any[ keypressif (isset(fShowPoster) && lastChar != 0)  {  [ erase the instructions line  clear.lines(23, 23, BLACK);  [ reset the show poster flag  reset(fShowPoster);  [ reset all objects  unanimate.all();  [ redraw the current room picture  draw.pic(currentRoom);  [ add the skyline art and poster  add.to.pic(vw.SkylineArt, 0, 2, 40, 52, 4, 4);  add.to.pic(vw.SkylineArt, 0, 3, 60, 52, 4, 4);  add.to.pic(vw.SkylineArt, 0, 4, 80, 52, 4, 4);  add.to.pic(vw.SkylineArt, 0, 5, 100, 52, 4, 4);  add.to.pic(vw.SkylineArt, 0, 6, 120, 52, 4, 4);  add.to.pic(vw.Posters, 0, 7, 119, 126, 13, 13);  [ add the gulls back  set.view(oGull1, vw.Gulls);  animate.obj(oGull1);  ignore.horizon(oGull1);  ignore.blocks(oGull1);  ignore.objs(oGull1);  position(oGull1, 30, 25);  set.priority(oGull1, 6);  vGullCycle = 2;  cycle.time(oGull1, vGullCycle);  set(fGull1Moved);  draw(oGull1);  set.view(oGull2, vw.Gulls);  animate.obj(oGull2);  ignore.horizon(oGull2);  ignore.blocks(oGull2);  ignore.objs(oGull2);  position(oGull2, 50, 35);  set.priority(oGull2, 6);  cycle.time(oGull2, vGullCycle);  set(fGull2Moved);  draw(oGull2);  [ add Jerrod, and set his view  animate.obj(ego);  set.view(ego, vw.JerrodNY);  set.loop(ego, 3);  draw(ego);  [ show the picture, and allow input  show.pic();  accept.input();  }  [ **************************************[ CHECK FOR AN EXIT CONDITION[ **************************************if ((edgeEgoHit == RIGHT_EDGE ||     edgeEgoHit == BOTTOM_EDGE))  {  new.room(rm.BrooklynDock); [ ##LE001##  }  [ **************************************[ PROCESS PLAYER INPUT[ **************************************[ if player hasn't provided input no need to do said testsif (!isset(haveInput))  {  goto(Done);  }  [ look around/lookif ((said("examine", "around") ||     said("examine", "warehouse") ||     said("examine", "building") ||     said("examine")))  {  print("This warehouse is huge! There is a poster attached to a large post.");  }[ look boxif (said("examine", "box"))  {  print("These boxes and crates have come from all over the world!");  }  [ look riverif ((said("examine", "water") ||     said("examine", "creek") ||     said("examine", "east river") ||     said("examine", "ocean")))  {  print("It is a beautiful view of the East Sound.");  }[ look New Yorkif ((said("examine", "new york") ||     said("examine", "city") ||     said("examine", "glass")))  {  print("Through the windows, you have a spectacular view of New York City and "        "the East River.");  }[ look posterif ((said("examine", "sign") ||     said("examine", "billboard") ||     said("read", "sign") ||     said("read", "billboard") ||     said("read", "newspaper") ||     said("examine", "newspaper")))  {  [ if close enough and in front of the poster  if (posn(ego, 108, 144, 135, 161))    {    [ if not already scored    if (!isset(ScoreWareHousePoster))      {      [ score two points      set(ScoreWareHousePoster);      currentScore  += 2;      }    [ clear all objects (so they don't show up on the poster    [ picture)    unanimate.all();    [ draw the poster picture    draw.pic(vPosterPic);    [ add skyline art    add.to.pic(vw.SkylineArt, 0, 0, 0, 52, 4, 4);    add.to.pic(vw.SkylineArt, 0, 1, 20, 52, 4, 4);    add.to.pic(vw.SkylineArt, 0, 2, 40, 52, 4, 4);    add.to.pic(vw.SkylineArt, 0, 5, 100, 52, 4, 4);    add.to.pic(vw.SkylineArt, 0, 6, 120, 52, 4, 4);    add.to.pic(vw.SkylineArt, 0, 7, 140, 52, 4, 4);    add.to.pic(vw.PosterArt, 0, 0, 57, 73, 15, 15);    [ show the closeup of the poster    show.pic();    [ no player input while showing the poster    prevent.input();    [ make sure lastChar is cleared    lastChar = 0;    [ show the instruction to clear the picture    display(23, 0, "Strike any key to return to warehouse!");    [ set flag indicating player has seen boat flyer    set(SeenBoatTicketFlyer);    [ and set flag indicating poster is being displayed    set(fShowPoster);    [ play sound for scoring    sound(s.AddToScore, fSoundDone);    }      [ if behind the post  if (posn(ego, 108, 130, 135, 143))    {    print("You are looking at the back side of the poster!");    }      [ if not close enough  if (!posn(ego, 108, 130, 135, 161))    {    print("You need to get closer.");    }  }  [ open boxif (said("open", "box"))  {  print("These crates are all nailed shut.");  }  [ climb on boxif ((said("climb", "box") ||     said("climb")))  {  print("Climbing crates will get you nowhere!");  }  [ move boxif (said("move", "box"))  {  print("These crates are far too heavy to move!");  }  [ get boxif (said("acquire", "box"))  {  print("These crates are far too heavy to carry around!");  }  [ look upif (said("examine", "up"))  {  print("There is nothing important up here!");  }  [ look floor/look downif ((said("examine", "deck") || said("examine", "down")))  {  print("There is nothing important down here!");  }  [ look beamif (said("examine", "beam"))  {  print("The warehouse was built of wood.");  }  [ look wallif (said("examine", "wall"))  {  print("Typical warehouse walls built of wood.");  }  [ look seagullif (said("examine", "bird"))  {  print("Sea gulls are a familiar sight around here!");  }  [ read boxif (said("read", "box"))  {  print("The crates have nothing to read on them.");  }  [ look postif (said("examine", "post"))  {  print("You see a poster attached to a large post.");  }  [ go swimmingif ((said("swim") ||     said("go", "swim") ||     said("go", "water") ||     said("go", "creek") ||     said("go", "ocean") ||     said("swim", "water") ||     said("go", "swim", "water") ||     said("jump", "water") ||     said("jump", "creek") ||     said("jump", "ocean") ||     said("enter", "water") ||     said("enter", "creek") ||     said("enter", "ocean")))  {  print("You have more sense than that! That water is cold!!");  }  Done:[ if showing the poster closeup, and instructions to return[ have been toggled back onif (isset(UpdateStatus) && isset(fShowPoster))  {  [ restore the instructions  reset(UpdateStatus);  display(23, 0, "Strike any key to return to warehouse!");  }return();[ **************************************[ MESSAGES[ **************************************#message 1 "What is that horrendous noise? It must be the ship leaving!"#message 2 "Bon Voyage! The ship is gone!"#message 3 "This warehouse is huge! There is a poster attached to a large post."#message 4 "These boxes and crates have come from all over the world!"#message 6 "It is a beautiful view of the East Sound."#message 8 "Through the windows, you have a spectacular view of New York City and the East River."#message 9 "   Go to\n\nCALIFORNIA!!\n\n   by Sea\n   on The\n   Modern\n\n SEA FARER!\nInquire at:\n 12 Front St."#message 10 "You are looking at the back side of the poster!"#message 11 "You need to get closer."#message 12 "These crates are all nailed shut."#message 13 "Climbing crates will get you nowhere!"#message 14 "These crates are far too heavy to move!"#message 15 "These crates are far too heavy to carry around!"#message 16 "There is nothing important up here!"#message 17 "The warehouse was built of wood."#message 18 "Typical warehouse walls built of wood."#message 19 "Sea gulls are a familiar sight around here!"#message 20 "There is nothing important down here!"#message 21 "The crates have nothing to read on them."#message 22 "Strike any key to return to warehouse!"#message 23 "%g69"#message 24 "You see a poster attached to a large post."#message 30 "You have more sense than that! That water is cold!!"