[***********************************************************[[ rm.HomeInterior[ [ This is Jerrod's home in Brooklyn. Lots of clues, and also[ several important items that Jerrod needs to pick up to [ be successful in getting to California.[[***********************************************************[ **************************************[ LOCAL DEFINES[ **************************************#define oDeskTop                     o1#define oBedroomDoor                 o2#define oCutout1                     o3#define oCutout2                     o4#define oClosetDoor                  o5#define oStatement                   o6#define oAlbum                       o7#define vTmpDir                    v220#define vEgoStep                   v221#define vAlbumStatus               v222  #define ALB_CLOSED            0  [ 0: photo album is closed  #define ALB_START             1  [ 1: Jerrod has decided to look at the album  #define ALB_OPEN              2  [ 2: Jerrod opens the album  #define ALB_PAGE_1            3  [ 3: reading/flipping page 1  #define ALB_PAGE_2            4  [ 4: reading/flipping page 2  #define ALB_PAGE_3            5  [ 5: reading/flipping page 3  #define ALB_PAGE_4           10  [ 10: reading/flipping page 4  #define ALB_CLOSING          11  [ 11: Jerrod closes the album  #define ALB_DONE             12  [ 12: Jerrod is done looking at the album#define vPhotoStatus               v223#define fDeskOpen                  f220#define fDeskTopMvd                f221#define fBrDoorMvd                 f222#define fBrDoorOpen                f223#define fHideCutout                f224#define fCutoutMoved               f225#define fClDoorOpen                f226#define fClDoorMoved               f227#define fAlbumMoved                f228#define fSoundDone                 f229[ **************************************[ FIRST CYCLE ONLY[ **************************************if (isset(newRoom))  {  [ load picture for this room  load.pic(currentRoom);    [ load views used in the room  load.view(vw.BigJerrodNY);  load.view(vw.JerrodsHouseArt);    [ load sounds used in the room  load.sound(m.Home);  load.sound(s.AddToScore);  [ this sound is loaded, but is not used in the room  load.sound(s.UhOh);    [ draw the picture and add detail graphics  draw.pic(currentRoom);  [ front door cutout  add.to.pic(vw.JerrodsHouseArt, 0, 1, 35, 164, 15, 15);  [ roll top desk  add.to.pic(vw.JerrodsHouseArt, 0, 2, 103, 117, 10, 10);  [ bit of bedroom furniture  add.to.pic(vw.JerrodsHouseArt, 0, 3, 113, 72, 4, 4);  [ desk chair  add.to.pic(vw.JerrodsHouseArt, 0, 4, 117, 124, 11, 11);  [ table lamp  add.to.pic(vw.JerrodsHouseArt, 0, 5, 106, 140, 14, 14);  [ picture on wall  add.to.pic(vw.JerrodsHouseArt, 0, 6, 115, 67, 10, 10);  [ chair for table  add.to.pic(vw.JerrodsHouseArt, 0, 7, 126, 158, 14, 14);    [ the photo album is on the desk  animate.obj(oAlbum);  set.view(oAlbum, vw.JerrodsHouseArt);  set.loop(oAlbum, 7);  set.cel(oAlbum, 0);  set.priority(oAlbum, 14);  position(oAlbum, 92, 139);  ignore.objs(oAlbum);  draw(oAlbum);  stop.update(oAlbum);    [ desk top can be opened/closed  animate.obj(oDeskTop);  set.view(oDeskTop, vw.JerrodsHouseArt);  set.loop(oDeskTop, 1);  set.cel(oDeskTop, 0);  set.priority(oDeskTop, 10);  position(oDeskTop, 107, 97);  ignore.objs(oDeskTop);  ignore.blocks(oDeskTop);  draw(oDeskTop);  stop.update(oDeskTop);  [ desk starts open  set(fDeskOpen);  [ if Jerrod hasn't taken the bank statement yet  if (!has("Bank statement"))    {    [ add it , but don't draw it yet until desktop closes    animate.obj(oStatement);    set.view(oStatement, vw.JerrodsHouseArt);    set.loop(oStatement, 6);    set.cel(oStatement, 0);    set.priority(oStatement, 10);    position(oStatement, 113, 87);    ignore.objs(oStatement);    ignore.blocks(oStatement);    draw(oStatement);    stop.update(oStatement);    }      [ bedroom door  animate.obj(oBedroomDoor);  set.view(oBedroomDoor, vw.JerrodsHouseArt);  set.loop(oBedroomDoor, 2);  set.cel(oBedroomDoor, 0);  set.priority(oBedroomDoor, 9);  ignore.objs(oBedroomDoor);  position(oBedroomDoor, 89, 106);  draw(oBedroomDoor);  stop.update(oBedroomDoor);    [ the wall cutout makes a portion of the wall 'disappear'  [ when Jerrod enters the bedroom so we can see more of the  [ bedroom  animate.obj(oCutout1);  set.view(oCutout1, vw.JerrodsHouseArt);  set.loop(oCutout1, 3);  set.cel(oCutout1, 0);  set.priority(oCutout1, 10);  position(oCutout1, 101, 72);  ignore.objs(oCutout1);  ignore.blocks(oCutout1);  [ cutout starts in place, showing the wall fully visible  draw(oCutout1);  stop.update(oCutout1);  [ cutout is hidden (wall is intact) until door is opened  set(fHideCutout);    [ a second piece of the wall cutout- this one does not   [ cycle; it's a chunk of wall along right edge of the   [ door frame  animate.obj(oCutout2);  set.view(oCutout2, vw.JerrodsHouseArt);  set.loop(oCutout2, 0);  set.cel(oCutout2, 0);  set.priority(oCutout2, 10);  position(oCutout2, 101, 90);  ignore.objs(oCutout2);  ignore.blocks(oCutout2);  draw(oCutout2);  stop.cycling(oCutout2);    [ the closet door  animate.obj(oClosetDoor);  set.view(oClosetDoor, vw.JerrodsHouseArt);  set.loop(oClosetDoor, 4);  set.cel(oClosetDoor, 0);  set.priority(oClosetDoor, 11);  position(oClosetDoor, 30, 145);  ignore.objs(oClosetDoor);  ignore.blocks(oClosetDoor);  draw(oClosetDoor);  stop.update(oClosetDoor);    [ add Jerrod, using the large indoor Brooklyn view  animate.obj(ego);  set.view(ego, vw.BigJerrodNY);  position(ego, 40, 163);  vEgoStep = 2;  step.size(ego, vEgoStep);  draw(ego);    [ now show the picture  show.pic();    [ and play welcome home theme  sound(m.Home, fSoundDone);  }  [ **************************************[ EVERY CYCLE[ **************************************[ if Jerrod is by closet door (or inside closet)if (posn(ego, 1, 125, 48, 151))  {  [ if on a signal line, and closet door not open  if (isset(egoHitSpecial) && !isset(fClDoorOpen))    {    [ set door-open flag    set(fClDoorOpen);    [ temporarily halt Jerrod while door is opening    stop.update(ego);    [ open closet door    start.update(oClosetDoor);    end.of.loop(oClosetDoor, fClDoorMoved);    }  }  [ after closet door finishes openingif (isset(fClDoorMoved) && isset(fClDoorOpen))  {  [ reset the flag, and allow Jerrod to move again  reset(fClDoorMoved);  start.update(ego);  }  [ if Jerrod is by closet door (or inside closet)if (posn(ego, 1, 125, 48, 151))  {  [ if NOT on a signal line, and door is OPEN  if (!isset(egoHitSpecial) && isset(fClDoorOpen))    {    [ close the door    reset(fClDoorOpen);    reverse.loop(oClosetDoor, fClDoorMoved);    }  }  [ if closet door has finished closingif (isset(fClDoorMoved) && !isset(fClDoorOpen))  {  [ reset the flag, and stop updating door  reset(fClDoorMoved);  stop.update(oClosetDoor);  }  [ if desktop is done movingif (isset(fDeskTopMvd))  {  [ reset the flag  reset(fDeskTopMvd);  [ the desktop and statement are done moving/cycling  stop.update(oDeskTop);  stop.update(oStatement);  }  [ if Jerrod is at bedroom door threshhold and door is closedif (posn(ego, 88, 107, 95, 108) && (!isset(fBrDoorOpen)))  {  [ open the bedroom door  start.update(oBedroomDoor);  end.of.loop(oBedroomDoor, fBrDoorMvd);  set(fBrDoorOpen);  [ temporarily halt Jerrod (save direction to restore it  [ after door opens)  vTmpDir = egoDir;  egoDir = STOPPED;  }  [ if bedroom door has finished openingif (isset(fBrDoorMvd) && isset(fBrDoorOpen))  {  [ reset the flag, adjust priority  reset(fBrDoorMvd);  set.priority(oBedroomDoor, 10);  [ and restore Jerrod's direction  egoDir = vTmpDir;  }  [ if Jerrod is outside the bedroom (but not right next to [ the threshhold) AND door is openif (posn(ego, 87, 108, 96, 109) &&     !posn(ego, 88, 108, 95, 108) &&     isset(fBrDoorOpen))  {  [ close the door, restore priority  reverse.loop(oBedroomDoor, fBrDoorMvd);  set.priority(oBedroomDoor, 9);  reset(fBrDoorOpen);  }  [ if the door has finished closingif (isset(fBrDoorMvd) &&  !isset(fBrDoorOpen))  {  [ reset the flag, and stop updating the door  reset(fBrDoorMvd);  stop.update(oBedroomDoor);  }  [ if Jerrod is in the bedroomif (posn(ego, 84, 70, 130, 110))  {  [ if on a signal line, and cutout #1 is hidden  [ (meaning wall is visible, no opening)  if (isset(egoHitSpecial) && isset(fHideCutout))    {    [ cycle the cutout object to reveal the opening    start.update(oCutout1);    end.of.loop(oCutout1, fCutoutMoved);    reset(fHideCutout);    [ also hide cutout 2    erase(oCutout2);    }  [ if Jerrod is NOT on an alarm, and cutout is NOT hidden  if (!isset(egoHitSpecial) && !isset(fHideCutout))    {    [ hide the coutout (show the wall)    start.update(oCutout1);    reverse.loop(oCutout1, fCutoutMoved);    set(fHideCutout);    }  }  [ when cutout cycle endsif (isset(fCutoutMoved))  {  [ reset the flag and stop updating the cutout  reset(fCutoutMoved);  stop.update(oCutout1);  [ if cutout is now hidden (wall is back)  if (isset(fHideCutout))    {    [ add cutout 2 back to screen    draw(oCutout2);    stop.cycling(oCutout2);    }  }[ when Jerrod looks through the album, use a status variable[ to run through the sequence  [ when Jerrod has decided to look at the photo albumif (isset(fAlbumMoved) && vAlbumStatus == ALB_START)  {  [ open the album  reset(fAlbumMoved);  vAlbumStatus = ALB_OPEN;  [ Jerrod faces the table while looking at the album  set.loop(ego, 0);  [ and does not move until sequence is done  stop.motion(ego);  [ run album through the opening loop  start.update(oAlbum);  end.of.loop(oAlbum, fAlbumMoved);  }  [ after opening the albumif (isset(fAlbumMoved) && vAlbumStatus == ALB_OPEN)  {  [ begin flipping page 1  reset(fAlbumMoved);  vAlbumStatus = ALB_PAGE_1;  print("Memories, memories, memories... Every time you look at this album, it "        "brings back memories!");  [ change to page-flip loop  set.loop(oAlbum, 8);  [ start at first cel  set.cel(oAlbum, 0);  [ run one page-flip cycle  end.of.loop(oAlbum, fAlbumMoved);  }  [ after flipping page 1if (isset(fAlbumMoved) && vAlbumStatus == ALB_PAGE_1)  {  [ begin flipping page 2  reset(fAlbumMoved);  vAlbumStatus = ALB_PAGE_2;  [ start at first cel  set.cel(oAlbum, 0);  print("The album begins with a painting of your father and his best man, Mr. "        "Quail, the bank president, shaking hands after the wedding!");  print("You can't help but remember the help Mr. Quail was during the years "        "after your parent's death. He raised you and your brother, Jake, until "        "you could live on your own.");  [ run another page-flip loop  end.of.loop(oAlbum, fAlbumMoved);  }  [ after flipping page 2if (isset(fAlbumMoved) && vAlbumStatus == ALB_PAGE_2)  {  [ begin flipping page 3  reset(fAlbumMoved);  vAlbumStatus = ALB_PAGE_3;  [ start at first cel  set.cel(oAlbum, 0);  print("Here is a painting of your older brother, Jake, when he was just a "        "baby. You often think of Jake, wondering where he is and what he is "        "doing.");  print("And just across the page is a painting of you. You must have been "        "about eighteen months old.");  [ run another page-flip loop  end.of.loop(oAlbum, fAlbumMoved);  }  [ after flipping page 3if (isset(fAlbumMoved) && vAlbumStatus == 5)  {  [ begin flipping page 4  reset(fAlbumMoved);  vAlbumStatus = ALB_PAGE_4;  [ start at first cel  set.cel(oAlbum, 0);  [ response depends on whether or not Jerrod has  [ taken the photo from the album  if (has("Family photo"))    {    print("The family photo that was once here is now carefully placed in your "          "pocket.");    }  else    {    print("And finally, you see a photo of your entire family together. You "          "remember the excitement of posing together in front of the camera!");    print("It is a very, very special photo to you.");    }  [ run another page-flip loop  end.of.loop(oAlbum, fAlbumMoved);  }  [ after flipping page 4if (isset(fAlbumMoved) && vAlbumStatus == ALB_PAGE_4)  {  [ close the album  reset(fAlbumMoved);  vAlbumStatus = ALB_CLOSING;  [ change loop to open/close  set.loop(oAlbum, 7);  [ start with last cel showing album open  set.cel(oAlbum, 2);  [ run loop backwards once to close the album  reverse.loop(oAlbum, fAlbumMoved);  }  [ after closing the albumif (isset(fAlbumMoved) && vAlbumStatus == ALB_CLOSING)  {  [ reset the flag; change status to 'done'  reset(fAlbumMoved);  vAlbumStatus = ALB_DONE;  [ no need to update album anymore  stop.update(oAlbum);  [ and Jerrod is free to move again  start.motion(ego);  }[ if Jerrod has decided to take the photoif (isset(fAlbumMoved) && vPhotoStatus == 1)  {  [ open the album  reset(fAlbumMoved);  vPhotoStatus = 2;  [ Jerrod faces the table while getting the photo  set.loop(ego, 0);  [ and does not move until sequence is done  stop.motion(ego);  [ open album by running through loop one time  start.update(oAlbum);  end.of.loop(oAlbum, fAlbumMoved);  }  [ if taking the photo and album is openedif (isset(fAlbumMoved) && vPhotoStatus == 2)  {  reset(fAlbumMoved);  [ close the album  vPhotoStatus = 3;  [ play score sound  sound(s.AddToScore, fSoundDone);  [ take the photo  print("You carefully remove the family photo from the album.");  get("Family photo");  [ score 4 points  currentScore  += 4;  [ run loop backwards to close the album  reverse.loop(oAlbum, fAlbumMoved);  }  [ once album is closed after taking photoif (isset(fAlbumMoved) && vPhotoStatus == 3)  {  [ done with this activity  reset(fAlbumMoved);  vPhotoStatus = 0;  [ no need to update album  stop.update(oAlbum);  [ Jerrod is allowed to move again  observe.blocks(ego);  start.motion(ego);  }  [ **************************************[ CHECK FOR AN EXIT CONDITION[ **************************************[ if by the front door of the houseif (posn(ego, 1, 165, 158, 166))  {  [ go back outside  new.room(rm.JerrodsHouse); [ ##LE001##  }  [ **************************************[ PROCESS PLAYER INPUT[ **************************************[ if player hasn't provided input no need to do said testsif (!isset(haveInput))  {  goto(Done);  }  [ open deskif ((said("open", "desk") ||     said("open", "desk top") ||     said("open", "top") ||     said("open", "desk", "top")))  {  [ if Jerrod is near the desk  if (posn(ego, 96, 115, 140, 127))    {    [ if desk is already open    if (isset(fDeskOpen))      {      print("Currently, the desk top is open.");      }    else      {      [ run loop backwards once to open the desk      start.update(oDeskTop);      reverse.loop(oDeskTop, fDeskTopMvd);      [ if Jerrod hasn't taken the bank statement      if (!has("Bank statement"))        {        [ also cycle the statment object so it moves up on        [ the desktop as it opens        start.update(oStatement);        reverse.loop(oStatement, fDeskTopMvd);        }      [ set flag showing desk is open      set(fDeskOpen);      }    }  else    {    print("You must get closer to do that.");    }  }  [ move desk topif (said("move", "desk top"))  {  [ too vague  print("Be more specific!");  }  [ closing the deskif ((said("close", "desk") ||     said("close", "desk top") ||     said("close", "top") ||     said("close", "desk", "top") ||     said("pull", "down", "desk top")))  {  [ only if near the desk  if (posn(ego, 96, 115, 140, 127))    {    [ if desk is already closed    if (!isset(fDeskOpen))      {      print("Currently, the desk top is closed.");      }    else      {      [ run loop forward once to close the desk      start.update(oDeskTop);      end.of.loop(oDeskTop, fDeskTopMvd);      [ if bank statement is still on the desk      if (!has("Bank statement"))        {        [ update it too, so it comes into view as the desk        [ top closes        start.update(oStatement);        end.of.loop(oStatement, fDeskTopMvd);        }      [ reset flag to show desk is closed      reset(fDeskOpen);      }    }  else    {    print("You must get closer to do that.");    }  }  [ close drawer/open drawer/look drawerif ((said("close", "drawer") ||     said("open", "drawer") ||     said("examine", "drawer") ||     said("examine", "in", "drawer") ||     said("examine", "in", "desk")))  {  [ if Jerrod is near the desk  if (posn(ego, 96, 115, 140, 127))    {    print("You have looked in these drawers thousands of times before and have "          "never seen anything interesting.");    }  else    {    print("You must get closer to do that.");    }  }  [look desk/ loop desk topif ((said("examine", "desk") ||     said("examine", "desk top") ||     said("examine", "desk top", "desk") ||     said("examine", "top", "desk")))  {  [ if Jerrod is near the desk  if (posn(ego, 56, 108, 140, 163))    {    [ if desk is open    if (isset(fDeskOpen))      {      print("This is a roll top desk.");      }    else      {      [ otherwise, desk is closed      if (!has("Bank statement"))        {        [ if Jerrod hasn't taken the bank statement yet,        [ show a message so player knows it's still there        print("Crumpled, slightly faded and wedged between the slats of the "              "roll top is what appears to be a misplaced bank statement.");        }      else        {        print("This is a roll top desk.");        }      }    }  else    {    print("There is a roll top desk in the living room.");    }  }  [ look under deskif ((said("examine", "below", "desk") ||     said("examine", "below", "desk top") ||     said("examine", "below", "desk top", "desk") ||     said("examine", "below", "chair") ||     said("examine", "below", "table")))  {  [ if Jerrod is near the desk  if (posn(ego, 78, 104, 132, 140))    {    print("You see nothing but a dusty floor.");    }  else    {    print("You need to be in the living room.");    }  }  [ get bank statementif ((said("acquire", "bank statement") ||     said("acquire", "bank", "bank statement") ||     said("acquire", "account") ||     said("acquire", "account", "number")))  {  if (has("Bank statement"))    {    print("You already have your bank statement.");    }  else    {    [ if Jerrod is near desk    if (posn(ego, 96, 115, 140, 127))      {      [ if desk is closed      if (isset(fDeskOpen))        {        print("Right now you see no bank statement.");        }      else        {        [ play score sound        sound(s.AddToScore, fSoundDone);        [ take the statement        print("You retrieve the crumpled bank statement from between the slats "              "of the roll top desk.");        get("Bank statement");        [ erase it from the screen        erase(oStatement);        [ score two points        currentScore  += 2;        }      }    else      {      [ not close enough      if (isset(fDeskOpen))        {        print("Right now you see no bank statement.");        }      else        {        print("It looks like there may be a piece of paper stuck in the desk "              "top.");        }      }    }  }  [ get paper/get noteif ((said("acquire", "newspaper") ||     said("examine", "newspaper") ||     said("read", "newspaper") ||     said("acquire", "note") ||     said("examine", "note") ||     said("read", "note")))  {  [ if Jerrod has the bank statement  if (has("Bank statement"))    {    print("Right now you see no bank statement.");    }  else    {    [ if Jerrod is close enough to desk    if (posn(ego, 96, 115, 140, 127))      {      [ if desk is closed      if (isset(fDeskOpen))        {        print("Right now you see no bank statement.");        }      else        {        [ if player said 'get paper' or 'get note', don't         [ actually get it; they will need to say 'get bank        [ statement' to get it        print("The only paper visible is the bank statement that has been stuck "              "in the roll top desk.");        }      }    else      {      [ Jerrod is not close to the desk - if desk is open      if (isset(fDeskOpen))        {        print("Right now you see no bank statement.");        }      else        {        print("It looks like there may be a piece of paper stuck in the desk "              "top.");        }      }    }  }  [ look bank statementif ((said("examine", "bank statement") ||     said("examine", "bank", "bank statement") ||     said("examine", "account") ||     said("examine", "account", "number")))  {  [ (if Jerrod has the statement, lgc.Main will handle  [ looking at it)    [ if Jerrod doesn't have it,  if (!has("Bank statement"))    {    [ if Jerrod is near the desk    if (posn(ego, 96, 115, 140, 127))      {      [ response depends on whether desk is open or not      if (isset(fDeskOpen))        {        print("Right now you see no bank statement.");        }      else        {        print("Lost, for who knows how long, is a statement of your bank "              "account at Brooklyn Bank.");        }      }    else      {      [ not near desk; response depends on whether desk is       [ open or not      if (isset(fDeskOpen))        {        print("Right now you see no bank statement.");        }      else        {        print("It looks like there may be a piece of paper stuck in the desk "              "top.");        }      }    }  }  [ read bank statementif ((said("read", "bank statement") ||     said("read", "bank", "bank statement")))  {  [ (if Jerrod has the statement, lgc.Main will handle  [ looking at it)    [ if Jerrod doesn't have it,  if (!has("Bank statement"))    {    print("Right now you don't have a bank statement.");    }  }  [ look tableif (said("examine", "table"))  {  [ if Jerrod is near the table  if (posn(ego, 56, 108, 140, 163))    {    print("This table was handcrafted by your grandpa. Resting on the table is "          "an old family album and a lamp.");    }  else    {    print("You must get closer to do that.");    }  }  [ look floorif (said("examine", "deck"))  {  print("This floor, in fact the entire house, is constructed of the finest "        "lumber available in the New England region.");  }  [ look/look aroundif ((said("examine") || said("examine", "around")))  {  [ answer depends on where in the house Jerrod is currently  [ standing  if (posn(ego, 56, 108, 140, 163))    {    print("In the living room there is a desk in the corner and a table in the "          "center of the room.");    }  if (posn(ego, 88, 70, 120, 107))    {    print("This is the only bedroom in the house. The only thing in the bedroom "          "is a bed.");    print("As a child, you and Jake slept in the attic.");    }  if (posn(ego, 30, 123, 55, 165))    {    print("This is the main entryway. The living room is to your right.");    }  if (posn(ego, 10, 130, 29, 150))    {    print("You are in a closet.");    }  if ((posn(ego , 10 , 70 , 55 , 122) || posn(ego , 56 , 70 , 87 , 107)))    {    print("You never cook, but you can't forget the meals your mother prepared "          "here.");    }  }  [ look chairif (said("examine", "chair"))  {  [ if Jerrod is in the living room  if (posn(ego, 56, 108, 140, 163))    {    print("There is a chair by the desk and one by the table.");    }  else    {    print("If you want to see the %w2, you will have to go into the living "          "room.");    }  }[ move chair/move table  if ((said("move", "chair") || said("move", "table")))  {  print("There is no need to.");  }  [ look carpetif (said("examine", "carpet"))  {  print("There's nothing special about these rugs; they just get walked on.");  }  [ look closet/look in closetif ((said("examine", "closet") ||     said("examine", "in", "closet")))  {  [ if Jerrod is in the closet  if (posn(ego, 10, 123, 55, 165))    {    print("In years past, this closet was bulging with all kinds of useful "          "things.");    print("Now, it is a place used to store things you don't need.");    }  else    {    print("If you want to look at the closet, you'll have to get closer.");    }  }  [ open closetif (said("open", "closet"))  {  [ if closet door is already open  if (isset(fClDoorOpen))    {    print("The closet is already open!");    }  else    {    print("The closet will open if you walk up to it.");    }  }[ look kitchen  if (said("examine", "kitchen"))  {  [ if in the kitchen  if ((posn(ego , 10 , 70 , 55 , 122) ||       posn(ego, 56, 70, 87, 107)))    {    print("You never cook, but you can't forget the meals your mother prepared "          "here.");    }  else    {    print("If you want to look at the kitchen, get in the kitchen!");    }  }  [ look cabinetif (said("examine", "cabinet"))  {  [ if Jerrod is in the kitchen  if ((posn(ego, 10, 70, 55, 122) ||       posn(ego, 56, 70, 87, 107)))    {    print("Here is a fine example of your father's craftsmanship. You never "          "took much interest in the family trade.");    }  else    {    print("If you want to see the %w2, then you will have to go into the "          "kitchen.");    }  }  [ look counterif (said("examine", "counter"))  {  [ if Jerrod is in the kitchen  if ((posn(ego, 10, 70, 55, 122) ||       posn(ego, 56, 70, 87, 107)))    {    print("The counter top is bare.");    }  else    {    print("If you want to see the %w2, then you will have to go into the "          "kitchen.");    }  }  [ look bedif (said("examine", "bed"))  {  [ if Jerrod is in the bedroom  if (posn(ego, 88, 70, 120, 107))    {    print("This is your bed.");    }  else    {    print("You need to be in the bedroom!");    }  }  [ look under bedif (said("examine", "below", "bed"))  {  [ if Jerrod is in the bedroom  if (posn(ego, 88, 70, 120, 107))    {    print("You see nothing but a dusty floor.");    }  else    {    print("You need to be in the bedroom!");    }  }  [ look mattress/look under mattressif ((said("examine", "mattress") ||     said("examine", "below", "mattress")))  {  [ if Jerrod is in the bedroom  if (posn(ego, 88, 70, 120, 107))    {    print("There is nothing under the mattress.");    }  else    {    print("You need to be in the bedroom!");    }  }  [ look bricks/look fireplaceif ((said("examine", "brick") ||     said("examine", "fireplace")))  {  [ if Jerrod is in the living room  if (posn(ego, 56, 108, 140, 163))    {    print("This is a brick fireplace.");    }  else    {    print("If you want to see the %w2, you will have to go into the living "          "room.");    }  }[ look paintingif ((said("examine", "painting") ||     said("examine", "painting", "wall")))  {  [ if Jerrodis near the table  if (posn(ego, 78, 145, 94, 163))    {    print("There is a painting on the wall above the desk. There are also a few "          "paintings in the family album on the table.");    }  else    {    print("This is a beautiful painting of your parents on their wedding day.");    print("You sure got your father's nose!");    }  }  [ look photo on wallif (said("examine", "photo", "wall"))  {  [ if Jerrod is near the table  if (posn(ego, 78, 145, 94, 163))    {    print("There is a painting on the wall above the desk. There is a photo in "          "the family album on the table.");    }  else    {    print("This is a beautiful painting of your parents on their wedding day.");    print("You sure got your father's nose!");    }  }  [ look photoif (said("examine", "photo"))  {  [ if Jerrod has the photo, looking at it is handled in the   [ lgc.Main    [ if Jerrod doesn't have the photo  if (!has("Family photo"))    {    [ if by the table    if (posn(ego, 78, 145, 94, 163))      {      print("There is a painting on the wall above the desk. There is a photo "            "in the family album on the table.");      }    else      {      print("This is a beautiful painting of your parents on their wedding day.");      print("You sure got your father's nose!");      }    }  }  [ get paintingif ((said("acquire", "painting") ||     said("acquire", "family", "painting")))  {  print("This is a painting of your parents' wedding. There is a photo in the "        "album on the table.");  }  [ read album/look at albumif ((said("examine", "album") ||     said("examine", "family", "album") ||     said("examine", "photo", "album") ||     said("examine", "mature", "family", "album") ||     said("read", "album") ||     said("read", "family", "album") ||     said("read", "photo", "album") ||     said("read", "mature", "family", "album") ||     said("open", "album") ||     said("open", "family", "album") ||     said("open", "photo", "album") ||     said("open", "mature", "family", "album") ||     said("examine", "book") ||     said("examine", "family", "book") ||     said("read", "book") ||     said("read", "family", "book") ||     said("open", "book") ||     said("open", "family", "book")))  {  [ if Jerrod is near the table where the album is  if (posn(ego, 78, 145, 94, 163))    {    [ if not scored yet    if (!isset(ScoreAlbum))      {      [ play score sound      sound(s.AddToScore, fSoundDone);      [ score 2 points      set(ScoreAlbum);      currentScore  += 2;      }    [ begin the 'read album' sequence    set(fAlbumMoved);    vAlbumStatus = ALB_START;    }  else    {    print("For this, you really need to get closer.");    }  }  [ take albumif ((said("acquire", "album") ||     said("acquire", "family", "album") ||     said("acquire", "mature", "family", "album") ||     said("acquire", "photo", "album") ||     said("acquire", "family", "photo", "album") ||     said("acquire", "book") ||     said("acquire", "family", "book")))  {  [ if Jerrod is near the table where album is  if (posn(ego, 78, 145, 94, 163))    {    print("You don't need to carry around the entire album.");    }  else    {    print("For this, you really need to get closer.");    }  }  [ pick up albumif ((said("lift", "album") ||     said("lift", "photo", "album") ||     said("lift", "book")))  {  [ if Jerrod is near the table  if (posn(ego, 78, 145, 94, 163))    {    print("There is nothing under the album but the table.");    }  else    {    print("For this, you really need to get closer.");    }  }  [ take photoif ((said("acquire", "photo") ||     said("acquire", "family", "photo")))  {  if (has("Family photo"))    {    print("You already have a family photo from the album!");    }  else    {    [ if Jerrod is near the table where the album is    if (posn(ego, 78, 145, 94, 163))      {      [ start the 'take photo' sequence      set(fAlbumMoved);      vPhotoStatus = 1;      }    else      {      [ if Jerrod is in living room      if (posn(ego, 88, 109, 130, 125))        {        [ can't take the picture off wall; just describe        [ what pictures are in the room        print("This is a painting of your parents' wedding. There is a photo in "              "the album on the table.");        }      else        {        print("You must get closer to do that.");        }      }    }  }  [ look living roomif (said("examine", "living", "around"))  {  [ if Jerrod is in the living room  if (posn(ego, 56, 108, 140, 163))    {    print("In the living room there is a desk in the corner and a table in the "          "center of the room.");    }  else    {    print("If you want to look at the living room, then you must be in the "          "living room!");    }  }    [ look bed roomif ((said("examine", "bedroom") ||     said("examine", "bed", "around")))  {  [ if Jerrod is in the bedroom  if (posn(ego, 88, 70, 120, 107))    {    print("This is the only bedroom in the house. The only thing in the bedroom "          "is a bed.");    print("As a child, you and Jake slept in the attic.");    }  else    {    print("You cannot look at the bedroom unless you are in the bedroom!");    }  }  [ open doorif (said("open", "door"))  {  print("If you want to open a door, just walk up to it!");  }  [ unlock doorif (said("unlock", "door"))  {  print("It isn't locked.");  }  [ look windowif (said("examine", "glass"))  {  [ if Jerrod is by either window  if ((posn(ego, 94, 77, 104, 87) ||       posn(ego, 114, 119, 132, 141)))    {    [ if by bedroom window    if (posn(ego, 94, 77, 104, 87))      {      print("All you see is your yard.");      }    else      {      print("Not far away, you see Leonard's house!");      }    }  else    {    print("You are not close enough to a window to see very well!");    }  }  [ sit down/lay down/go to sleepif ((said("sit") ||     said("sit", "down") ||     said("sit", "chair") ||     said("sit", "in", "chair") ||     said("sleep") ||     said("sleep", "bed") ||     said("sleep", "in", "bed") ||     said("go", "sleep") ||     said("acquire", "sleep") ||     said("lay", "down") ||     said("lay", "down", "sleep") ||     said("lay", "down", "bed") ||     said("lay", "down", "in", "bed") ||     said("lay", "bed") ||     said("lay", "in", "bed") ||     said("use", "bed") ||     said("go", "bed") ||     said("enter", "bed") ||     said("nap") ||     said("acquire", "nap")))  {  print("You haven't got time for that!");  }  [ look wallif (said("examine", "wall"))  {  print("There is a painting hanging on the wall over the desk.");  }  [ move rug/look under rugif ((said("move", "carpet") ||     said("examine", "below", "carpet") ||     said("lift", "carpet")))  {  print("There is nothing under the rug but the floor!");  }[ open cupboard/eat foodif ((said("open", "cabinet") ||     said("eat", "food") ||     said("examine", "shelf")))  {  [ if Jerrod is in the kitchen  if ((posn(ego, 10, 70, 55, 122) ||       posn(ego, 56, 70, 87, 107)))    {    print("You open the cabinet, but the shelves are bare!");    }  else    {    print("You can't do that unless you are in the kitchen.");    }  }[ move photo/look behind photoif ((said("move", "photo") ||     said("move", "painting") ||     said("examine", "behind", "painting") ||     said("examine", "behind", "photo")))  {  print("There is nothing behind the painting but a wall.");  }[ get coatif ((said("acquire", "coat") || said("wear", "coat")))  {  print("You don't need your coat!");  }[ look coatif (said("examine", "coat"))  {  print("Your coat is hanging in the closet.");  }[ get boxif (said("acquire", "box"))  {  print("You haven't touched one of those boxes in years! Why do it now?");  }[ look box/open boxif ((said("examine", "box") || said("open", "box")))  {  print("The boxes are empty.");  }[ get food/look foodif ((said("acquire", "food") || said("examine", "food")))  {  [ if in the kitchen  if ((posn(ego, 10, 70, 55, 122) ||       posn(ego, 56, 70, 87, 107)))    {    print("You open the cabinet, but the shelves are bare!");    }  else    {    print("You can't do that here!");    }  }[ look pocket/look coat pocketif ((said("examine", "pocket") ||     said("examine", "coat", "pocket") ||     said("examine", "in", "pocket") ||     said("examine", "in", "coat", "pocket") ||     said("check", "pocket") ||     said("check", "coat", "pocket") ||     said("check", "in", "pocket") ||     said("check", "in", "coat", "pocket")))  {  print("Your coat pockets are as empty as your pants pockets.");  }[ open windowif (said("open", "glass"))  {  print("There is no need to.");  }[ look in fireplaceif (said("examine", "in", "fireplace"))  {  print("The fireplace is empty.");  }[ {anything} atticif ((said("anyword", "attic") ||     said("anyword", "anyword", "attic") ||     said("attic", "anyword") ||     said("attic", "anyword", "anyword") ||     said("attic")))  {  print("There is no reason to go into the attic.");  }[ look entrywayif (said("examine", "entrance"))  {  print("The living room is adjacent to the entryway.");  }[ cook foodif ((said("cook") || said("cook", "food")))  {  print("You never cook.");  }[ look leonard/look leonards houseif ((said("examine", "leonard") ||     said("examine", "leonard", "home")))  {  print("Leonard is your neighbor.");  }[ look lampif ((said("examine", "lamp", "rol") ||     said("examine", "anyword", "lamp", "rol")))  {  print("It is an ordinary lamp.");  }[ get lampif ((said("acquire", "lamp", "rol") ||     said("acquire", "anyword", "lamp", "rol")))  {  print("You have no need for this lamp.");  }[ pack {anything}if (said("pack", "rol"))  {  print("You'll have to leave with the clothes on your back and whatever you "        "can carry in your pockets!");  }Done:return();[ **************************************[ MESSAGES[ **************************************#message 1 "Currently, the desk top is open."#message 2 "You must get closer to do that."#message 3 "Currently, the desk top is closed."#message 4 "This is a roll top desk."#message 5 "There is a roll top desk in the living room."#message 6 "Right now you see no bank statement."#message 7 "Lost, for who knows how long, is a statement of your bank account at Brooklyn Bank."#message 8 "You retrieve the crumpled bank statement from between the slats of the roll top desk."#message 9 "You already have your bank statement."#message 10 "Crumpled, slightly faded and wedged between the slats of the roll top is what appears to be a misplaced bank statement."#message 11 "There is a painting on the wall above the desk. There are also a few paintings in the family album on the table."#message 12 "There is a painting on the wall above the desk. There is a photo in the family album on the table."#message 13 "This floor, in fact the entire house, is constructed of the finest lumber available in the New England region."#message 14 "Leonard is your neighbor."#message 15 "This table was handcrafted by your grandpa. Resting on the table is an old family album and a lamp."#message 16 "In the living room there is a desk in the corner and a table in the center of the room."#message 17 "This is the only bedroom in the house. The only thing in the bedroom is a bed."#message 18 "This is the main entryway. The living room is to your right."#message 19 "You never cook, but you can't forget the meals your mother prepared here."#message 20 "For this, you really need to get closer."#message 21 "There is a chair by the desk and one by the table."#message 25 "There's nothing special about these rugs; they just get walked on."#message 28 "If you want to look at the closet, you'll have to get closer."#message 29 "In years past, this closet was bulging with all kinds of useful things."#message 30 "Now, it is a place used to store things you don't need."#message 31 "If you want to look at the kitchen, get in the kitchen!"#message 32 "Here is a fine example of your father's craftsmanship. You never took much interest in the family trade."#message 33 "If you want to see the %w2, then you will have to go into the kitchen."#message 34 "As a child, you and Jake slept in the attic."#message 35 "This is your bed."#message 36 "You need to be in the bedroom!"#message 37 "This is a brick fireplace."#message 38 "If you want to see the %w2, you will have to go into the living room."#message 40 "This is a beautiful painting of your parents on their wedding day."#message 41 "You sure got your father's nose!"#message 43 "Memories, memories, memories... Every time you look at this album, it brings back memories!"#message 44 "You already have a family photo from the album!"#message 45 "And finally, you see a photo of your entire family together. You remember the excitement of posing together in front of the camera!"#message 46 "It is a very, very special photo to you."#message 47 "Here is a painting of your older brother, Jake, when he was just a baby. You often think of Jake, wondering where he is and what he is doing."#message 48 "And just across the page is a painting of you. You must have been about eighteen months old."#message 49 "The album begins with a painting of your father and his best man, Mr. Quail, the bank president, shaking hands after the wedding!"#message 50 "You carefully remove the family photo from the album."#message 51 "The family photo that was once here is now carefully placed in your pocket."#message 52 "This is a painting of your parents' wedding. There is a photo in the album on the table."#message 54 "If you want to look at the living room, then you must be in the living room!"#message 55 "You cannot look at the bedroom unless you are in the bedroom!"#message 56 "If you want to open a door, just walk up to it!"#message 57 "All you see is your yard."#message 58 "Not far away, you see Leonard's house!"#message 59 "You are not close enough to a window to see very well!"#message 60 "You don't need to carry around the entire album."#message 61 "You haven't got time for that!"#message 62 "It isn't locked."#message 63 "You have looked in these drawers thousands of times before and have never seen anything interesting."#message 64 "The only paper visible is the bank statement that has been stuck in the roll top desk."#message 65 "It looks like there may be a piece of paper stuck in the desk top."#message 66 "Right now you don't have a bank statement."#message 68 "The closet is already open!"#message 69 "The closet will open if you walk up to it."#message 70 "There is a painting hanging on the wall over the desk."#message 71 "There is nothing under the rug but the floor!"#message 72 "You open the cabinet, but the shelves are bare!"#message 73 "You can't do that unless you are in the kitchen."#message 75 "You see nothing but a dusty floor."#message 76 "There is nothing under the mattress."#message 77 "You need to be in the living room."#message 78 "There is nothing behind the painting but a wall."#message 79 "There is no need to."#message 80 "The counter top is bare."#message 82 "You don't need your coat!"#message 83 "You haven't touched one of those boxes in years! Why do it now?"#message 84 "The boxes are empty."#message 85 "You can't do that here!"#message 87 "Your coat is hanging in the closet."#message 88 "Your coat pockets are as empty as your pants pockets."#message 89 "There is nothing under the album but the table."#message 90 "Be more specific!"#message 93 "You are in a closet."#message 94 "The fireplace is empty."#message 95 "There is no reason to go into the attic."#message 96 "The living room is adjacent to the entryway."#message 97 "You never cook."#message 98 "You can't help but remember the help Mr. Quail was during the years after your parent's death. He raised you and your brother, Jake, until you could live on your own."#message 99 "It is an ordinary lamp."#message 100 "You have no need for this lamp."#message 101 "You'll have to leave with the clothes on your back and whatever you can carry in your pockets!"