[***********************************************************[[ lgc.WagonTripTiming[[ This logic is called from each room when Jerrod is on the [ cross country trip via wagon train. It handles the main[ timing, including changing room as needed as the trip[ progresses.[[***********************************************************#define vCholeraTime2         v79 [ override ScurvyTime (ScurvyTime)[ no idea why they didn't use the existing global timepoint[ variable to check for cholera#define vCholeraStatus       v244#define vTmpCPS              v245#define fDoneDying           f241#define fShowMsgHelp         f242[ In this timing logic only, many of the basic checks only [ occur if Jerrrod's current health status is zero. In the[ Cape Horn and Panama timing logics, these checks happen[ regardless of Jerrod's health status. I'm not sure what[ effect that has, but it appears that health status isn't[ really a factor, and this logic should probably doesn't[ need to check it, just like in the other two timing[ logics.[ if Jerrod is currently healthyif (EgoHealthStatus == 0)  {  [ in these rooms and cutscenes, there is no player  [ interaction, so help messages about how to show/hide the  [ trip messages is displayed  if ((CurrentTripTime == 1 ||       CurrentTripTime == 3 ||       CurrentTripTime == 4 ||       CurrentTripTime == 5 ||       CurrentTripTime == 6 ||       CurrentTripTime == 8 ||       CurrentTripTime == 9 ||       CurrentTripTime == 10 ||       CurrentTripTime == 12))    {    [ if the F8 message isn't shown yet    if (!isset(fShowMsgHelp))      {      [ show the appropriate message, depending on status of      [ the main trip message flag      set(fShowMsgHelp);      if (isset(HideTripMsgs))        {        display(24, 0, "<F8> messages suppressed");        }      else        {        display(24, 0, "<F8> messages displayed ");        }      }          [ if player has toggled the messages setting    if (controller(keyTrekMsgs))      {      [ toggle the flag      toggle(HideTripMsgs);      if (isset(HideTripMsgs))        {        [ close any print window that might be open        close.window();        [ re-print the help message        display(24, 0, "<F8> messages suppressed");        }      else        {        [ just re-print the help message        display(24, 0, "<F8> messages displayed ");        }      }    }  else    {    [ use the same msg help flag to determine if help    [ message needs to be erase    if (!isset(fShowMsgHelp))      {      set(fShowMsgHelp);      display(24, 0, "                        ");      }    }  }  [ if trip point is at time 2if (CurrentTripTime == TripPoint_2)  {  [ whatever was here was deleted by programmers; the entire  [ block could have been removed  }  [ if trip point time matches time for Jerrod to get sick[ from choleraif (CurrentTripTime == vCholeraTime2)  {  [ only get sick if time is specifically time point #2  if (CurrentTripTime == 2)    {    [ after two cycles (and if cholera status is zero)    if (TripCycles == 2 && vCholeraStatus == 0)      {      set.view(ego, vw.SickJerrodCA);      print("Maybe it's the long trip you have just endured, but your "            "extremities feel as if they are cramping up.");      print("You have never suffered from motion sickness before, but your "            "tummy isn't feeling well.");      print("You had a drink before you left Brooklyn, but now you seem "            "dehydrated.");      }    [ after 240 cycles    if (TripCycles == 240 && vCholeraStatus == 0)      {      [ allow ego object to cycle at rest      set(CycleAtRest);      [ switch view to show Jerrod falling down dead      set.view(ego, vw.DyingJerrodCA);      set.cel(ego, 0);      [ set status showing he's dying      vCholeraStatus = 100;      [ stop moving, and fall down dead      stop.motion(ego);      end.of.loop(ego, fDoneDying);      }    [ when Jerrod is done dying    if (isset(fDoneDying) && vCholeraStatus == 100)      {      [ reset the flag      reset(fDoneDying);      [ change status to show Jerrod died from cholera      vCholeraStatus = 101;      EgoHealthStatus = 21;      [ load and run the logic to handle the death details      load.logics(lgc.DeathCholera);      call(lgc.DeathCholera);      }    }  [ if at trip point time 3  if (CurrentTripTime == 3)    {    [ looks like at one point, Jerrod was able to get    [ cholera during time point 3. Code was removed, but the    [ empty 'if' block was left behind     }  }  [ if at trip point time 10if (CurrentTripTime == TripPoint_10)  {  [ something used to happen during trip point 10  [ that was removed by the programmers  }  [ if Jerrod is ready to go to next time pointif (isset(ContinueJourney))  {  [ reset the flag  reset(ContinueJourney);  [ increment trip time value  ++CurrentTripTime;  [ reset counters  TripCycles = 0;  TripCycles2 = 0;  TripCycles3 = 0;    [ change rooms to match current trip point  if (CurrentTripTime == TripPoint_1)    {    [ not actually possible; CurrentTripTime is set to 1 at    [ beginning of journey, so first increment will move it    [ to 2    new.room(cs.LeavingNY); [ ##LE001##    }  if (CurrentTripTime == 2)    {    [ Jerrod has to get ready in the camp just outside of    [ Independence    new.room(rm.LIJMSC_West); [ ##LE002##    }  if (CurrentTripTime == 3)    {    [ the wagons make their way across Missouri and    [ Nebraska/Kansas    new.room(cs.LowerPlatte); [ ##LE003##    }  if (CurrentTripTime == 4)    {    [ wagon trip cut scenes continue across Nebraska, and    [ into Fort Laramie Wyoming    new.room(cs.UpperPlatte); [ ##LE004##    }  if (CurrentTripTime == 5)    {    [ wagon trip continues, from Fort Laramie into Utah    new.room(cs.Rockies); [ ##LE005##    }  if (CurrentTripTime == 6)    {    [ the trip moves into across Utah    new.room(cs.Utah); [ ##LE006##    }  if (CurrentTripTime == 7)    {    [ Jerrod has to get down the hill at Green River without    [ getting killed    new.room(rm.GreenRiver); [ ##LE007##    }  if (CurrentTripTime == 8)    {    [ continue across Utah    new.room(cs.Utah); [ ##LE008##    }  if (CurrentTripTime == 9)    {    [ then across Nevada    new.room(cs.Nevada); [ ##LE009##    }  if (CurrentTripTime == 10)    {    [ then into California    new.room(cs.California); [ ##LE010##    }  if (CurrentTripTime == 11)    {    [ Jerrod then has to find food and water in the desert    new.room(rm.Desert); [ ##LE011##    }  if (CurrentTripTime == 12)    {    [ last bit of travel time through California    new.room(cs.California); [ ##LE012##    }  if (CurrentTripTime == 13)    {    [ and finally, Jerrod gets to Sutters Fort        [ clear any status line that might be present    clear.lines(24, 24, BLACK);    [ go to SuttersFort    new.room(rm.SuttersFortSouth); [ ##LE013##    }  }  [ always update the cycle counts++TripCycles;if (TripCycles == 255)  {  ++TripCycles2;  TripCycles = 0;  }if (TripCycles2 == 255)  {  ++TripCycles3;  TripCycles2 = 0;  }  [ when current trip point is Jerrod's stay at LIJMCif (CurrentTripTime == TripPoint_2)  {  [ when Jerrod has given his money, and has chosen an  [ animal team, and is just waiting for right time to leave  if (isset(ReadyToLeaveMO))    {    [ increment the counter    ++LeaveCounter;        [ this code block will never execute; vTmpCPS is set to     [ Game_CPS the vfirst time time point 2 happens; this     [ appears to be old code from a different approach to    [ determine how much time has passed)     if (vTmpCPS != Game_CPS)      {      [ increment seconds counter      ++LeaveSeconds;      [ reset counter      LeaveCounter = 0;      }          [ when approximately one second has passed    if (LeaveCounter == Game_CPS)      {      [ reset the counter      LeaveCounter = 0;      [ incerment seconds counter      ++LeaveSeconds;      }          [ when 60 seconds pass    if (LeaveSeconds > 59)      {      [ increment minutes      ++LeaveMinutes;      [ reset seconds      LeaveSeconds = 0;      }    [ when 60 minutes pass     if (LeaveMinutes > 59)      {      [ reset minutes      LeaveMinutes = 0;      }    }  [ save cycles per second  vTmpCPS = Game_CPS;  }  [ if the update flag is setif (isset(UpdateStatus))  {  [ reset it along with the show msg help flag  reset(UpdateStatus);  reset(fShowMsgHelp);  }return();[ **************************************[ MESSAGES[ **************************************#message 1 "Maybe it's the long trip you have just endured, but your extremities feel as if they are cramping up."#message 2 "You have never suffered from motion sickness before, but your tummy isn't feeling well."#message 3 "You had a drink before you left Brooklyn, but now you seem dehydrated."#message 4 "<F8> messages displayed "#message 5 "<F8> messages suppressed"#message 6 "Ctrl-n for next scene   "#message 7 "                        "