[***********************************************************[[ rm.SuttersFortNorth[ [ A panoramic view of the north side of Sutters Fort. It [ uses tiny views to represent Jerrod and other people and [ object that interact with the scene.[[***********************************************************[ **************************************[ LOCAL DEFINES[ **************************************#define oFlag                  o1#define vTmpVal              v220[ **************************************[ FIRST CYCLE ONLY[ **************************************if (isset(newRoom))  {  [ load picture for current room  load.pic(currentRoom);    [ load views used in the room  load.view(vw.TinyJerrodMule);  load.view(vw.SacPeople);  load.view(vw.CaliforniaArt);    [ draw the current room picture  draw.pic(currentRoom);    [ flag flying above the fort  animate.obj(oFlag);  set.view(oFlag, vw.CaliforniaArt);  set.loop(oFlag, 4);  position(oFlag, 65, 64);  draw(oFlag);  ignore.objs(oFlag);  ignore.blocks(oFlag);  start.cycling(oFlag);  vTmpVal = 3;  cycle.time(oFlag, vTmpVal);    [ Jerrod  animate.obj(ego);  [ if Jerrod has a mule  if ((has(LazyMule) || has("James' ol' mule")))    {    [ use tiny view showing Jerrod with his mule    set.view(ego, vw.TinyJerrodMule);    }  else    {    [ if Jerrod doesn't have a mule, use a tiny person view    [ from the Sacremento people view    set.view(ego, vw.SacPeople);    set.loop(ego, 2);    fix.loop(ego);    }  [ add Jerrod to screen  draw(ego);  [ he begins motionless  egoDir = STOPPED;    [ now show the picture  show.pic();    [ in this scene, ego object needs to cycle when not moving  reset(CycleAtRest);  }  [ **************************************[ EVERY CYCLE[ **************************************[ if Jerrod is on lower half of screenif (EgoY < 87)  {  [ use automatic priority  release.priority(ego);  }  [ if Jerrod is on upper half of screen priority needs to be[ adjusted manuallyif ((EgoY == 87 || EgoY == 88))  {  set.priority(ego, 9);  }[ above this line, use priority of 10if (EgoY > 88)  {  set.priority(ego, 10);  }  [ **************************************[ CHECK FOR AN EXIT CONDITION[ **************************************[ if Jerrod is by kitchen entranceif (posn(ego, 129, 91, 130, 91))  {  [ adjust Jerrod's position for the new room  position(ego, 61, 113);  new.room(rm.SF_Kitchen); [ ##LE001##  }  [ if Jerrod is by store entranceif (posn(ego, 42, 88, 42, 88))  {  [ if Jerrod has a mule  if ((has(LazyMule) || has("James' ol' mule")))    {    [ it won't follow Jerrod into the store entrance    print("That mule that's been followin' ya 'round cain't fit thru the door.  "          "Ya gone and left him outside!");    drop(LazyMule);    drop("James' ol' mule");    }  [ adjust Jerrod's position so he will   [ be in the cabinet shop in the new room  position(ego, 150, 83);  new.room(rm.SF_TradingStore); [ ##LE002##  }  [ if Jerrod is by cemetery gate entranceif (posn(ego, 35, 85, 35, 85))  {  [ adjust Jerrod's position for the new room  position(ego, 26, 80);  new.room(rm.SF_CemeteryGate); [ ##LE003##  }  [ if Jerrod is leaving by left edge middleif (posn(ego, 157, 92, 159, 92))  {  [ adjust Jerrod's position for the new room  position(ego, 3, 114);  new.room(rm.SuttersFortSouth); [ ##LE004##  }  [ if Jerrod has a mule with him (this matters because size[ of ego object is different, so different posn command is[ needed to tell if ego object is in the area where a change[ in rooms is needed)if ((has(LazyMule) || has("James' ol' mule")))  {  [ if Jerrod is leaving by left edge closer to bottom  if (posn(ego, 153, 94, 153, 104))    {    position(ego, 74, 87);    new.room(rm.SuttersFortArea); [ ##LE005##    }  }else  {  [ if Jerrod is leaving by left edge closer to bottom  if (posn(ego, 158, 94, 158, 104))    {    position(ego, 74, 87);    new.room(rm.SuttersFortArea); [ ##LE006##    }  }  [ if Jerrod is leaving by left edge at bottomif (posn(ego, 0, 83, 18, 83))  {  [ adjust Jerrod's position for the new room  position(ego, 150, 118);  new.room(rm.SuttersFortSouth); [ ##LE007##  }  [ if Jerrod is by cemetery entranceif (posn(ego, 1, 84, 1, 167))  {  [ adjust Jerrod's position for the new room  position(ego, 61, 104);  set.loop(ego, 3);  egoDir = UP;  new.room(rm.SutterCemetery); [ ##LE008##  }  [ if Jerrod goes off bottomif (isset(egoHitSpecial))  {  [ adjust Jerrod's position for the new room  position(ego, 83, 82);  new.room(rm.SuttersFortArea); [ ##LE009##  }  [ **************************************[ PROCESS PLAYER INPUT[ **************************************[ if player hasn't provided input no need to do said testsif (!isset(haveInput))  {  goto(Done);  }  [ look around/lookif ((said("examine", "around") || said("examine")))  {  print("Yer on the south side of the famous Sutter's Fort!  Just to the east "        "of the fort is a cemetery.");  }  [ look cemeteryif (said("examine", "cemetery"))  {  print("The fort cemetery is just east of the fort!");  }  [ look river/look waterif ((said("examine", "creek") || said("examine", "water")))  {  print("This water is the water supply for the folks that live in the fort.");  }  [ look bushif (said("examine", "bush"))  {  print("Yer gonna see a bunch of bushes like that before yer through!");  }  [ look rockif (said("examine", "rock"))  {  print("Ya didn't come all the way to California to look fer granite; yer "        "lookin' fer GOLD!!!");  }  [ look treeif (said("examine", "forest"))  {  print("Yer gonna see trees all over the California landscape!");  }  [ look flagif (said("examine", "flag"))  {  print("Just look at that flag against the California sky!!");  }  [ look fort/look wallif ((said("examine", "fort") || said("examine", "wall")))  {  print("Sutter's Fort is a mighty impressive fort!");  }  [ use shovel/dig for goldif ((said("use", "shovel") ||     said("dig", "gold") ||     said("dig") ||     said("dig", "hole")))  {  [ if Jerrod has a shovel  if (has("Shovel"))    {    print("Diggin' ain't allowed here!  Do that somewhere else!!");    }  else    {    print("No shovel, no diggin'!");    }  }  [ use pan/pan for goldif ((said("use", "pan") ||     said("pan", "gold") ||     said("pan")))  {  print("Ya needs to be in the water!");  }  Done:return();[ **************************************[ MESSAGES[ **************************************#message 1 "Yer on the south side of the famous Sutter's Fort!  Just to the east of the fort is a cemetery."#message 2 "The fort cemetery is just east of the fort!"#message 3 "This water is the water supply for the folks that live in the fort."#message 4 "Yer gonna see a bunch of bushes like that before yer through!"#message 5 "Ya didn't come all the way to California to look fer granite; yer lookin' fer GOLD!!!"#message 6 "Yer gonna see trees all over the California landscape!"#message 7 "Just look at that flag against the California sky!!"#message 8 "Sutter's Fort is a mighty impressive fort!"#message 9 "That mule that's been followin' ya 'round cain't fit thru the door.  Ya gone and left him outside!"#message 40 "Diggin' ain't allowed here!  Do that somewhere else!!"#message 41 "No shovel, no diggin'!"#message 42 "Ya needs to be in the water!"