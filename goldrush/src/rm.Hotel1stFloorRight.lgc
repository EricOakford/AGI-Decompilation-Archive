[***********************************************************[[ rm.Hotel1stFloorRight[ [ This room is the interior hallway on the first floor, [ right side, of the hotel Green Pastures. There is nothing[ for Jerrod to do here.[[ This room uses a timer to dismiss message windows used in[ the knocking sequence; but since none of the print [ commands in the sequence use the leaveWindow flag, none of [ those print commands actually need to be dismissed; [ it's a bug. No one checked that the leaveWindow flag[ was being used in these rooms for the effect they sought.[[***********************************************************[ **************************************[ LOCAL DEFINES[ **************************************#define vTmpStep                   v220#define vKnockStatus               v221#define vKnockTimer                v222[ **************************************[ FIRST CYCLE ONLY[ **************************************if (isset(newRoom))  {  [ load picture for current room  load.pic(currentRoom);    [ load view for Jerrod  load.view(vw.BigJerrodCA);    [ draw the picture  draw.pic(currentRoom);    [ add Jerrod, using larger view with California attire  animate.obj(ego);  vTmpStep = 2;  step.size(ego, vTmpStep);  set.view(ego, vw.BigJerrodCA);  draw(ego);    [ now show the picture  show.pic();  }  [ **************************************[ EVERY CYCLE[ **************************************[ if Jerrod has knocked on a doorif (vKnockStatus == 1)  {  [ increment timer  ++vKnockTimer;  [ after twenty cycles  if (vKnockTimer == 20)    {    [ reset timer    vKnockTimer = 0;    [ advance to next stage (waiting for response)    vKnockStatus = 2;    [ dismiss the message window (not necessary because the    [ window is already dismissed)    close.window();    }  }  [ if waiting for a responseif (vKnockStatus == 2)  {  [ increment timer  ++vKnockTimer;  [ after twenty cycles  if (vKnockTimer == 20)    {    [ reset timer    vKnockTimer = 0;    [ advance to next stage (wait for message to    [ be dismissed)    vKnockStatus = 3;    [     print.at("No one's comin' to the door.", 5, 5, 0);    }  }[ if waiting for last message to be dismissedif (vKnockStatus == 3)  {  [ increment timer  ++vKnockTimer;  [ after twenty cycles  if (vKnockTimer == 20)    {    [ reset timer and status    vKnockTimer = 0;    vKnockStatus = 0;    [ dismiss the message window (not necessary because the    [ window is already dismissed)    close.window();    }  }  [ **************************************[ CHECK FOR AN EXIT CONDITION[ **************************************if (posn(ego, 96, 126, 107, 127))  {  position(ego, 17, 128);  set.loop(ego, 0);  egoDir = RIGHT;  new.room(rm.HotelLobby); [ ##LE001##  }  if (posn(ego, 1, 129, 2, 163))  {  position(ego, 146, 141);  new.room(rm.Hotel1stFloorLeft); [ ##LE002##  }  [ **************************************[ PROCESS PLAYER INPUT[ **************************************[ if player hasn't provided input no need to do said testsif (!isset(haveInput))  {  goto(Done);  }  [ look around/lookif ((said("examine", "around") ||     said("examine", "hall") ||     said("examine")))  {  print("This is the lower hallway. Through the open doorway ya see the lobby.");  }  [ look doorif (said("examine", "door"))  {  [ if by door for room 23  if (posn(ego, 0, 120, 66, 165))    {    print("This is the door to room 23.");    }  else    {    print("This is the entrance to the lobby of the Green Pastures Hotel.");    }  }  [ look wall/look wallpaperif ((said("examine", "wall") ||     said("examine", "wall", "newspaper") ||     said("examine", "wallpaper")))  {  print("The walls have nice wallpaper on 'em.");  }  [ look windowif (said("examine", "glass"))  {  print("Ya can see across the dirty, dusty street into the immense wilderness.");  }  [ look carpet/look floorif ((said("examine", "carpet") || said("examine", "deck")))  {  print("It is a hardwood floor covered with carpet.");  }  [ open door/enter room/walk in roomif ((said("open", "door") ||     said("pull", "door") ||     said("push", "door") ||     said("move", "door") ||     said("go", "around") ||     said("enter", "around") ||     said("go", "door") ||     said("enter", "door") ||     said("boardwalk", "door") ||     said("boardwalk", "in") ||     said("boardwalk", "in", "around") ||     said("boardwalk", "in", "door")))  {  [ if by the door to room 23  if (posn(ego, 24, 120, 42, 140))    {    print("This door's locked.");    }  else    {    print("Ya cain't do that from here!");    }  }  [ knock/knock on doorif ((said("knock") ||     said("knock", "knock") ||     said("knock", "knock", "knock") ||     said("knock", "door")))  {  [ if by the door to room 23  if (posn(ego, 24, 120, 42, 140))    {    [ start the knock sequence    print.at("Knock, knock, knock...", 5, 5, 0);    vKnockStatus = 1;    }  else    {    print("Ya cain't do that from here!");    }  }  [ look number/look room numberif ((said("examine", "number") ||     said("examine", "around", "number")))  {  print("This is room number \"23\".");  }  [ look lobbyif (said("examine", "lobby"))  {  print("Ya see a portion of the lobby from here.");  }  [ read messageif ((said("examine", "message") ||     said("read", "message") ||     said("open", "message")))  {  [ if Jerrod has the message to deliver to room 11  if (has("Message for room 11"))    {    print("The message is written on a folded piece of paper with only one word "          "visible on the outside...");    print("\n CONFIDENTIAL!! \n \n");    }  else    {    print("Ya don't have a message.");    }  }  [ unlock door/use keyif ((said("unlock", "door") ||     said("use", "house key")))  {  print("Ya have nothin' to do that with!");  }Done:return();[ **************************************[ MESSAGES[ **************************************#message 1 "This is the lower hallway. Through the open doorway ya see the lobby."#message 2 "This is the door to room 23."#message 3 "This is the entrance to the lobby of the Green Pastures Hotel."#message 4 "The walls have nice wallpaper on 'em."#message 5 "Ya can see across the dirty, dusty street into the immense wilderness."#message 6 "It is a hardwood floor covered with carpet."#message 7 "This door's locked."#message 8 "Ya cain't do that from here!"#message 9 "Knock, knock, knock..."#message 10 "No one's comin' to the door."#message 11 "This is room number \"23\"."#message 12 "Ya see a portion of the lobby from here."#message 13 "The message is written on a folded piece of paper with only one word visible on the outside..."#message 14 "\n CONFIDENTIAL!! \n \n"#message 15 "Ya don't have a message."#message 42 "Ya have nothin' to do that with!"