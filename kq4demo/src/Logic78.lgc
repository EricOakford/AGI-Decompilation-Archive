#define aRosellaFace    o1#define aGenestaFace    o2#define aGenestaHands   o3#define aSpark          o4#define roomScript  v220#define roomTimer   v221#define thePic  v222#define sparkCycles v223#define faceCycles  v224#define roomScriptDone  f220#define isMonochrome    f221#define musicDone       f222program.control();status.line.off();if (newRoom)  {  thePic = 77;  load.pic(thePic);  draw.pic(thePic);  discard.pic(thePic);  load.view(vMirrorCloseup);  set.view(aRosellaFace, vMirrorCloseup);  animate.obj(aRosellaFace);  position(aRosellaFace, 48, 70);  set.loop(aRosellaFace, 4);  fix.loop(aRosellaFace);  set.cel(aRosellaFace, 0);  set.priority(aRosellaFace, 15);  draw(aRosellaFace);  stop.update(aRosellaFace);  set.view(aGenestaFace, vMirrorCloseup);  animate.obj(aGenestaFace);  position(aGenestaFace, 91, 68);  set.loop(aGenestaFace, 5);  fix.loop(aGenestaFace);  set.cel(aGenestaFace, 0);  set.priority(aGenestaFace, 15);  draw(aGenestaFace);  stop.update(aGenestaFace);  set.view(aGenestaHands, vMirrorCloseup);  animate.obj(aGenestaHands);  position(aGenestaHands, 75, 153);  set.loop(aGenestaHands, 6);  set.priority(aGenestaHands, 15);  draw(aGenestaHands);  stop.update(aGenestaHands);  set.view(aSpark, vMirrorCloseup);  animate.obj(aSpark);  position(aSpark, 69, 90);  set.loop(aSpark, 7);  fix.loop(aSpark);  set.priority(aSpark, 15);  draw(aSpark);  sparkCycles = 3;  cycle.time(aSpark, sparkCycles);  start.cycling(aSpark);  roomScript = 0;  set(roomScriptDone);  roomTimer = 0;  show.pic();  return();  }if ((roomTimer > 0) && (aSecondPassed))  {  --roomTimer;  if (roomTimer <= 0)    {    close.window();    set(roomScriptDone);    }  }if ((roomScriptDone) && (!isset(f68)))  {  reset(roomScriptDone);  ++roomScript;  if (roomScript == 1)    {    load.sound(Sound75);    sound(Sound75, musicDone);    set(leaveWindow);    roomTimer = 8;    if (isset(isMonochrome))      {      print.at("Rosella looks awestruck at the fairy. She is stunningly "               "beautiful! But still there is a certain sadness to her.", 18, 2, 36);      }    else      {      print.at("Rosella looks awestruck at the fairy. She is stunningly "               "beautiful! But still there is a certain sadness to her.", 16, 2, 36);      }    }  if (roomScript == 2)    {    set(leaveWindow);    roomTimer = 8;    if (isset(isMonochrome))      {      print.at("Finally, Rosella speaks. \"I know you would like me to help you "               "in some way, but I don't know how I could help a fairy.\"", 18, 4, 35);      }    else      {      print.at("Finally, Rosella speaks. \"I know you would like me to help you "               "in some way, but I don't know how I could help a fairy.\"", 16, 4, 35);      }    start.update(aRosellaFace);    faceCycles = 3;    cycle.time(aRosellaFace, faceCycles);    start.cycling(aRosellaFace);    }  if (roomScript == 3)    {    close.window();    new.room(Logic79);    }  }if ((roomScriptDone) && (isset(f68)))  {  reset(roomScriptDone);  ++roomScript;  if (roomScript == 1)    {    load.sound(Sound77);    sound(Sound77, musicDone);    set(leaveWindow);    roomTimer = 13;    if (isMonochrome)      {      print.at("Intently, Genesta looks at Rosella. \"Lolotte is very evil and "               "will use the talisman to bring more evil to Tamir. Now I fear "               "it will contaminate my whole country!\"", 17, 2, 37);      }    else      {      print.at("Intently, Genesta looks at Rosella. \"Lolotte is very evil and "               "will use the talisman to bring more evil to Tamir. Now I fear "               "it will contaminate my whole country!\"", 15, 2, 37);      }    start.update(aGenestaFace);    faceCycles = 3;    cycle.time(aGenestaFace, faceCycles);    start.cycling(aGenestaFace);    }  if (roomScript == 2)    {    set(leaveWindow);    roomTimer = 6;    if (isMonochrome)      {      print.at("\"Further, I can not send you home without my talisman.\"", 19, 6, 30);      }    else      {      print.at("\"Further, I can not send you home without my talisman.\"", 17, 6, 30);      }    }  if (roomScript == 3)    {    stop.update(aGenestaFace);    set.cel(aGenestaFace, 0);    force.update(aGenestaFace);    set(leaveWindow);    roomTimer = 8;    if (isMonochrome)      {      print.at("Rosella is unsure as to what SHE can do. Meekly, she asks, \"I "               "want to help you, but how?\"", 19, 4, 35);      }    else      {      print.at("Rosella is unsure as to what SHE can do. Meekly, she asks, \"I "               "want to help you, but how?\"", 17, 4, 35);      }    start.update(aRosellaFace);    cycle.time(aRosellaFace, faceCycles);    start.cycling(aRosellaFace);    }  if (roomScript == 4)    {    stop.update(aRosellaFace);    set.cel(aRosellaFace, 0);    force.update(aRosellaFace);    set(leaveWindow);    roomTimer = 10;    if (isMonochrome)      {      print.at("\"You can do more than you think, Rosella,\" Genesta assures "               "her. \"I believe you will be able to penetrate Lolotte's "               "domain.\"", 18, 3, 37);      }    else      {      print.at("\"You can do more than you think, Rosella,\" Genesta assures "               "her. \"I believe you will be able to penetrate Lolotte's "               "domain.\"", 16, 3, 37);      }    start.update(aGenestaFace);    start.cycling(aGenestaFace);    }  if (roomScript == 5)    {    new.room(Logic79);    }  }return();[ Messages#message 21 "The lovely fairy speaks. \"I am the fairy, Genesta. Welcome to Tamir!\""#message 22 "Rosella looks awestruck at the fairy. She is stunningly beautiful! But still there is a certain sadness to her."#message 23 "Genesta looks sadder than ever. \"You're wrong, Rosella. You see, I'm losing my magical powers. Yesterday as I was strolling through the woods, Lolotte, the evil fairy, caught me unawares and stole my magic talisman.\""#message 24 "The fairy sighs, \"She yanked it from my neck and raced away screeching with laughter. Immediately I felt my powers diminishing and my body weakening. I will die in 24 hours if my talisman is not returned.\""#message 25 "Intently, Genesta looks at Rosella. \"Lolotte is very evil and will use the talisman to bring more evil to Tamir. Now I fear it will contaminate my whole country!\""#message 26 "Rosella is unsure as to what SHE can do. Meekly, she asks, \"I want to help you, but how?\""#message 27 "\"You can do more than you think, Rosella,\" Genesta assures her. \"I believe you will be able to penetrate Lolotte's domain.\""#message 28 "Suddenly, Rosella remembers the tiny tree. \"Can you tell me where to find the magic fruit?\""#message 29 "Remorsefully, Genesta looks at Rosella. \"It will not be easy to reach the tree. It grows on a tiny island within a vast swamp on the other side of the great mountains.\""#message 30 "Bravely fighting back tears, Rosella says, \"I will help you in any way I can, Genesta. How can I find Lolotte?\""#message 31 "The beautiful fairy points eastward. \"Lolotte's castle overlooks Tamir from the great mountains.\""#message 32 "Genesta looks weaker as she says, \"There is not much more I can do, Rosella. As it is, it will be difficult for me to fly home again.\""#message 33 "\"One thing I must do for you, though. I shall disguise you as a peasant girl so as not to attract attention.\""#message 34 "\"Th-thank-you, Genesta...I think,\" Rosella stammers."#message 35 "\"It will be better for you,\" the fairy says. \"Well, I must be off while I can still fly. I KNOW you can do it!\""#message 36 "\"Good-bye, good luck.\""#message 37 "Well, you're on your own, Rosella."#message 200 "Debug0"#message 201 "Debug1"#message 202 "Debug2"#message 204 "Debug4"#message 205 "Debug5"#message 206 "Debug6"#message 220 "Finally, Rosella speaks. \"I know you would like me to help you in some way, but I don't know how I could help a fairy.\""#message 250 "\"Further, I can not send you home without my talisman.\""