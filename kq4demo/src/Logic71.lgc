#define aBigHat     o1#define aBigKing    o2#define roomScript  v220#define roomTimer   v221#define myCycleTime v222#define hatInAir        f220#define timeIt          f221#define cuedIt        f222#define musicDone       f223#define isMonochrome    f224program.control();status.line.off();if (newRoom)  {  prevent.input();  work = 72;  load.pic(work);  draw.pic(work);  discard.pic(work);  load.view(vGrahamThrowHat);  animate.obj(aBigHat);  set.view(aBigHat, vGrahamThrowHat);  position(aBigHat, 38, 100);  stop.cycling(aBigHat);  set.loop(aBigHat, 5);  set.cel(aBigHat, 6);  fix.loop(aBigHat);  set.cel(aBigHat, 0);  draw(aBigHat);  stop.update(aBigHat);  animate.obj(aBigKing);  set.view(aBigKing, vGrahamThrowHat);  position(aBigKing, 55, 103);  stop.cycling(aBigKing);  set.loop(aBigKing, 4);  set.cel(aBigKing, 0);  stop.update(aBigKing);  roomScript = 0;  set(cuedIt);  reset(hatInAir);  reset(timeIt);  roomTimer = 0;  show.pic();  return();  }if (hatInAir)  {  reset(hatInAir);  stop.update(aBigHat);  set(leaveWindow);  set(timeIt);  roomTimer = 2;  if (isMonochrome)    {    print.at("Suddenly...!", 18, 13, 20);    }  else    {    print.at("Suddenly...!", 16, 13, 20);    }  }if ((timeIt) && (aSecondPassed))  {  --roomTimer;  if (roomTimer <= 0)    {    reset(timeIt);    close.window();    set(cuedIt);    }  }if (cuedIt)  {  reset(cuedIt);  ++roomScript;  if (roomScript == 1)    {    load.sound(Sound71);    sound(Sound71, musicDone);    set.priority(aBigHat, 5);    start.update(aBigHat);    reverse.cycle(aBigHat);    start.cycling(aBigHat);    set(leaveWindow);    if (isMonochrome)      {      print.at("The hat arches through the air.", 17, 6, 30);      }    else      {      print.at("The hat arches through the air.", 15, 6, 30);      }    myCycleTime = 2;    cycle.time(aBigHat, myCycleTime);    move.obj(aBigHat, 65, 90, 0, cuedIt);    }  if (roomScript == 2)    {    myCycleTime = 3;    cycle.time(aBigHat, myCycleTime);    move.obj(aBigHat, 75, 93, 0, cuedIt);    }  if (roomScript == 3)    {    myCycleTime = 3;    cycle.time(aBigHat, myCycleTime);    move.obj(aBigHat, 85, 98, 0, hatInAir);    }  if (roomScript == 4)    {    stop.update(aBigHat);    erase(aBigHat);    draw(aBigKing);    start.update(aBigKing);    start.cycling(aBigKing);    set(leaveWindow);    if (isMonochrome)      {      print.at("King Graham experiences a terrible squeezing pain in his chest.", 17, 6, 30);      }    else      {      print.at("King Graham experiences a terrible squeezing pain in his chest.", 15, 6, 30);      }    myCycleTime = 9;    cycle.time(aBigKing, myCycleTime);    end.of.loop(aBigKing, cuedIt);    }  if (roomScript == 5)    {    stop.update(aBigKing);    new.room(Logic70);    }  }return();[ Messages#message 1 "With the return of his long-lost son, Alexander, and the rescue of his daughter, Rosella, from the terrible dragon, old King Graham decides it's time to pass on his adventurer's hat to younger blood."#message 2 "He flings the battered hat towards his children while his wife, Queen Valanice, proudly looks on."#message 3 "The hat arches through the air."#message 4 "King Graham experiences a terrible squeezing pain in his chest."#message 5 "\"Help me,\" he rasps."#message 6 "The adventurer's hat lies, unclaimed, upon the floor...forgotten."#message 7 "King Graham lies weakly in bed, Father Death hovering near."#message 8 "Grief suddenly overwhelming her, Rosella runs from the room."#message 9 "\"Oh, Father!\" she sobs. \"You're still young; you should have many years ahead of you! Oh, I wish I could help you, Father!\""#message 10 "Rosella looks up but sees no one. \"Who's speaking to me?\""#message 11 "Rosella sees an image in the mirror. \"Wh-who are you?\" she queries."#message 12 "\"I am the fairy, Genesta. In my land of Tamir there is a remarkable tree. This tiny tree needs one hundred years to bear a single fruit.\""#message 13 "Rosella is much heartened by this news! \"Where is the land of Tamir?\""#message 14 "Genesta smiles. \"Tamir is very far away. But with my magic, I can bring you here.\""#message 15 "Rosella senses that there is more to the story. \"But, I suppose there are some problems?\""#message 16 "Again, Genesta smiles. \"Yes, you are correct, Rosella. If you are willing to come to Tamir I will explain the situation.\""#message 17 "Confused, Rosella says, \"I don't know! What if I can't help you or find the tree?\""#message 18 "Genesta pleads, \"You must decide NOW, Rosella. My powers are growing weaker by the minute.\""#message 19 "Now, the fairy is but a faint glimmer, and her voice barely audible. \"If you care for your father, say `yes' now!...\" And suddenly she's gone."#message 20 "\"YES!!\""#message 92 "\"Do you really mean that?\" a soft voice asks."#message 102 "\"I am,\" the voice says. \"Look in the magic mirror.\""#message 120 "\"But, this is no ordinary fruit; for if a person were to eat it, one would find that good health and well-being would be theirs for many years.\""#message 160 "\"However, once I bring you here, I can't send you back; you will have to help me first.\""#message 200 "Debug0"#message 201 "Debug1"#message 202 "Debug2"#message 203 "Suddenly...!"#message 204 "Debug4"#message 205 "Debug5"#message 206 "Debug6"