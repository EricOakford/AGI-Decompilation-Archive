#define aMouth o3   [ can be either Rosella's or Genesta's #define aEyes   o4#define aTear   o5#define roomScript  v220#define roomTimer   v221#define mouthCycles v222#define eyeTimer    v223#define thePic      v224#define tearCycles  v225#define eyeCycles   v226#define roomScriptDone  f220#define eyesBlinked f221#define tearUp  f223#define tearMoved   f224#define musicDone   f226program.control();status.line.off();if (newRoom)  {  thePic = 75;  load.pic(thePic);  draw.pic(thePic);  discard.pic(thePic);  load.view(vTalkingHeads);  if (!isset(f68))    {    add.to.pic(vTalkingHeads, 0, 0, 76, 101, 10, 1);    set.view(aMouth, vTalkingHeads);    animate.obj(aMouth);    position(aMouth, 94, 77);    set.loop(aMouth, 4);    fix.loop(aMouth);    set.priority(aMouth, 15);    mouthCycles = 3;    cycle.time(aMouth, mouthCycles);    draw(aMouth);    set.view(aEyes, vTalkingHeads);    animate.obj(aEyes);    position(aEyes, 90, 47);    set.loop(aEyes, 1);    fix.loop(aEyes);    set.cel(aEyes, 0);    set.priority(aEyes, 15);    draw(aEyes);    stop.cycling(aEyes);    set.view(aTear, vTalkingHeads);    animate.obj(aTear);    position(aTear, 104, 50);    set.loop(aTear, 2);    fix.loop(aTear);    set.cel(aTear, 0);    set.priority(aTear, 15);    }  else    {    add.to.pic(vTalkingHeads, 0, 1, 27, 101, 10, 1);    set.view(aMouth, vTalkingHeads);    animate.obj(aMouth);    position(aMouth, 44, 76);    set.loop(aMouth, 6);    set.priority(aMouth, 15);    mouthCycles = 3;    cycle.time(aMouth, mouthCycles);    draw(aMouth);    set.view(aEyes, vTalkingHeads);    animate.obj(aEyes);    position(aEyes, 41, 45);    set.loop(aEyes, 5);    set.cel(aEyes, 0);    set.priority(aEyes, 15);    draw(aEyes);    stop.cycling(aEyes);    }  roomScript = 0;  set(roomScriptDone);  roomTimer = 0;  reset(f222);  reset(tearUp);  reset(tearMoved);  reset(eyesBlinked);  eyeTimer = 0;  show.pic();  return();  }if ((aSecondPassed) && (!eyesBlinked))  {  random(1, 5, eyeTimer);  if (eyeTimer == 1)    {    eyeCycles = 2;    cycle.time(aEyes, eyeCycles);    end.of.loop(aEyes, eyesBlinked);    }  }if (eyesBlinked)  {  set.cel(aEyes, 0);  reset(eyesBlinked);  }if ((roomTimer > 0) && (aSecondPassed))  {  --roomTimer;  if ((isset(f222)) && (roomTimer == 2))    {    stop.update(aMouth);    set.cel(aMouth, 2);    force.update(aMouth);    cycle.time(aEyes, eyeCycles);    end.of.loop(aEyes, tearUp);    tearCycles = 8;    draw(aTear);    cycle.time(aTear, tearCycles);    move.obj(aTear, 103, 76, 1, tearMoved);    }  if (roomTimer <= 0)    {    close.window();    set(roomScriptDone);    }  }if ((roomScriptDone) && (!isset(f68)))  {  reset(roomScriptDone);  ++roomScript;  if (roomScript == 1)    {    load.sound(Sound76);    sound(Sound76, musicDone);    set(leaveWindow);    roomTimer = 17;    if (isset(f225))      {      print.at("Genesta looks sadder than ever. \"You're wrong, Rosella. You "               "see, I'm losing my magical powers. Yesterday as I was strolling "               "through the woods, Lolotte, the evil fairy, caught me unawares "               "and stole my magic talisman.\"", 15, 2, 37);      }    else      {      print.at("Genesta looks sadder than ever. \"You're wrong, Rosella. You "               "see, I'm losing my magical powers. Yesterday as I was strolling "               "through the woods, Lolotte, the evil fairy, caught me unawares "               "and stole my magic talisman.\"", 13, 2, 37);      }    }  if (roomScript == 2)    {    set(leaveWindow);    set(f222);    roomTimer = 18;    if (isset(f225))      {      print.at("The fairy sighs, \"She yanked it from my neck and raced away "               "screeching with laughter. Immediately I felt my powers "               "diminishing and my body weakening. I will die in 24 hours if my "               "talisman is not returned.\"", 16, 2, 38);      }    else      {      print.at("The fairy sighs, \"She yanked it from my neck and raced away "               "screeching with laughter. Immediately I felt my powers "               "diminishing and my body weakening. I will die in 24 hours if my "               "talisman is not returned.\"", 14, 2, 38);      }    }  if (roomScript == 3)    {    close.window();    set(f68);    new.room(Logic78);    }  }if ((roomScriptDone) && (isset(f68)))  {  reset(roomScriptDone);  ++roomScript;  if (roomScript == 1)    {    load.sound(Sound78);    sound(Sound78, musicDone);    set(leaveWindow);    roomTimer = 8;    if (isset(f225))      {      print.at("Suddenly, Rosella remembers the tiny tree. \"Can you tell me "               "where to find the magic fruit?\"", 17, 5, 33);      }    else      {      print.at("Suddenly, Rosella remembers the tiny tree. \"Can you tell me "               "where to find the magic fruit?\"", 15, 5, 33);      }    }  if (roomScript == 2)    {    stop.cycling(aMouth);    set.cel(aMouth, 5);    set(leaveWindow);    roomTimer = 13;    if (isset(f225))      {      print.at("Remorsefully, Genesta looks at Rosella. \"It will not be easy "               "to reach the tree. It grows on a tiny island within a vast "               "swamp on the other side of the great mountains.\"", 16, 4, 35);      }    else      {      print.at("Remorsefully, Genesta looks at Rosella. \"It will not be easy "               "to reach the tree. It grows on a tiny island within a vast "               "swamp on the other side of the great mountains.\"", 14, 4, 35);      }    }  if (roomScript == 3)    {    start.cycling(aMouth);    set(leaveWindow);    roomTimer = 9;    if (isset(f225))      {      print.at("Bravely fighting back tears, Rosella says, \"I will help you in "               "any way I can, Genesta. How can I find Lolotte?\"", 16, 2, 38);      }    else      {      print.at("Bravely fighting back tears, Rosella says, \"I will help you in "               "any way I can, Genesta. How can I find Lolotte?\"", 14, 2, 38);      }    }  if (roomScript == 4)    {    new.room(Logic77);    }  }return();[ Messages#message 21 "The lovely fairy speaks. \"I am the fairy, Genesta. Welcome to Tamir!\""#message 22 "Rosella looks awestruck at the fairy. She is stunningly beautiful! But still there is a certain sadness to her."#message 23 "Genesta looks sadder than ever. \"You're wrong, Rosella. You see, I'm losing my magical powers. Yesterday as I was strolling through the woods, Lolotte, the evil fairy, caught me unawares and stole my magic talisman.\""#message 24 "The fairy sighs, \"She yanked it from my neck and raced away screeching with laughter. Immediately I felt my powers diminishing and my body weakening. I will die in 24 hours if my talisman is not returned.\""#message 25 "Intently, Genesta looks at Rosella. \"Lolotte is very evil and will use the talisman to bring more evil to Tamir. Now I fear it will contaminate my whole country!\""#message 26 "Rosella is unsure as to what SHE can do. Meekly, she asks, \"I want to help you, but how?\""#message 27 "\"You can do more than you think, Rosella,\" Genesta assures her. \"I believe you will be able to penetrate Lolotte's domain.\""#message 28 "Suddenly, Rosella remembers the tiny tree. \"Can you tell me where to find the magic fruit?\""#message 29 "Remorsefully, Genesta looks at Rosella. \"It will not be easy to reach the tree. It grows on a tiny island within a vast swamp on the other side of the great mountains.\""#message 30 "Bravely fighting back tears, Rosella says, \"I will help you in any way I can, Genesta. How can I find Lolotte?\""#message 31 "The beautiful fairy points eastward. \"Lolotte's castle overlooks Tamir from the great mountains.\""#message 32 "Genesta looks weaker as she says, \"There is not much more I can do, Rosella. As it is, it will be difficult for me to fly home again.\""#message 33 "\"One thing I must do for you, though. I shall disguise you as a peasant girl so as not to attract attention.\""#message 34 "\"Th-thank-you, Genesta...I think,\" Rosella stammers."#message 35 "\"It will be better for you,\" the fairy says. \"Well, I must be off while I can still fly. I KNOW you can do it!\""#message 36 "\"Good-bye, good luck.\""#message 37 "Well, you're on your own, Rosella."#message 200 "Debug0"#message 201 "Debug1"#message 202 "Debug2"#message 204 "Debug4"#message 205 "Debug5"#message 206 "Debug6"#message 220 "Finally, Rosella speaks. \"I know you would like me to help you in some way, but I don't know how I could help a fairy.\""#message 250 "\"Further, I can not send you home without my talisman.\""