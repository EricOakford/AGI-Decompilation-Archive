#define a.snake o3  [ is also a horse#define snake.in.room f31#define horse.in.room   f32#define horse.left  f33#define kill.ego    f34#define snake.strikes   f35#define horse.leaves    f36#define asked.bridle    f37if (newRoom)  {  load.logics(lgc.carpet);  load.logics(lgc.cliff);  if ((has("Oil Lamp") ||       has("Carpet")))    {    load.view(View65);    load.view(View98);    }  load.view(View66);  load.view(View46);  load.view(View47);  load.view(View44);  load.view(View45);  load.view(View91);  load.view(View8);  load.pic(currentRoom);  draw.pic(currentRoom);  call(lgc.carpet);  call(lgc.cliff);  animate.obj(a.snake);  work = 3;  cycle.time(a.snake, work);  ignore.horizon(a.snake);  position(a.snake, 115, 100);  if (!flying.to.sky)    {    get.posn(ego, work.2, work.3);    if (work.3 < 50)      {      work.3 = 50;      }    else      {      if (work.3 > 148)        {        work.3 = 148;        }      }    position.v(ego, work.2, work.3);    }  draw(ego);  if (!killed.snake && !snake.to.horse && !horse.gone)    {    set.view(a.snake, View44);    set(snake.in.room);    }  else    {    if (killed.snake)      {      ignore.objs(ego);      set.view(a.snake, View66);      set.priority(a.snake, 5);      }    else      {      if (snake.to.horse && !horse.gone)        {        set.view(a.snake, View46);        set(horse.in.room);        }      }    }  if (!horse.gone)    {    draw(a.snake);    }  show.pic();  if (!killed.snake && !snake.to.horse && !horse.gone)    {    print("Look out! There is a poisonous viper blocking your path!");    }  }if (said("check out", "snake"))  {  if (snake.in.room)    {    print("The snake appears to be about ten feet long. It is coiled and ready "          "to strike.");    }  else    {    if (killed.snake)      {      print("The huge snake is deceased.");      }    else      {      print("There is no snake here!");      }    }  }if (snake.in.room && !snake.strikes && !flying.to.sky && !ego.fell &&     posn(ego, 100, 80, 111, 115))  {  set(snake.strikes);  set(snakeInAction);  set.view(a.snake, View45);  end.of.loop(a.snake, kill.ego);  }if (kill.ego)  {  reset(kill.ego);  set.view(ego, View91);  print("The snake has struck you dead.");  set(certain.death);  }if ((!haveInput || haveMatch || snake.strikes))  {  goto(Label2);  }if (!horse.in.room &&     (said("speak", "snake") ||     said("hello", "anyword") ||     said("kiss", "snake") ||     said("say", "hello")))  {  if (snake.in.room)    {    print("SSSsssssss! SSssstay away or I will ssssssstrike!");    }  else    {    if (killed.snake)      {      print("The huge snake is deceased.");      }    else      {      print("There is no snake here!");      }    }  }if (!snake.to.horse &&     (said("acquire", "snake") ||     said("capture", "snake")))  {  if (snake.in.room)    {    print("Are you joking!");    }  else    {    print("Why would you want a dead snake? Ugh!!");    }  }if (snake.in.room &&     (said("feed", "snake") ||     said("feed", "anyword", "snake")))  {  print("The serpent only wants to eat YOU!");  }if (!haveMatch && snake.in.room &&     (said("feed", "anyword") ||     said("give", "anyword")))  {  print("The snake has no use for it. He is interested in only one thing. "        "Getting rid of YOU!");  }if (said("kill", "snake"))  {  if (!posn(ego, 71, 72, 107, 120))    {    print("You are too far away.");    }  else    {    if (snake.in.room)      {      if (has("Sword"))        {        ignore.objs(ego);        print("Brandishing the sharp sword, you quickly slash the viper into "              "ribbons.");        set(killed.snake);        reset(snake.in.room);        set.priority(a.snake, 5);        set.view(a.snake, View66);        currentScore  += 2;        }      else        {        print("This is a very large snake. You don't have any weapons strong "              "enough to kill it.");        }      }    else      {      print("The huge snake is deceased.");      }    }  }if (asked.bridle &&     said("snake"))  {  goto(Label1);  }reset(asked.bridle);Label1:if ((said("cast", "bridle", "snake") ||     said("drop", "bridle", "snake") ||     asked.bridle))  {  reset(asked.bridle);  if (!posn(ego, 71, 72, 137, 120))    {    print("You are too far away.");    }  else    {    if (snake.in.room)      {      if (has("Bridle"))        {        drop("Bridle");        currentScore  += 5;        set.view(a.snake, View46);        reset(snake.in.room);        set(snake.to.horse);        set(horse.in.room);        print("You toss the leather bridle onto the coiled snake. Instantly, "              "there stands before you not a snake, but a beautiful winged "              "horse wearing the bridle!");        }      else        {        print("You don't have it.");        }      }    else      {      if (has("Bridle"))        {        print("You put the bridle on the dead snake. Nothing happens. You pick "              "the bridle up again.");        }      else        {        print("The huge snake is deceased.");        }      }    }  }else  {  if (said("cast", "bridle"))    {    print("Where do you want to throw the bridle?");    set(asked.bridle);    }  }if (!horse.in.room)  {  goto(Label2);  }if (horse.gone &&     (said("anyword", "flying horse") ||     said("anyword", "anyword", "flying horse")))  {  print("The horse is flying away, and pays no attention to you.");  }else  {  if (said("check out", "flying horse"))    {    print("This is a handsome white horse! It has beautiful wings of delicate "          "white feathers. The leather bridle is around the winged horse's "          "head.");    }  if (said("speak", "flying horse"))    {    print("\"Thank you, kind sir, for saving me. An evil enchanter turned me "          "into a snake when I refused to be his steed. To repay you, here is a "          "magic sugar cube that will guard against poisonous brambles.\"");    get("Sugar Cube");    currentScore  += 2;    set(horse.gone);    set.priority(a.snake, 15);    ignore.objs(a.snake);    work = 2;    step.size(a.snake, work);    set.view(a.snake, View47);    move.obj(a.snake, 115, 60, 0, horse.leaves);    }  if ((said("get on", "flying horse") ||       said("sit", "flying horse")))    {    print("The winged horse has a very independent nature. It doesn't want a "          "rider on its back.");    }  if ((said("acquire", "flying horse") ||       said("capture", "flying horse")))    {    print("The white horse is much too big and strong for you to hold it.");    }  if (said("kill", "flying horse"))    {    print("Why would you want to kill a beautiful horse like that?");    }  if ((said("feed", "flying horse") ||       said("feed", "anyword", "flying horse")))    {    print("The flying horse is not particularly hungry, thank you.");    }  if (said("pat", "flying horse"))    {    print("The beautiful white horse lets you stroke its velvety soft nose.");    }  if ((said("hello", "anyword") ||       said("say", "hello")))    {    print("The flying horse bobs its head up and down in greeting.");    }  }Label2:if (edgeEgoHit == LEFT_EDGE)  {  set.view(ego, View0);  new.room(Logic55); [ ##LE001##  }if (edgeEgoHit == RIGHT_EDGE)  {  new.room(Logic57); [ ##LE002##  }if (horse.left)  {  reset(horse.left);  reset(horse.in.room);  erase(a.snake);  }if (horse.leaves)  {  reset(horse.leaves);  move.obj(a.snake, 0, 60, 0, horse.left);  }call(lgc.carpet);call(lgc.cliff);return();[ Messages#message 1 "Look out! There is a poisonous viper blocking your path!"#message 2 "The snake appears to be about ten feet long. It is coiled and ready to strike."#message 3 "The huge snake is deceased."#message 4 "SSSsssssss! SSssstay away or I will ssssssstrike!"#message 5 "Are you joking!"#message 6 "The serpent only wants to eat YOU!"#message 7 "Brandishing the sharp sword, you quickly slash the viper into ribbons."#message 8 "This is a very large snake. You don't have any weapons strong enough to kill it."#message 9 "You toss the leather bridle onto the coiled snake. Instantly, there stands before you not a snake, but a beautiful winged horse wearing the bridle!"#message 10 "Where do you want to throw the bridle?"#message 11 "You don't have it."#message 12 "This is a handsome white horse! It has beautiful wings of delicate white feathers. The leather bridle is around the winged horse's head."#message 13 "\"Thank you, kind sir, for saving me. An evil enchanter turned me into a snake when I refused to be his steed. To repay you, here is a magic sugar cube that will guard against poisonous brambles.\""#message 14 "The winged horse has a very independent nature. It doesn't want a rider on its back."#message 15 "The white horse is much too big and strong for you to hold it."#message 16 "Why would you want to kill a beautiful horse like that?"#message 17 "The flying horse is not particularly hungry, thank you."#message 18 "The beautiful white horse lets you stroke its velvety soft nose."#message 19 "The flying horse bobs its head up and down in greeting."#message 20 "The snake has struck you dead."#message 21 "There is no snake here!"#message 22 "You are too far away."#message 23 "The snake has no use for it. He is interested in only one thing. Getting rid of YOU!"#message 24 "Why would you want a dead snake? Ugh!!"#message 25 "You put the bridle on the dead snake. Nothing happens. You pick the bridle up again."#message 26 "The horse is flying away, and pays no attention to you."