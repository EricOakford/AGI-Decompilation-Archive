#define aBand   o1#define aSlotsAlien o2#define aJanitorDroid   o3#define aBartender  o4#define aEgo    o5#define slotsTimer      v30#define bartenderTimer  v31#define slotsDeathTimer v32#define janitorDroidTimer   v34#define barToX  v35#define barToY  v36#define barWork  v37#define janitorDroidState   v38#define barStep v44#define nextRoomTimer v45#define msgTimer        v46#define slotsAlienMoved f30#define janitorDroidMoved   f31#define bartenderMoved  f32#define mySoundDone   f37#define egoMoved    f42if (newDemoRoom)  {  set.horizon(10);  delta.y = 0;  animate.obj(aBand);  set.view(aBand, vBarBand);  set.loop(aBand, 0);  position(aBand, 68, 105);  draw(aBand);  stop.cycling(aBand);  animate.obj(aSlotsAlien);  set.view(aSlotsAlien, vSlotsAlien);  ignore.blocks(aSlotsAlien);  set.loop(aSlotsAlien, 0);  set.cel(aSlotsAlien, 0);  set(f40);  position(aSlotsAlien, 122, 142);  draw(aSlotsAlien);  stop.cycling(aSlotsAlien);  animate.obj(aJanitorDroid);  set.view(aJanitorDroid, vJanitorDroid);  set.loop(aJanitorDroid, 0);  fix.loop(aJanitorDroid);  ignore.blocks(aJanitorDroid);  set.cel(aJanitorDroid, 0);  position(aJanitorDroid, 149, 167);  draw(aJanitorDroid);  stop.update(aJanitorDroid);  animate.obj(aBartender);  set.view(aBartender, vBartender);  set.loop(aBartender, 3);  position(aBartender, 71, 163);  set.priority(aBartender, 15);  draw(aBartender);  stop.cycling(aBartender);  animate.obj(aEgo);  set.view(aEgo, vEgoSpacesuit);  position(aEgo, 1, 127);  draw(aEgo);  move.obj(aEgo, 30, 140, 0, egoMoved);  add.to.pic(vBarAliens, 0, 0, 53, 152, 15, 4);  add.to.pic(vBarAliens, 0, 1, 93, 151, 15, 4);  add.to.pic(vBarAliens, 0, 2, 35, 161, 15, 4);  slotsTimer = 72;  slotsDeathTimer = 2;  v33 = 1;  start.cycling(aBand);  sound(mAlienBand, mySoundDone);  show.pic();  if (monitorType == MONO &&       machineType == PC)    {    clear.lines(2, 3, BLACK);    display(2, 1, "..and get acquainted with some darn\n interesting folks.");    }  else    {    clear.lines(22, 24, WHITE);    display(22, 1, "..and get acquainted with some darn\n interesting folks.");    }  bartenderTimer = 45;  barToX = 71;  barStep = 0;  barToY = 163;  }--nextRoomTimer;if (nextRoomTimer == 1)  {  nextRoom = rmAsteroidField;  }if (egoMoved)  {  reset(egoMoved);  stop.cycling(aEgo);  msgTimer = 27;  }--msgTimer;if (msgTimer == 1)  {  if (monitorType == MONO &&       machineType == PC)    {    clear.lines(2, 4, BLACK);    display(2, 1, "So step up to the bar and have a cool\n one and enjoy some "            "of the best\n entertainment in the universe!");    }  else    {    clear.lines(22, 24, WHITE);    display(22, 1, "So step up to the bar and have a cool\n one and enjoy some "            "of the best\n entertainment in the universe!");    }  nextRoomTimer = 90;  }if (mySoundDone)  {  sound(mAlienBand, mySoundDone);  }--bartenderTimer;if (bartenderTimer == 1)  {  if (barToX != 100 &&       v39 > 0 &&       !isset(lf8) &&       v39 != 3)    {    barWork = 100;    }  else    {Label1:    reset(f41);    random(1, 4, barWork);    if (barWork == 1)      {      barWork = 48;      }    else      {      if (barWork == 2)        {        barWork = 53;        }      else        {        if (barWork == 3)          {          barWork = 71;          }        else          {          if (barWork == 4)            {            barWork = 90;            }          }        }      }    if (barWork == barToX)      {      goto(Label1);      }    }  start.cycling(aBartender);  barToX = barWork;  move.obj.v(aBartender, barToX, barToY, barStep, bartenderMoved);  }if (bartenderMoved)  {  reset(bartenderMoved);  stop.cycling(aBartender);  random(45, 100, bartenderTimer);  if (barToX == 48)    {    set.loop(aBartender, 1);    }  else    {    if (barToX == 71)      {      random(1, 3, work);      if (work == 2)        {        set.loop(aBartender, 2);        }      else        {        set.loop(aBartender, 3);        }      }    else      {      if (barToX == 100)        {        if (v39 == 2)          {          set.loop(aBartender, 0);          set(f33);          }        if (v39 == 1)          {          set.loop(aBartender, 3);          set(f33);          }        v39 = 3;        }      else        {        set.loop(aBartender, 3);        }      }    }  }--slotsTimer;if (slotsTimer == 1)  {  start.cycling(aSlotsAlien);  end.of.loop(aSlotsAlien, slotsAlienMoved);  --slotsDeathTimer;  if (slotsDeathTimer == 1)    {    set.loop(aSlotsAlien, 1);    end.of.loop(aSlotsAlien, slotsAlienMoved);    ignore.objs(aSlotsAlien);    v33 = 2;    }  }if (slotsAlienMoved)  {  reset(slotsAlienMoved);  stop.cycling(aSlotsAlien);  if (v33 == 2)    {    v33 = 3;    janitorDroidTimer = 27;    }  else    {    slotsTimer = 54;    }  }--janitorDroidTimer;if (janitorDroidTimer == 1)  {  if (janitorDroidState == 4)    {    release.loop(aJanitorDroid);    set.loop(aJanitorDroid, 1);    fix.loop(aJanitorDroid);    stop.cycling(aJanitorDroid);    erase(aSlotsAlien);    move.obj(aJanitorDroid, 104, 141, 0, janitorDroidMoved);    janitorDroidState = 5;    reset(f40);    }  if (janitorDroidState <= 0)    {    janitorDroidState = 1;    start.update(aJanitorDroid);    stop.cycling(aJanitorDroid);    move.obj(aJanitorDroid, 104, 146, 0, janitorDroidMoved);    }  }if (janitorDroidMoved)  {  reset(janitorDroidMoved);  if (janitorDroidState == 8)    {    stop.update(aJanitorDroid);    janitorDroidState = 0;    }  if (janitorDroidState == 7)    {    move.obj(aJanitorDroid, 141, 167, 0, janitorDroidMoved);    janitorDroidState = 8;    }  if (janitorDroidState == 6)    {    move.obj(aJanitorDroid, 139, 146, 0, janitorDroidMoved);    janitorDroidState = 7;    }  if (janitorDroidState == 5)    {    move.obj(aJanitorDroid, 104, 146, 0, janitorDroidMoved);    janitorDroidState = 6;    }  if (janitorDroidState == 3)    {    release.loop(aJanitorDroid);    set.loop(aJanitorDroid, 2);    start.cycling(aJanitorDroid);    janitorDroidTimer = 36;    janitorDroidState = 4;    }  if (janitorDroidState == 2)    {    move.obj(aJanitorDroid, 108, 141, 0, janitorDroidMoved);    janitorDroidState = 3;    }  if (janitorDroidState == 1)    {    ignore.objs(aSlotsAlien);    move.obj(aJanitorDroid, 104, 141, 0, janitorDroidMoved);    janitorDroidState = 2;    }  }return();[ Messages#message 1 "So step up to the bar and have a cool\n one and enjoy some of the best\n entertainment in the universe!"#message 2 "..and get acquainted with some darn\n interesting folks."