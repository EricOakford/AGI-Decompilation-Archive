#define a.door  o3#define door.opens  f31#define ego.lands   f32if (newRoom)  {  load.sound(Sound21);  load.view(View65);  load.view(View98);  load.view(View114);  load.logics(lgc.trees);  load.logics(lgc.enchanter);  load.pic(currentRoom);  call(lgc.enchanter);  draw.pic(currentRoom);  animate.obj(a.door);  set.view(a.door, View114);  set.cel(a.door, 0);  set.priority(a.door, 10);  position(a.door, 94, 114);  ignore.blocks(a.door);  ignore.objs(ego);  if (previousRoom == 68)    {    set.loop(ego, 1);    position(ego, 87, 117);    }  else    {    if (previousRoom == 105)      {      set.priority(ego, 15);      work = 2;      cycle.time(ego, work);      step.size(ego, work);      set.view(ego, View98);      position(ego, 45, 40);      move.obj(ego, 45, 70, 0, ego.lands);      }    }  draw(ego);  draw(a.door);  stop.cycling(a.door);  if (read.inscription.2)    {    if (got.lamp)      {      reset(store.is.open);      }    else      {      set(store.is.open);      }    }  show.pic();  }if ((has("Carpet") ||     has("Oil Lamp")))  {  if (right.posn(ego, 85, 70, 122, 106))    {    start.update(a.door);    stop.cycling(a.door);    stop.motion(a.door);    set(f30);    }  else    {    if (isset(f30))      {      reset(f30);      stop.update(a.door);      }    }  }if (!haveInput)  {  goto(Label2);  }if ((said("check out", "antique shop") ||     said("check out") ||     said("check out", "area")))  {  print("This is a quaint little antique shop. There is a sign in the window.");  }if ((said("check out", "sign") ||     said("read", "sign")))  {  if (store.is.open)    {    print("The sign says \"open.\"");    }  else    {    print("The sign says \"closed.\"");    }  }if ((said("check out", "window") ||     said("look in", "window")))  {  if (posn(ego, 80, 122, 120, 145))    {    print("You can see inside when you look through the window. It is hard to "          "tell details, though.");    }  else    {    print("You are too far away.");    }  }if (said("check out", "door"))  {  print("The door to the antique store is closed.");  }if ((ego.flying ||     genie.delay != 0))  {  goto(Label1);  }if (said("open", "door"))  {  if (!store.is.open)    {    print("The antique store is closed. You cannot enter it.");    }  else    {    if (posn(ego, 86, 109, 98, 122))      {      sound(Sound21, done);      end.of.loop(a.door, door.opens);      }    else      {      print("You are too far away.");      }    }  }if ((said("knock", "door") ||     said("knock")))  {  if (!store.is.open)    {    print("You rap loudly on the door but get no reply.");    }  else    {    if (posn(ego, 86, 109, 98, 122))      {      print("You rap loudly on the door and hear a cheery, \"Come on in.\"");      }    else      {      print("You are too far away.");      }    }  }if (said("unlock", "door"))  {  if (posn(ego, 86, 109, 98, 122))    {    print("You can't unlock the door. You don't have a key that fits.");    }  else    {    print("You are too far away.");    }  }Label1:if ((said("break", "window") ||     said("break", "door")))  {  print("You could get caught for \"breaking and entering.\" That would not be "        "wise.");  }Label2:if (door.opens)  {  reset(door.opens);  new.room(Logic68); [ ##LE001##  }if (ego.lands)  {  observe.objs(ego);  release.priority(ego);  set.view(ego, View0);  reset(ego.lands);  reset(ego.flying);  work = 1;  cycle.time(ego, work);  step.size(ego, work);  }if (edgeEgoHit == TOP_EDGE)  {  new.room(Logic13); [ ##LE002##  }if (edgeEgoHit == RIGHT_EDGE)  {  new.room(Logic21); [ ##LE003##  }if (edgeEgoHit == LEFT_EDGE)  {  new.room(Logic19); [ ##LE004##  }if (edgeEgoHit == BOTTOM_EDGE)  {  new.room(Logic27); [ ##LE005##  }call(lgc.trees);call(lgc.enchanter);return();[ Messages#message 7 "This is a quaint little antique shop. There is a sign in the window."#message 8 "The sign says \"closed.\""#message 9 "The sign says \"open.\""#message 10 "You can see inside when you look through the window. It is hard to tell details, though."#message 11 "The door to the antique store is closed."#message 12 "The antique store is closed. You cannot enter it."#message 13 "You could get caught for \"breaking and entering.\" That would not be wise."#message 14 "You rap loudly on the door but get no reply."#message 15 "You rap loudly on the door and hear a cheery, \"Come on in.\""#message 16 "You are too far away."#message 17 "You can't unlock the door. You don't have a key that fits."