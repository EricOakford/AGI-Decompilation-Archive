#define door.opens  f31#define a.door  o2#define a.mailbox   o3if (newRoom)  {  load.pic(currentRoom);  load.sound(Sound21);  load.view(View4);  load.view(View5);  if ((has("Oil Lamp") ||       has("Carpet")))    {    load.view(View65);    load.view(View98);    }  load.logics(lgc.red);  load.logics(lgc.trees);  draw.pic(currentRoom);  call(lgc.red);  animate.obj(a.door);  animate.obj(a.mailbox);  set.view(a.door, View5);  set.cel(a.door, 0);  set.view(a.mailbox, View4);  ignore.blocks(a.mailbox);  ignore.blocks(a.door);  position(a.door, 69, 107);  position(a.mailbox, 9, 110);  set.priority(a.mailbox, 11);  if (previousRoom == 70)    {    position(ego, 73, 110);    }  if (mailbox.open)    {    set.cel(a.mailbox, 3);    }  else    {    set.cel(a.mailbox, 0);    }  if (previousRoom == 4 &&       posn(ego, 152, 125, 159, 140))    {    position(ego, 158, 143);    }  if (previousRoom == 4 &&       posn(ego, 152, 80, 159, 98))    {    position(ego, 158, 76);    }  draw(ego);  draw(a.mailbox);  draw(a.door);  stop.cycling(a.door);  stop.cycling(a.mailbox);  stop.update(a.door);  stop.update(a.mailbox);  show.pic();  }get.posn(ego, work.2, work.3);if (work.2 > 12)  {  observe.blocks(ego);  observe.objs(ego);  }else  {  if (posn(ego, 0, 117, 17, 124) &&       mailbox.open)    {    observe.blocks(ego);    }  else    {    ignore.blocks(ego);    }  ignore.objs(ego);  }if (!haveInput)  {  goto(Label3);  }if ((said("check out", "antique shop") ||     said("check out", "area") ||     said("check out")))  {  print("The cozy cottage is located in a thick wood. A patio shades the front "        "entrance and flowers adorn a window box.");  }if (said("check out", "door"))  {  print("The door of the little cottage is closed.");  }if (said("check out", "box"))  {  print("The mailbox has the words Grandma's House on it.");  }if (said("acquire", "box"))  {  print("The mailbox is firmly attached to the post.");  }if ((said("check out", "window") ||     said("look in", "window")))  {  if (posn(ego, 30, 90, 65, 111))    {    print("You can see inside when you look through the window. It is hard to "          "see any detail, though.");    }  else    {    print("You are too far away.");    }  }if (!said("knock", "door"))  {  goto(Label1);  }distance(ego, a.door, work);if (work > 20)  {  print("You are too far away.");  }else  {  print("You knock loudly on the door and hear a muffled, \"Come in.\"");  }Label1:if ((ego.flying || genie.delay != 0))  {  goto(Label2);  }if (!said("open", "door"))  {  goto(Label2);  }distance(ego, a.door, work);if (work > 20)  {  print("You are too far away.");  }else  {  start.update(a.door);  end.of.loop(a.door, door.opens);  sound(Sound21, done);  }Label2:distance(ego, a.mailbox, work);if (work > 40 &&     (said("open", "box") ||     said("close", "box") ||     said("look in", "box")))  {  print("You are too far away.");  }if (said("look in", "box"))  {  if (mailbox.open)    {    if (mailbox.empty)      {      print("The mailbox is empty.");      }    else      {      print("There is a basket of goodies in the mailbox.");      }    }  else    {    print("The mailbox is closed. You cannot look in it.");    }  }if (said("acquire", "basket"))  {  if (mailbox.open)    {    if (mailbox.empty)      {      print("The mailbox is empty.");      }    else      {      get("Basket of Goodies");      currentScore  += 2;      set(mailbox.empty);      set(took.basket);      print("OK.");      }    }  else    {    print("Where do you think it could be?");    }  }if (said("open", "box"))  {  if (mailbox.open)    {    print("The mailbox is already open.");    }  else    {    if (!points.open.mailbox)      {      currentScore  += 1;      set(points.open.mailbox);      }    start.update(a.mailbox);    end.of.loop(a.mailbox, mailbox.opening);    }  }if (said("close", "box"))  {  if (mailbox.open)    {    reset(mailbox.open);    start.update(a.mailbox);    reverse.loop(a.mailbox, mailbox.closing);    }  else    {    print("The mailbox is already closed.");    }  }if ((said("break", "window") ||     said("break", "door")))  {  print("There is no need to do that. The door is unlocked.");  }if (said("check out", "fence"))  {  print("You see a low white fence.");  }if (said("anyword", "fence") &&     !said("enter", "fence") &&     !said("check out", "fence"))  {  print("You should do nothing with the fence.");  }if (said("anyword", "flower box"))  {  print("You see nothing special about the flower box.");  }Label3:if (mailbox.closing)  {  reset(mailbox.closing);  stop.update(a.mailbox);  }if (mailbox.opening)  {  set(mailbox.open);  reset(mailbox.opening);  stop.update(a.mailbox);  if (mailbox.empty)    {    print("When you open the mailbox you see that it is empty.");    }  else    {    print("Lo and behold, when you open the mailbox you see a basket of "          "goodies!");    }  }if (door.opens)  {  new.room(Logic70); [ ##LE001##  }if (edgeEgoHit == TOP_EDGE)  {  new.room(Logic45); [ ##LE002##  }if (edgeEgoHit == RIGHT_EDGE)  {  new.room(Logic4); [ ##LE003##  }if (edgeEgoHit == LEFT_EDGE)  {  new.room(Logic2); [ ##LE004##  }if (edgeEgoHit == BOTTOM_EDGE)  {  new.room(Logic10); [ ##LE005##  }call(lgc.red);call(lgc.trees);return();[ Messages#message 1 "The cozy cottage is located in a thick wood. A patio shades the front entrance and flowers adorn a window box."#message 2 "The door of the little cottage is closed."#message 3 "The mailbox has the words Grandma's House on it."#message 4 "You can see inside when you look through the window. It is hard to see any detail, though."#message 5 "You knock loudly on the door and hear a muffled, \"Come in.\""#message 6 "Lo and behold, when you open the mailbox you see a basket of goodies!"#message 7 "When you open the mailbox you see that it is empty."#message 8 "The mailbox is empty."#message 9 "The mailbox is already open."#message 10 "The mailbox is already closed."#message 11 "There is no need to do that. The door is unlocked."#message 12 "You are too far away."#message 13 "OK."#message 14 "You should do nothing with the fence."#message 15 "You see a low white fence."#message 16 "The mailbox is firmly attached to the post."#message 17 "Where do you think it could be?"#message 18 "You already have it."#message 19 "The mailbox is closed. You cannot look in it."#message 20 "The mailbox is empty."#message 21 "There is a basket of goodies in the mailbox."#message 22 "You see nothing special about the flower box."