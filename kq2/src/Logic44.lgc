#define a.batmobile o3#define going.left   f31#define going.right   f32#define going.out   f33#define batman.music  f34#define batman.gone f35#define batman.in.room  f36#define hag.suppressed  f37if (newRoom)  {  load.logics(lgc.trees);  load.sound(Sound22);  if ((has("Oil Lamp") ||       has("Carpet")))    {    load.view(View65);    load.view(View98);    }  random(0, 255, work);  if ((work < 20 || death.music))    {    load.view(View27);    load.sound(m.batman.2);    set(batman.music);    set(batman.in.room);    set(hag.suppressed);    }  load.pic(currentRoom);  if (!hag.suppressed)    {    load.logics(lgc.hag);    call(lgc.hag);    }  draw.pic(currentRoom);  if (batman.music)    {    animate.obj(a.batmobile);    set.view(a.batmobile, View27);    position(a.batmobile, 120, 101);    work = 2;    step.size(a.batmobile, work);    cycle.time(a.batmobile, work);    set.cel(a.batmobile, 0);    draw(a.batmobile);    stop.cycling(a.batmobile);    move.obj(a.batmobile, 40, 101, 0, going.left);    }  if (previousRoom == 69)    {    position(ego, 124, 100);    }  draw(ego);  show.pic();  if (previousRoom == 69)    {    if (bird.state == 2 &&         has("Caged Nightingale"))      {      bird.state = 1;      print("As you leave the dark cave, you remove the cloth from the cage.");      sound(Sound22, done);      get("Cloth");      }    }  }if (batman.music && !batman.gone)  {  reset(batman.music);  sound(m.batman.2, batman.music);  }if (going.left)  {  reset(going.left);  start.cycling(a.batmobile);  end.of.loop(a.batmobile, going.out);  }if (going.out)  {  reset(going.out);  stop.cycling(a.batmobile);  move.obj(a.batmobile, 120, 101, 0, going.right);  }if (going.right)  {  set(batman.gone);  reset(going.right);  reset(batman.in.room);  erase(a.batmobile);  }if ((said("check out", "area") ||     said("check out") ||     said("check out", "area")))  {  print("This forbidding cave is the home of Hagatha, the wicked old hag. There "        "are human skulls on stakes at the entrance. This is not a reassuring "        "sign.");  }if (said("look in", "area"))  {  if (posn(ego, 90, 73, 159, 121))    {    print("You see nothing but darkness when you peer into the cave.");    }  else    {    print("You can't see into the cave from there.");    }  }if (said("check out", "skull"))  {  print("The skulls probably belong to unfortunate travelers who fell into "        "Hagatha's clutches. She has a taste for human flesh, you know.");  }if (said("acquire", "skull"))  {  print("Yecchhhhh! What a horrible thought! Why would you want to do such a "        "terrible thing?");  }if (batman.in.room &&     said("anyword", "batman"))  {  print("He must have gotten lost. I do not think he belongs in this story.");  }if (posn(ego, 125, 89, 126, 104))  {  new.room(Logic69); [ ##LE001##  }if (edgeEgoHit == TOP_EDGE)  {  new.room(Logic37); [ ##LE002##  }if (edgeEgoHit == LEFT_EDGE)  {  new.room(Logic43); [ ##LE003##  }if (edgeEgoHit == BOTTOM_EDGE)  {  new.room(Logic2); [ ##LE004##  }if (edgeEgoHit == RIGHT_EDGE)  {  new.room(Logic45); [ ##LE005##  }call(lgc.trees);if (!hag.suppressed)  {  call(lgc.hag);  }return();[ Messages#message 1 "This forbidding cave is the home of Hagatha, the wicked old hag. There are human skulls on stakes at the entrance. This is not a reassuring sign."#message 2 "The skulls probably belong to unfortunate travelers who fell into Hagatha's clutches. She has a taste for human flesh, you know."#message 3 "Yecchhhhh! What a horrible thought! Why would you want to do such a terrible thing?"#message 4 "He must have gotten lost. I do not think he belongs in this story."#message 5 "You see nothing but darkness when you peer into the cave."#message 6 "You can't see into the cave from there."#message 7 "As you leave the dark cave, you remove the cloth from the cage."