#define a.door  o2#define ask.if.read f35if (newRoom)  {  set.horizon(31);  load.view(View8);  load.view(View30);  load.view(View31);  load.view(View32);  if ((has("Oil Lamp") ||       has("Carpet")))    {    load.view(View65);    load.view(View98);    }  load.logics(lgc.mountainside);  load.logics(lgc.chasm);  load.pic(currentRoom);  draw.pic(currentRoom);  if (previousRoom == 35)    {    position(ego, 15, 32);    }  draw(ego);  animate.obj(a.door);  work = 3;  cycle.time(a.door, work);  ignore.blocks(a.door);  position(a.door, 85, 100);  if (!unlocked.door.1)    {    set.view(a.door, View30);    }  else    {    if (!unlocked.door.2)      {      set.view(a.door, View31);      }    else      {      set.view(a.door, View32);      }    }  set.cel(a.door, 0);  draw(a.door);  stop.update(a.door);  show.pic();  }if (!unlocked.door.1 &&     posn(ego, 54, 98, 84, 102))  {  ignore.objs(ego);  }else  {  observe.objs(ego);  }if (!haveInput)  {  goto(Label3);  }if (said("check out", "door"))  {  print("This is a magical door! If you can open it, the door will lead you to "        "your heart's desire. There is an inscription on the door.");  }if ((said("check out") ||     said("check out", "area")))  {  print("You are at the edge of the forest. There is a deep chasm to the west "        "and a towering cliff to the east.");  }if (ask.if.read && !said("y"))  {  reset(ask.if.read);  }distance(ego, a.door, work);if (work > 25)  {  if ((said("anyword", "door") ||       said("anyword", "key hole") ||       said("anyword", "inscription")))    {    print("You are too far away from the door.");    goto(Label3);    }  }get.posn(ego, work.2, work.3);if (work.3 < 100)  {  if ((said("anyword", "door") ||       said("anyword", "key hole") ||       said("anyword", "inscription")))    {    print("You are on the wrong side of the door to do that.");    goto(Label3);    }  }if (!has("Gold Key") &&     said("unlock", "door"))  {  print("You can't. You don't have the key.");  }if (said("knock", "door"))  {  print("You don't really expect someone to answer the door, do you?");  }if ((said("check out", "key hole") ||     said("look in", "key hole")))  {  print("You look through the keyhole and see nothing but a dazzling light.");  }if (unlocked.door.1 &&     said("close", "door"))  {  print("If you close the door, it will lock again. Why would you want to do "        "that?");  }if (said("break", "door"))  {  print("This is a magic door. It is impervious to damage.");  }if (unlocked.door.2)  {  goto(Label2);  }if (unlocked.door.1)  {  goto(Label1);  }if (!unlocked.door.1 &&     said("open", "door"))  {  print("The door is locked. You cannot open it, no matter how hard you try.");  }if (has("Gold Key") &&     said("unlock", "door"))  {  drop("Gold Key");  currentScore  += 7;  start.update(a.door);  set.view(a.door, View30);  end.of.loop(a.door, opened.door.1);  set(unlocked.door.1);  print("The key to the first door fits easily into the keyhole. You turn the "        "key and, PRESTO, the door opens, and the key disappears ... revealing "        "a second door with another inscription!");  }if (isset(ask.if.read) &&     said("y"))  {  print("The inscription reads: Whosoever chooses to seek the key for this door "        "will undoubtedly make a splash.");  set(read.inscription.1);  }if ((said("read", "inscription") ||     said("check out", "inscription") ||     said("read", "door")))  {  print("The inscription reads: Whosoever chooses to seek the key for this door "        "will undoubtedly make a splash.");  set(read.inscription.1);  }Label1:if (!unlocked.door.2 &&     said("open", "door"))  {  print("The second door is locked. You cannot open it, no matter how hard you "        "try.");  }if (has("Gold Key") &&     said("unlock", "door"))  {  drop("Gold Key");  currentScore  += 7;  start.update(a.door);  set.view(a.door, View31);  end.of.loop(a.door, opened.door.2);  set(unlocked.door.2);  print("The key to the second door fits easily into the keyhole. You turn the "        "key and, SHAZAM, the door opens, and the second gold key disappears "        "... revealing a third door with yet another inscription!");  }if (ask.if.read && said("y"))  {  print("The inscription reads: Whosoever chooses to seek the key for this door "        "should set their sights high.");  set(read.inscription.2);  }if ((said("read", "inscription") ||     said("check out", "inscription") ||     said("read", "door")))  {  set(read.inscription.2);  print("The inscription reads: Whosoever chooses to seek the key for this door "        "should set their sights high.");  }Label2:if (!unlocked.door.3 &&     said("open", "door"))  {  print("The third door is locked. You cannot open it no matter how hard you "        "try.");  }if (has("Gold Key") &&     !ego.flying &&     genie.delay == 0 &&     said("unlock", "door"))  {  drop("Gold Key");  currentScore  += 7;  start.update(a.door);  set.view(a.door, View32);  end.of.loop(a.door, opened.door.3);  set(unlocked.door.3);  print("The key to the third door fits easily into the keyhole. You turn the "        "key and, PRESTO, the door opens, and again the key disappears ... "        "revealing a world unlike any you've ever seen before!");  }if (ask.if.read && said("y"))  {  print("Whosoever chooses to seek the last key must have a stout heart.");  set(read.inscription.3);  }if ((said("read", "inscription") ||     said("check out", "inscription") ||     said("read", "door")))  {  print("Whosoever chooses to seek the last key must have a stout heart.");  set(read.inscription.3);  }Label3:if (opened.door.1)  {  reset(opened.door.1);  stop.update(a.door);  }if (opened.door.2)  {  reset(opened.door.2);  stop.update(a.door);  }if (opened.door.3)  {  reset(opened.door.3);  position(ego, 80, 80);  new.room(Logic80); [ ##LE001##  }if (edgeEgoHit == TOP_EDGE)  {  new.room(Logic35); [ ##LE002##  }if (edgeEgoHit == RIGHT_EDGE)  {  new.room(Logic42); [ ##LE003##  }if (edgeEgoHit == LEFT_EDGE)  {  new.room(Logic41); [ ##LE004##  }if (edgeEgoHit == BOTTOM_EDGE)  {  new.room(Logic49); [ ##LE005##  }call(lgc.mountainside);call(lgc.chasm);return();[ Messages#message 1 "This is a magical door! If you can open it, the door will lead you to your heart's desire. There is an inscription on the door."#message 2 "The door is locked. You cannot open it, no matter how hard you try."#message 3 "The key to the first door fits easily into the keyhole. You turn the key and, PRESTO, the door opens, and the key disappears ... revealing a second door with another inscription!"#message 4 "You can't. You don't have the key."#message 5 "Do you want to read the inscription?"#message 6 "The inscription reads: Whosoever chooses to seek the key for this door will undoubtedly make a splash."#message 7 "If you close the door, it will lock again. Why would you want to do that?"#message 8 "This is a magic door. It is impervious to damage."#message 9 "The second door is locked. You cannot open it, no matter how hard you try."#message 10 "The key to the second door fits easily into the keyhole. You turn the key and, SHAZAM, the door opens, and the second gold key disappears ... revealing a third door with yet another inscription!"#message 11 "The inscription reads: Whosoever chooses to seek the key for this door should set their sights high."#message 12 "The third door is locked. You cannot open it no matter how hard you try."#message 13 "The key to the third door fits easily into the keyhole. You turn the key and, PRESTO, the door opens, and again the key disappears ... revealing a world unlike any you've ever seen before!"#message 14 "Whosoever chooses to seek the last key must have a stout heart."#message 15 "You don't really expect someone to answer the door, do you?"#message 16 "You look through the keyhole and see nothing but a dazzling light."#message 17 "You are too far away from the door."#message 18 "You are on the wrong side of the door to do that."#message 19 "You are at the edge of the forest. There is a deep chasm to the west and a towering cliff to the east."