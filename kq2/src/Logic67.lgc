if (isset(newRoom))  {  load.view(View99);  load.view(View58);  v31 = 96;  load.pic(v31);  animate.obj(o4);  random(0, 255, work.3);  if (isset(death.music))    {    work.3 = 0;    }  if (work.3 < 128 &&       v92 != 2)    {    v92 = 1;    v91 = 0;    animate.obj(o3);    work = 2;    step.size(o3, work);    release.priority(o3);    load.view(View53);    load.view(View59);    load.view(View51);    load.view(View52);    load.view(View57);    load.view(View60);    set.view(o4, View57);    set.cel(o4, 0);    }  else    {    if (v92 != 2)      {      v92 = 0;      }    set.view(o4, View58);    if (v91 == 2)      {      set.cel(o4, 0);      }    else      {      set.cel(o4, 3);      v91 = 1;      }    }  position(ego, 132, 130);  if (isset(candle.lit))    {    v30 = 1;    reset(f162);    load.pic(currentRoom);    draw.pic(currentRoom);    discard.pic(currentRoom);    ignore.blocks(o4);    position(o4, 65, 95);    draw(o4);    stop.update(o4);    }  else    {    v30 = 0;    set(f162);    set.view(ego, View99);    draw.pic(v31);    set.priority(ego, 12);    set.priority(o3, 4);    set.priority(o4, 4);    }  draw(ego);  show.pic();  }if (v35 > 0)  {  discard.view(View60);  discard.view(View57);  discard.view(View52);  discard.view(View51);  discard.view(View59);  if (v35 == 6)    {    discard.view(View53);    }  v35 = 0;  }--v32;if (v92 == 1 &&     v32 == 0 &&     v91 == 1)  {  start.update(o4);  set.cel(o4, 0);  set.view(o4, View60);  work = 2;  cycle.time(o4, work);  end.of.loop(o4, f39);  v92 = 3;  print("Count Dracula is awake! Run before it's too late!");  }if (isset(f39))  {  reset(f39);  v34 = 2;  set.view(o4, View58);  set.cel(o4, 3);  set.view(o3, View51);  position(o3, 73, 107);  draw(o3);  set(lf8);  follow.ego(o3, 4, f34);  force.update(o4);  }if (isset(f34))  {  print("You are caught in Dracula's grasp! Saliva drips off the end of his "        "sharp fangs.");  reset(f34);  if (isset(wearing.cross))    {    print("Suddenly, he is aware of the silver cross you are wearing around "          "your neck!");    set(f37);    }  else    {    if (!isset(candle.lit))      {      set.priority(ego, 4);      }    prevent.input();    erase(o3);    stop.motion(ego);    if ((posn(ego, 32, 96, 44, 100) ||         posn(ego, 28, 111, 40, 127) ||         posn(ego, 23, 128, 35, 144) ||         posn(ego, 18, 145, 31, 160) ||         posn(ego, 97, 94, 104, 106)))      {      temp.x = 0;      temp.y = 0;      }    else      {      temp.x = 248;      temp.y = 0;      }    reposition(ego, temp.x, temp.y);    set.view(ego, View53);    work = 3;    cycle.time(ego, work);    set(keep.cycling);    set.cel(ego, 0);    end.of.loop(ego, f35);    v35 = 5;    }  }if (isset(f35))  {  stop.cycling(ego);  reset(keep.cycling);  print("You feel them sink into the soft flesh of your neck, and then ... "        "nothing.");  reset(f35);  v92 = 5;  set(certain.death);  }if (v34 == 2 &&     isset(f37))  {  v34 = 0;  }else  {  if (isset(f36))    {    erase(o3);    reset(lf8);    reset(f36);    v35 = 6;    }  --v33;  if (v33 == 1)    {    force.update(o4);    set.view(o4, View58);    set.cel(o4, 3);    reset(keep.cycling);    start.motion(ego);    set.view(ego, View0);    set.loop(ego, 1);    get.posn(ego, work.2, work.3);    temp.x = 76;    temp.y = 107;    temp.x -= work.2;    temp.y -= work.3;    reposition(ego, temp.x, temp.y);    v35 = 6;    print("You place the pointed stake on Count Dracula's chest. Quickly, using "          "the mallet, you pound the stake through his heart. Dracula "          "disintegrates into a pile of dust. A small silver key is left behind "          "in the coffin.");    }  if (isset(f33))    {    reset(f33);    stop.motion(ego);    set.cel(ego, 0);    get.posn(ego, work.2, work.3);    temp.x = 65;    temp.y = 107;    temp.x -= work.2;    temp.y -= work.3;    reposition(ego, temp.x, temp.y);    set.view(ego, View59);    v33 = 25;    currentScore  += 4;    currentScore  += v80;    }  if (!isset(candle.lit))    {    if (v30 == 1)      {      v30 = 2;      set(f162);      if (isset(lf8))        {        erase(o3);        }      draw.pic(v31);      show.pic();      set.priority(ego, 12);      set.view(ego, View99);      set.priority(o3, 4);      set.priority(o4, 4);      stop.update(o4);      force.update(o4);      if (isset(lf8))        {        draw(o3);        }      }    else      {      goto(Label14);      }    }  if (!isset(haveInput))    {    goto(Label15);    }  if ((said("check out") ||       said("check out", "antique shop") ||       said("check out", "swim")))    {    print("There is a beautiful, ornate coffin to one side of this dreadful "          "room. Dust is everywhere, cobwebs fill the corners, and a sickly "          "odor permeates the air.");    }  if (said("acquire", "casket"))    {    print("You don't think you could carry around a heavy %w2, do you?");    }  if ((said("get in", "casket") ||       said("enter", "casket") ||       said("climb", "casket")))    {    print("That is truly crazy!");    }  if (!said("check out", "casket") &&       !said("look in", "casket"))    {    goto(Label2);    }  if (!posn(ego, 50, 105, 97, 109))    {    print("At this distance the candle does not provide enough light for you to "          "see much detail.");    goto(Label15);    }  if (v91 != 1)    {    print("The lid of the beautifully carved coffin is closed.");    goto(Label15);    }  if (v92 == 1)    {    print("Quaking, you look into the beautiful coffin. A vampire is lying "          "asleep within it! It must be Count Dracula!");    goto(Label15);    }  else    {    print("Trembling with fear, you peer into the ornate coffin. Finding it "          "unoccupied, you see the interior is lined with shiny red satin.");    }Label1:  if (!isset(f137))    {    print("A red satin pillow lies at one end.");    }  else    {    if (!isset(got.gold.key.3))      {      print("Against the red satin, you notice a large golden key!");      }    }  if (!isset(f139) &&       v92 == 2)    {    print("A small silver key is lying within the coffin!");    }  goto(Label15);Label2:  if (!said("open", "casket") &&       !said("open", "lid"))    {    goto(Label3);    }  if (v91 == 1)    {    print("The lid to the coffin is already up.");    }  else    {    if (!posn(ego, 50, 105, 97, 115))      {      print("To do that, you will need to get closer.");      }    else      {      start.update(o4);      end.of.loop(o4, done);      v91 = 1;      if (v92 != 1)        {        print("Nervously, you lift the heavy lid of the elegant coffin. You "              "peek into its red satin interior. The coffin is unoccupied.");        goto(Label1);        }      else        {        print("With trepidation, you lift the heavy lid of the beautifully "              "carved coffin. Your heart beats wildly when you see a vampire "              "lying asleep within it! It must be Count Dracula!");        v32 = 100;        }      }    }  goto(Label15);Label3:  if (!said("close", "casket") &&       !said("close", "lid"))    {    goto(Label4);    }  if (v91 != 1)    {    print("The lid to the coffin is already closed.");    }  else    {    if (!posn(ego, 50, 105, 97, 115))      {      print("To do that, you will need to get closer.");      }    else      {      start.update(o4);      reverse.loop(o4, done);      v91 = 2;      v32 = 0;      }    }  goto(Label15);Label4:  if (said("acquire", "cushion"))    {    if (has("Pillow"))      {      print("You already have.");      }    else      {      if ((v91 != 1 ||           isset(f137)))        {        print("You don't see one here.");        }      else        {        if (!posn(ego, 50, 105, 97, 115))          {          print("To do that, you will need to get closer.");          }        else          {          if (v92 == 1)            {            print("That was truly a dumb thing to do! Run before he catches "                  "you!");            v32 = 0;            }          else            {            print("You remove the shiny red %w2 from the coffin. Lo and behold, "                  "a large gold key was under the %w2!");            get("Pillow");            set(f137);            }          }        }      }    }  if (v91 == 1)    {    if (v92 == 2)      {      if (!isset(f139))        {        if ((!isset(f137) ||             isset(got.gold.key.3)))          {          goto(Label6);          }        else          {          goto(Label7);          }        }      }    if (isset(f137) &&         !isset(got.gold.key.3))      {      goto(Label5);      }    }  if ((said("acquire", "key") ||       said("acquire", "gold", "key") ||       said("acquire", "silver", "key") ||       said("acquire", "keys") ||       said("acquire", "both", "keys")))    {    print("You don't see one here.");    goto(Label15);    }  goto(Label12);Label5:  if ((said("acquire", "key") ||       said("acquire", "gold", "key")))    {    if (!posn(ego, 50, 105, 97, 115))      {      print("To do that, you will need to get closer.");      }    else      {      goto(Label8);      }    }  goto(Label11);Label6:  if ((said("acquire", "key") ||       said("acquire", "silver", "key")))    {    if (!posn(ego, 50, 105, 97, 115))      {      print("To do that, you will need to get closer.");      }    else      {      goto(Label9);      }    }  goto(Label11);Label7:  if (said("acquire", "key"))    {    print("There are two keys in the coffin. Do you want the gold one or the "          "silver one?");    set(f32);    goto(Label15);    }  if (said("acquire", "gold", "key"))    {    goto(Label8);    }  if (isset(f32) &&       (said("gold", "one") ||       said("gold", "key") ||       said("acquire", "gold", "one")))    {    goto(Label8);    }  if (said("acquire", "silver", "key"))    {    goto(Label9);    }  if (isset(f32) &&       (said("silver", "one") ||       said("silver", "key") ||       said("acquire", "silver", "one")))    {    goto(Label9);    }  if ((said("acquire", "keys") ||       said("acquire", "both", "keys")))    {    goto(Label10);    }  if (isset(f32) &&       said("acquire", "both", "them"))    {    goto(Label10);    }  if (!isset(haveMatch) &&       said("anyword", "anyword"))    {    reset(haveMatch);    reset(f32);    }  goto(Label12);Label8:  print("OK.");  get("Gold Key");  set(got.gold.key.3);  reset(f32);  currentScore  += 5;  goto(Label15);Label9:  print("OK.");  get("Silver Key");  set(f139);  reset(f32);  currentScore  += 2;  goto(Label15);Label10:  print("OK.");  get("Gold Key");  set(got.gold.key.3);  get("Silver Key");  set(f139);  reset(f32);  currentScore  += 5;  currentScore  += 2;  goto(Label15);Label11:  if ((said("acquire", "keys") ||       said("acquire", "both", "keys")))    {    print("There is only one key here.");    goto(Label15);    }  else    {    if ((said("anyword", "key") ||         said("anyword", "anyword", "key")))      {      if (!said("check out", "key") &&           !said("check out", "anyword", "key"))        {        print("You don't see one here.");        goto(Label15);        }      else        {        reset(haveMatch);        }      }    }Label12:  if ((said("show", "cross") ||       said("show", "count dracula", "cross")))    {    if (!has("Cross"))      {      print("You don't have it!");      goto(Label15);      }    }  if (v92 == 1 &&       v91 == 1)    {    if ((said("speak", "count dracula") ||         said("hello", "anyword") ||         said("say", "hello") ||         said("show", "cross") ||         said("show", "count dracula", "cross")))      {      print("Count Dracula is fast asleep in his coffin. He pays you no heed.");      }    else      {      if ((said("acquire", "count dracula") ||           said("capture", "count dracula")))        {        print("That is truly crazy!");        }      else        {        if (!posn(ego, 50, 105, 97, 115))          {          if ((said("wake", "count dracula") ||               said("kill", "count dracula") ||               said("pound", "pole", "count dracula")))            {            print("To do that, you will need to get closer.");            }          else            {            if (said("check out", "count dracula"))              {              print("At this distance the candle does not provide enough light "                    "for you to see much detail.");              }            }          }        else          {          if (said("wake", "count dracula"))            {            print("That was truly a dumb thing to do! Run before he catches "                  "you!");            v32 = 0;            }          else            {            if ((said("kill", "count dracula") ||                 said("pound", "pole", "count dracula")))              {              if (has("Stake") &&                   has("Mallet") &&                   !said("kill", "count dracula", "knife"))                {                set(keep.cycling);                move.obj(ego, 76, 107, 0, f33);                v32 = 250;                v92 = 2;                }              else                {                if (has("Sword") &&                     !said("pound", "pole", "count dracula"))                  {                  print("You plunge the sword into Count Dracula's sleeping "                        "body. Oh, dear! It has no effect. You just woke him "                        "up.");                  v32 = 0;                  }                else                  {                  print("You have no way of killing Count Dracula. You are in "                        "mortal danger!");                  }                }              }            else              {              if (said("check out", "count dracula"))                {                print("Count Dracula is tall and elegantly dressed with a black "                      "cloak wrapped around him. His face and hands are chalk "                      "white. His lips are blood red.");                }              }            }          }        }      }    goto(Label15);    }  if (v92 == 1 &&       v91 != 1)    {    if ((said("speak", "count dracula") ||         said("kill", "count dracula")))      {      print("The coffin isn't open.");      }    }Label13:  if (v92 == 3)    {    if ((said("speak", "count dracula") ||         said("hello", "anyword") ||         said("say", "hello")))      {      print("You don't want to chitchat with Count Dracula!");      }    else      {      if ((said("show", "cross") ||           said("show", "count dracula", "cross")))        {        set(f37);        }      else        {        if ((said("kill", "count dracula") ||             said("pound", "pole", "count dracula")))          {          print("You have no way of killing Count Dracula. You are in mortal "                "danger!");          }        else          {          if (said("check out", "count dracula"))            {            print("Count Dracula is tall and elegantly dressed with a black "                  "cloak wrapped around him. His face and hands are chalk "                  "white. His lips are blood red.");            }          else            {            if ((said("anyword", "count dracula") ||                 said("anyword", "anyword", "count dracula")))              {              print("You don't have time! Run for your life!");              }            }          }        }      }    goto(Label15);    }  if ((said("anyword", "count dracula") ||       said("anyword", "anyword", "count dracula") ||       said("show", "cross")))    {    if ((v92 != 1 ||         v91 == 3))      {      print("There is no one here but you.");      }    else      {      if (v91 == 2)        {        print("Count Dracula is fast asleep in his coffin. He pays you no heed.");        }      }    }  goto(Label15);  }print("Count Dracula is terrified of the cross. He turns into a bat and flies "      "away.");force.update(o4);set.cel(o4, 3);set.view(o4, View58);set.view(o3, View52);work = 2;cycle.time(o3, work);step.size(o3, work);ignore.blocks(o3);ignore.objs(o3);start.cycling(o3);set.priority(o3, 11);v92 = 4;move.obj(o3, 137, 80, 0, f36);currentScore  += v80;v80 = 0;goto(Label15);Label14:if (!isset(haveMatch) &&     !said("light", "candle"))  {  if (said("check out", "anyword"))    {    print("It is pitch black in here! You can't see a thing!");    }  else    {    if (said("show", "cross"))      {      goto(Label13);      }    else      {      if (said("anyword", "anyword"))        {        print("You can't do that while stumbling around in the dark.");        }      }    }  }Label15:if (!isset(haveMatch) &&     said("check out", "anyword"))  {  if (v92 == 3)    {    print("You don't have time! Run for your life!");    }  else    {    if (v92 == 1)      {      print("Are you crazy? Dracula hangs out here, and you want to stand "            "around looking at things?");      }    else      {      reset(haveMatch);      }    }  }if (edgeEgoHit == RIGHT_EDGE)  {  observe.objs(o3);  release.priority(ego);  release.priority(o3);  force.update(o4);  release.priority(o4);  if (v92 == 0)    {    random(0, 100, work.3);    if (work.3 < 128)      {      v92 = 61;      }    else      {      v92 = 64;      }    }  if (v92 == 3)    {    v92 = 71;    }  new.room(Logic66); [ ##LE001##  }return();[ Messages#message 1 "There is a beautiful, ornate coffin to one side of this dreadful room. Dust is everywhere, cobwebs fill the corners, and a sickly odor permeates the air."#message 2 "The lid of the beautifully carved coffin is closed."#message 3 "Trembling with fear, you peer into the ornate coffin. Finding it unoccupied, you see the interior is lined with shiny red satin."#message 4 "A red satin pillow lies at one end."#message 5 "Against the red satin, you notice a large golden key!"#message 6 "A small silver key is lying within the coffin!"#message 7 "Quaking, you look into the beautiful coffin. A vampire is lying asleep within it! It must be Count Dracula!"#message 8 "The lid to the coffin is already up."#message 9 "Nervously, you lift the heavy lid of the elegant coffin. You peek into its red satin interior. The coffin is unoccupied."#message 10 "With trepidation, you lift the heavy lid of the beautifully carved coffin. Your heart beats wildly when you see a vampire lying asleep within it! It must be Count Dracula!"#message 11 "The lid to the coffin is already closed."#message 12 "Count Dracula is tall and elegantly dressed with a black cloak wrapped around him. His face and hands are chalk white. His lips are blood red."#message 13 "You remove the shiny red %w2 from the coffin. Lo and behold, a large gold key was under the %w2!"#message 14 "At this distance the candle does not provide enough light for you to see much detail."#message 15 "There are two keys in the coffin. Do you want the gold one or the silver one?"#message 16 "There is only one key here."#message 17 "You don't think you could carry around a heavy %w2, do you?"#message 18 "Count Dracula is awake! Run before it's too late!"#message 19 "You are caught in Dracula's grasp! Saliva drips off the end of his sharp fangs."#message 20 "You feel them sink into the soft flesh of your neck, and then ... nothing."#message 21 "Count Dracula is fast asleep in his coffin. He pays you no heed."#message 22 "You don't want to chitchat with Count Dracula!"#message 23 "That is truly crazy!"#message 24 "You place the pointed stake on Count Dracula's chest. Quickly, using the mallet, you pound the stake through his heart. Dracula disintegrates into a pile of dust. A small silver key is left behind in the coffin."#message 25 "You have no way of killing Count Dracula. You are in mortal danger!"#message 26 "You plunge the sword into Count Dracula's sleeping body. Oh, dear! It has no effect. You just woke him up."#message 27 "You need something to pound the stake with."#message 28 "That was truly a dumb thing to do! Run before he catches you!"#message 29 "To do that, you will need to get closer."#message 30 "There is no one here but you."#message 31 "You don't have time! Run for your life!"#message 32 "Count Dracula is terrified of the cross. He turns into a bat and flies away."#message 33 "You don't have it!"#message 34 "You don't see one here."#message 35 "You already have."#message 36 "OK."#message 37 "You can't do that while stumbling around in the dark."#message 38 "Suddenly, he is aware of the silver cross you are wearing around your neck!"#message 39 "It is pitch black in here! You can't see a thing!"#message 40 "Are you crazy? Dracula hangs out here, and you want to stand around looking at things?"#message 41 "The coffin isn't open."