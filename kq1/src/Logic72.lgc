#define falling.to.bottom  f20 #define fall.sound.played   f21if (newRoom)  {  load.pic(currentRoom);  draw.pic(currentRoom);  discard.pic(currentRoom);  load.view(View105);  load.view(View74);  load.sound(s.ego.fall);  if (previousRoom == 56)    {    position(ego, 145, 109);    }  if (previousRoom == 71)    {    set.view(ego, View74);    position(ego, 66, 165);    move.obj(ego, 66, 165, 0, done);    }  draw(ego);  show.pic();  }if (falling.from.sky &&     !isset(lf2) &&     !isset(lf3))  {  sound(s.ego.fall, sound.done);  set(lf3);  }if (!posn(ego, 65, 100, 84, 120) &&     !climbing.beanstalk && !ego.invisible)  {  if (said("climb", "beanstalk"))    {    print("You need to be closer to do that.");    }  }if (ego.invisible)  {  if (said("climb", "beanstalk"))    {    print("You can't do that when you are invisible!");    }  }if (climbing.beanstalk)  {  if (said("check", "beanstalk"))    {    get.posn(ego, temp.x, temp.y);    if (temp.y > 140)      {      print("Your heart thuds.  Dare you climb into the clouds?");      }    if (temp.y < 141)      {      print("It is amazing that you actually climbed up this high!");      }    }  }if (!climbing.beanstalk)  {  if (said("check", "beanstalk"))    {    get.posn(ego, temp.x, temp.y);    if (temp.x > 89)      {      print("It is hard to believe those seeds you planted grew this high.");      }    if (temp.x < 90)      {      print("It is a long, long way down....");      }    }  }if ((said("check", "clouds") ||     said("check", "room")))  {  print("You are in the Land of the Clouds.  It is rumored a giant lives up "        "here.");  }if (egoHitSpecial &&     !isset(lf1) &&     !posn(ego, 65, 100, 82, 120) &&     !climbing.beanstalk)  {  set(lf1);  if (!ego.invisible)    {    set.view(ego, View105);    }  start.cycling(ego);  set(keep.cycling);  get.posn(ego, temp.x, temp.y);  get.priority(ego, lv0);  set.priority.v(ego, lv0);  temp.y = 165;  temp.step = 4;  move.obj.v(ego, temp.x, temp.y, temp.step, falling.to.bottom);  sound(s.ego.fall, fall.sound.done);  }if (egoHitSpecial &&     !isset(lf1) &&     posn(ego, 65, 100, 82, 120) &&     ego.invisible)  {  set(lf1);  if (!ego.invisible)    {    set.view(ego, View105);    }  start.cycling(ego);  set(keep.cycling);  get.posn(ego, temp.x, temp.y);  get.priority(ego, lv0);  set.priority.v(ego, lv0);  temp.y = 165;  temp.step = 4;  move.obj.v(ego, temp.x, temp.y, temp.step, falling.to.bottom);  sound(s.ego.fall, fall.sound.done);  }if (falling.to.bottom)  {  reset(falling.to.bottom);  erase(ego);  print("Whoops!  You fall toward a distant earth.");  set(certain.death);  }if (egoHitSpecial &&     posn(ego, 65, 100, 82, 120) &&     !ego.invisible)  {  if (climbing.beanstalk)    {    reset(climbing.beanstalk);    erase(ego);    set.view(ego, View0);    position(ego, 85, 112);    draw(ego);    move.obj(ego, 85, 112, 0, done);    goto(Label1);    }  if (!climbing.beanstalk)    {    set(climbing.beanstalk);    erase(ego);    set.view(ego, View74);    position(ego, 70, 123);    draw(ego);    move.obj(ego, 70, 123, 0, done);    }  }if (egoHitSpecial && climbing.beanstalk)  {  program.control();  print("Whoops!  You fall toward a distant earth.");  get.posn(ego, temp.x, temp.y);  reset(climbing.beanstalk);  set(falling.from.sky);  erase(ego);  set.view(ego, View105);  if (temp.x > 75)    {    temp.x = 80;    position.v(ego, temp.x, temp.y);    draw(ego);    }  if (temp.x < 76)    {    temp.x = 65;    position.v(ego, temp.x, temp.y);    draw(ego);    }  start.cycling(ego);  set(keep.cycling);  temp.y = 166;  temp.step = 4;  move.obj.v(ego, temp.x, temp.y, temp.step, lf2);  }Label1:if ((isset(lf2) ||     posn(ego, 0, 166, 159, 167)))  {  new.room(Logic71);  }if (edgeEgoHit == RIGHT_EDGE)  {  new.room(Logic56);  }return();[ Messages#message 1 "If you were to jump or duck here you might fall."#message 2 "You need to be closer to do that."#message 3 "You can't do that when you are invisible!"#message 4 "Whoops!  You fall toward a distant earth."#message 5 "Your heart thuds.  Dare you climb into the clouds?"#message 6 "It is a long, long way down...."#message 7 "It is amazing that you actually climbed up this high!"#message 8 "It is hard to believe those seeds you planted grew this high."#message 9 "You are in the Land of the Clouds.  It is rumored a giant lives up here."