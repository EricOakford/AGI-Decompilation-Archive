#define a.bucket    o1#define is.falling  f20#define deadly.fall f21#define survivable.fall f22#define is.swimming f23#define fall.sound.played   f24#define fell.off.rope   f25#define drown.timer v30if (newRoom)  {  load.pic(currentRoom);  draw.pic(currentRoom);  discard.pic(currentRoom);  load.sound(s.ego.fall);  load.logics(lgc.swim);  call(lgc.swim);  load.view(v.ego.in.bucket);  load.view(v.bucket);  load.view(View74);  load.view(View105);  load.view(View99);  if (falling.into.well)    {    set.view(ego, View105);    position(ego, 81, 48);    ignore.objs(ego);    ignore.blocks(ego);    set.priority(ego, 15);    set(keep.cycling);    set(is.falling);    move.obj(ego, 81, 164, 3, deadly.fall);    }  if (previousRoom == 12 && !falling.into.well)    {    if (!climbed.down.well)      {      set(climbed.down.well);      currentScore  += 1;      }    if (climbing.rope)      {      set.view(ego, View74);      position(ego, 81, 48);      set.priority(ego, 15);      }    }  if (previousRoom == 52)    {    drown.swim = 2;    set.view(ego, View70);    set(is.swimming);    drown.timer = 250;    position(ego, 75, 163);    }  if (rope.lowered)    {    add.to.pic(View99, 0, 0, 84, 119, 4, 4);    discard.view(View99);    }  if (bucket.lowered)    {    if (ego.in.bucket)      {      animate.obj(a.bucket);      set.view(a.bucket, v.ego.in.bucket);      position(a.bucket, 79, 150);      set.cel(a.bucket, 0);      draw(a.bucket);      add.to.pic(View99, 0, 0, 84, 119, 4, 4);      end.of.loop(a.bucket, done);      goto(Label1);      }    else      {      add.to.pic(View99, 0, 0, 84, 119, 4, 4);      animate.obj(a.bucket);      set.view(a.bucket, v.bucket);      position(a.bucket, 79, 150);      set.cel(a.bucket, 0);      draw(a.bucket);      stop.update(a.bucket);      }    }  draw(ego);Label1:  show.pic();  }if ((rope.lowered || bucket.lowered))  {  if (said("check", "rope"))    {    print("It is a very long, sturdy rope.");    }  }if (onWater)  {  observe.blocks(ego);  }else  {  ignore.blocks(ego);  }if (falling.into.well && !deadly.fall && !survivable.fall && !fall.sound.played)  {  sound(s.ego.fall, sound.done);  set(fall.sound.played);  }if (climbing.rope)  {  get.posn(ego, temp.x, temp.y);  if (temp.y > 115 && bucket.lowered)    {    reset(climbing.rope);    set(falling.into.well);    set.view(ego, View105);    temp.y = 164;    ignore.objs(ego);    set.priority(ego, 15);    set(keep.cycling);    set(is.falling);    temp.step = 3;    move.obj.v(ego, temp.x, temp.y, temp.step, survivable.fall);    }  if (temp.y > 115 && rope.lowered)    {    reset(climbing.rope);    set(falling.into.well);    set.view(ego, View105);    temp.y = 164;    ignore.objs(ego);    set.priority(ego, 15);    set(keep.cycling);    set(is.falling);    temp.step = 3;    move.obj.v(ego, temp.x, temp.y, temp.step, survivable.fall);    }  if ((temp.x < 79 ||       temp.x > 83))    {    if (temp.y > 70)      {      reset(climbing.rope);      set(falling.into.well);      set.view(ego, View105);      temp.y = 164;      ignore.objs(ego);      set.priority(ego, 15);      set(keep.cycling);      set(is.falling);      temp.step = 3;      move.obj.v(ego, temp.x, temp.y, temp.step, survivable.fall);      }    else      {      reset(climbing.rope);      set(falling.into.well);      set(fell.off.rope);      set.view(ego, View105);      temp.y = 164;      ignore.objs(ego);      set.priority(ego, 15);      set(keep.cycling);      set(is.falling);      temp.step = 3;      move.obj.v(ego, temp.x, temp.y, temp.step, deadly.fall);      }    }  }if (deadly.fall)  {  reset(deadly.fall);  stop.sound();  erase(ego);  if (isset(falling.into.well) &&       !isset(fell.off.rope))    {    print("You should be more careful before trying that next time!");    }  else    {    print("I can see you need a little practice climbing rope!");    }  set(certain.death);  }if (survivable.fall)  {  reset(is.falling);  reset(survivable.fall);  reset(keep.cycling);  reset(falling.into.well);  release.priority(ego);  stop.sound();  set.view(ego, View93);  }if (drown.swim == 2 && !is.swimming)  {  set(is.swimming);  drown.timer = 250;  }--drown.timer;if (drown.timer == 1 && is.swimming)  {  erase(ego);  print("Your arms are like lead... from swimming.  You find it impossible... "        "to swim any longer.  You sink to the bottom... of the well....");  set(certain.death);  }if (!climbing.rope && !is.falling)  {  if ((said("climb", "rope") ||       said("a", "rope")))    {    if (!rope.lowered && !bucket.lowered)      {      print("The rope is out of reach.");      }    if (rope.lowered)      {      erase(ego);      drown.swim = 0;      reset(keep.cycling);      set.view(ego, View74);      position(ego, 81, 113);      set.priority(ego, 15);      draw(ego);      move.obj(ego, 81, 113, 0, done);      set(climbing.rope);      reset(is.swimming);      }    if (bucket.lowered && !ego.in.bucket)      {      erase(ego);      drown.swim = 0;      reset(keep.cycling);      set.view(ego, View74);      position(ego, 81, 113);      set.priority(ego, 15);      draw(ego);      move.obj(ego, 81, 113, 0, done);      set(climbing.rope);      reset(is.swimming);      }    if (ego.in.bucket)      {      start.update(a.bucket);      erase(a.bucket);      set.view(a.bucket, v.bucket);      set.view(ego, View74);      position(a.bucket, 78, 150);      position(ego, 81, 113);      set.cel(a.bucket, 0);      draw(a.bucket);      stop.update(a.bucket);      set.priority(ego, 15);      draw(ego);      move.obj(ego, 81, 113, 0, done);      set(climbing.rope);      reset(ego.in.bucket);      }    }  if (ego.in.bucket)    {    if ((said("enter", "water") ||         said("exit", "bucket") ||         said("enter", "water") ||         said("jump", "water") ||         said("get out", "bucket")))      {      start.update(a.bucket);      erase(a.bucket);      set.view(a.bucket, v.bucket);      set.view(ego, View105);      position(a.bucket, 79, 150);      position(ego, 81, 124);      set(keep.cycling);      move.obj(ego, 81, 164, 3, survivable.fall);      set.cel(a.bucket, 0);      draw(a.bucket);      stop.update(a.bucket);      set.priority(ego, 15);      draw(ego);      set(climbing.rope);      reset(ego.in.bucket);      }    }  }if ((said("climb", "well") ||     said("a", "well")))  {  print("You cannot climb the sides of the well.  They are too steep and "        "slippery.");  }if (said("check", "well"))  {  print("When you look upwards, you see the top of the well far, far above.");  }if (!have.bucket)  {  if (said("check", "bucket"))    {    if (bucket.lowered)      {      print("Although you can only see the bottom of the bucket, it looks like "            "a very nice bucket.");      }    else      {      print("The bucket is not here.");      }    }  if (said("acquire", "bucket"))    {    if (bucket.lowered)      {      print("How are you going to get the bucket?");      }    else      {      print("The bucket is not here.");      }    }  if ((said("enter", "bucket") ||       said("get in", "bucket")))    {    if (bucket.lowered && !ego.in.bucket)      {      print("I don't think that getting in the bucket right now will do you "            "very much good.");      }    }  }if ((said("untie", "rope") ||     said("untie", "bucket")))  {  if ((climbing.rope || ego.in.bucket))    {    print("The knot is tied very tightly.");    }  else    {    print("The rope is out of reach.");    }  }if (said("acquire", "rope"))  {  if ((climbing.rope || ego.in.bucket))    {    print("The rope is secured to the well with a very tight knot.");    }  else    {    print("The rope is out of reach.");    }  }if (said("break", "rope"))  {  if ((climbing.rope || ego.in.bucket))    {    print("The thick rope resists your efforts.");    }  else    {    print("The rope is out of reach.");    }  }if ((said("lower", "bucket") ||     said("raise", "bucket") ||     said("lower", "rope") ||     said("raise", "rope")))  {  print("A person in your position is in no position to raise or lower "        "anything.");  }if (!have.dagger)  {  if (said("cut", "rope"))    {    print("You have nothing to cut the rope with.");    }  }if (have.dagger)  {  if (said("cut", "rope"))    {    if (climbing.rope && bucket.lowered)      {      print("Just before slitting the rope, you realize that it is not a very "            "wise move at this time.");      }    if (ego.in.bucket)      {      print("Just before slitting the rope, you realize that it is not a very "            "wise move at this time.");      }    if (!bucket.lowered)      {      print("There is no reason to cut the rope.");      }    if (drown.swim == 2 &&         bucket.lowered)      {      print("You reach up out of the well water and cut the thick rope that "            "holds the bucket.");      start.update(a.bucket);      erase(a.bucket);      set(have.bucket);      set(cut.bucket);      reset(bucket.lowered);      set(rope.lowered);      currentScore  += 2;      get("water bucket");      if (bucket.filled)        {        set(have.water);        get("water");        if (!points.water)          {          set(points.water);          currentScore  += 2;          }        }      }    if (drown.swim == 1)      {      print("You have other things to think about right now.");      }    if (!bucket.lowered && !rope.lowered)      {      print("The rope is out of reach.");      }    }  }if (!have.water)  {  if (said("check", "water"))    {    print("This is murky well water.");    }  if (said("drink", "water"))    {    if ((drown.swim == 1 ||         drown.swim == 2))      {      print("The water does not taste as good as you expected.");      }    else      {      print("You need to be closer to the water to drink.");      }    }  if (said("acquire", "water"))    {    if (isset(have.bucket) &&         (drown.swim == 1 ||         drown.swim == 2))      {      print("In the midst of your activities, you fill the bucket with well "            "water.");      set(have.water);      if (!points.water)        {        currentScore  += 2;        set(points.water);        }      }    else      {      print("There is no way for you to get water now.");      }    }  }if (drown.swim != 1 &&     drown.swim != 2)  {  if ((said("dive", "water") ||       said("dive", "a") ||       said("dive")))    {    print("Now is not the time to try diving.");    }  }if ((drown.swim == 1 ||     drown.swim == 2))  {  if ((said("dive", "water") ||       said("dive", "a") ||       said("dive")))    {    if (!dove.underwater)      {      set(dove.underwater);      currentScore  += 2;      }    new.room(Logic52);    }  }if (edgeEgoHit == TOP_EDGE)  {  new.room(Logic12);  }call(lgc.swim);return();[ Messages#message 1 "I can see you need a little practice climbing rope!"#message 2 "You should be more careful before trying that next time!"#message 3 "Your arms are like lead... from swimming.  You find it impossible... to swim any longer.  You sink to the bottom... of the well...."#message 4 "The rope is out of reach."#message 5 "You cannot climb the sides of the well.  They are too steep and slippery."#message 6 "When you look upwards, you see the top of the well far, far above."#message 7 "Although you can only see the bottom of the bucket, it looks like a very nice bucket."#message 8 "The bucket is not here."#message 9 "How are you going to get the bucket?"#message 10 "This is murky well water."#message 11 "The water does not taste as good as you expected."#message 12 "In the midst of your activities, you fill the bucket with well water."#message 13 "The knot is tied very tightly."#message 14 "The rope is secured to the well with a very tight knot."#message 15 "The thick rope resists your efforts."#message 16 "You have nothing to cut the rope with."#message 17 "Just before slitting the rope, you realize that it is not a very wise move at this time."#message 18 "There is no reason to cut the rope."#message 19 "You reach up out of the well water and cut the thick rope that holds the bucket."#message 20 "You have other things to think about right now."#message 21 "The rope is out of reach."#message 22 "A person in your position is in no position to raise or lower anything."#message 23 "I don't think that getting in the bucket right now will do you very much good."#message 24 "You need to be closer to the water to drink."#message 25 "There is no way for you to get water now."#message 26 "Now is not the time to try diving."#message 27 "It is a very long, sturdy rope."