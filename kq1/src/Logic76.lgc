#define a.fiddle    o1#define a.leprechaun.2  o2#define a.leprechaun    o13#define leprechaun.catch.ego    f20#define dancing.leprechauns f21#define play.the.fiddle f22#define fiddle.done   f23#define fiddle.timer    v30if (newRoom)  {  load.pic(currentRoom);  draw.pic(currentRoom);  discard.pic(currentRoom);  if (previousRoom == 75)    {    position(ego, 113, 146);    }  if (previousRoom == 77)    {    position(ego, 73, 163);    }  if (have.fiddle)    {    load.view(View50);    animate.obj(a.fiddle);    set.view(a.fiddle, View50);    position(a.fiddle, 96, 78);    load.sound(Sound8);    }  if (!leprechauns.gone)    {    load.view(View47);    load.view(View78);    load.view(View79);    load.view(View80);    animate.obj(a.leprechaun.2);    animate.obj(a.leprechaun);    set.view(a.leprechaun.2, View79);    set.view(a.leprechaun, View47);    position(a.leprechaun.2, 60, 136);    position(a.leprechaun, 45, 119);    stop.cycling(a.leprechaun);    stop.motion(a.leprechaun);    }  if (!leprechauns.gone)    {    draw(a.leprechaun);    draw(a.leprechaun.2);    if (have.clover)      {      wander(a.leprechaun.2);      }    else      {      follow.ego(a.leprechaun.2, 5, leprechaun.catch.ego);      }    }  draw(ego);  show.pic();  if (!leprechauns.gone)    {    if (!have.clover && ego.invisible)      {      print("The leprechauns' magic powers detect your unseen presence.");      }    if (!have.clover && !ego.invisible)      {      print("The leprechauns do not like your invasion of their territory.  "            "They may not let you get any further.");      }    if (have.clover)      {      print("The leprechauns revere the power of the fourleaf clover. With it "            "in your possession they will leave you absolutely alone.");      }    }  }if (leprechaun.catch.ego)  {  reset(leprechaun.catch.ego);  print("The leprechaun catches you and holds you with his small,  but strong "        "arms.  I don't think the leprechaun will ever let go.");  stop.motion(ego);  set(fFlag95);  stop.cycling(ego);  stop.motion(a.leprechaun.2);  stop.cycling(a.leprechaun.2);  set(certain.death);  }if (play.the.fiddle)  {  if (said("play", "fiddle"))    {    print("You are already playing the fiddle.");    }  }if (fiddle.timer > 0)  {  --fiddle.timer;  }if (!leprechauns.gone && !play.the.fiddle)  {  if (have.fiddle &&       said("play", "fiddle"))    {    set(dancing.leprechauns);    set(play.the.fiddle);    fiddle.timer = 45;    draw(a.fiddle);    sound(Sound8, fiddle.done);    erase(a.leprechaun);    set.view(a.leprechaun, View80);    draw(a.leprechaun);    start.cycling(a.leprechaun);    wander(a.leprechaun);    erase(a.leprechaun.2);    set.view(a.leprechaun.2, View78);    draw(a.leprechaun.2);    wander(a.leprechaun.2);    print("Leprechauns love fiddle music!  Have you ever seen such frenzied "          "dancing?");    set(leprechauns.gone);    currentScore  += 3;    }  }if (fiddle.timer > 1 && fiddle.done)  {  reset(fiddle.done);  sound(Sound8, fiddle.done);  }if (fiddle.timer == 1)  {  fiddle.timer = 0;  stop.sound();  reset(dancing.leprechauns);  reset(play.the.fiddle);  erase(a.leprechaun);  erase(a.leprechaun.2);  erase(a.fiddle);  print("Totally involved in the music, they dance right out of the room.");  }if (dancing.leprechauns)  {  if (objHitEdge == 13)    {    erase(a.leprechaun);    }  if (objHitEdge == 2)    {    erase(a.leprechaun.2);    }  }if (said("check", "room"))  {  if (!leprechauns.gone)    {    print("You are in the antechamber of the Hall of the Leprechaun King.  "          "There are leprechauns in the room with you.");    }  else    {    print("You are in the antechamber of the Hall of the Leprechaun King.");    }  }if (said("close", "door"))  {  print("I can think of no good reason to close the door.");  }if (!leprechauns.gone)  {  if (said("check", "leprechaun"))    {    print("They are tiny people dressed all in green.");    }  if ((said("speak", "leprechaun") ||       said("hello") ||       said("say", "hello")))    {    print("I would not try talking to the leprechauns.  You might say the wrong "          "thing.");    }  if (said("kill", "leprechaun"))    {    print("You would not get all of them before they got you.");    }  }if (leprechauns.gone)  {  if (said("anyword", "leprechaun"))    {    print("There are not any leprechauns here.");    }  }if (posn(ego, 128, 133, 129, 154))  {  new.room(Logic75);  }if (posn(ego, 0, 166, 159, 167))  {  new.room(Logic77);  }return();[ Messages#message 1 "The leprechauns' magic powers detect your unseen presence."#message 2 "The leprechauns do not like your invasion of their territory.  They may not let you get any further."#message 3 "The leprechauns revere the power of the fourleaf clover. With it in your possession they will leave you absolutely alone."#message 4 "Leprechauns love fiddle music!  Have you ever seen such frenzied dancing?"#message 5 "Totally involved in the music, they dance right out of the room."#message 6 "The leprechaun catches you and holds you with his small,  but strong arms.  I don't think the leprechaun will ever let go."#message 7 "You are in the antechamber of the Hall of the Leprechaun King.  There are leprechauns in the room with you."#message 8 "You are in the antechamber of the Hall of the Leprechaun King."#message 9 "I can think of no good reason to close the door."#message 10 "They are tiny people dressed all in green."#message 11 "I would not try talking to the leprechauns.  You might say the wrong thing."#message 12 "You would not get all of them before they got you."#message 13 "There are not any leprechauns here."#message 14 "You are already playing the fiddle."