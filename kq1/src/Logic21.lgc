#define a.witch o1#define witch.will.come f20#define witch.in.room f21#define witch.leaves  f22#define fly.with.ego  f23#define ego.caught      f24#define witch.step v30if (newRoom)  {  load.pic(currentRoom);  draw.pic(currentRoom);  discard.pic(currentRoom);  set.horizon(46);  if (isset(goat.following))    {    load.logics(lgc.goat);    }  if (dead.goat.room == currentRoom)    {    add.to.pic(View62, 0, 0, 110, 103, 0, 0);    }  random(0, 250, work);  if (work < 185 &&       witch.state != 3)    {    witch.step = 6;    step.size(a.witch, witch.step);    set(witch.will.come);    load.view(View3);    load.view(View91);    load.sound(m.badguy);    animate.obj(a.witch);    set.view(a.witch, View3);    ignore.horizon(a.witch);    ignore.blocks(a.witch);    set.priority(a.witch, 15);    set.loop(a.witch, 1);    }  if (witch.will.come)    {Label1:    random(0, 250, work.2);    if (work.2 > 90)      {      goto(Label1);      }    }  observe.blocks(ego);  draw(ego);  show.pic();  }--work.2;if (work.2 == 1)  {  work.2 = 0;  set(witch.in.room);  position(a.witch, 80, 48);  draw(a.witch);  set(ego.stunned);  sound(m.badguy, sound.done);  if (!goat.following)    {    print("It's a witch swooping through the sky... She's trying to catch you!  "          "Look out!");    follow.ego(a.witch, 20, ego.caught);    }  if (goat.following)    {    wander(a.witch);    set(witch.leaves);    print("There is a witch in the area, but since you have that menacing goat "          "with you, she will keep her distance.");    }  if (ego.invisible)    {    wander(a.witch);    set(witch.leaves);    print("Lucky for you that you are invisible, the witch can't find you.");    }  }if (sound.done)  {  reset(sound.done);  reset(ego.stunned);  }if (ego.caught)  {  reset(ego.caught);  reset(ego.stunned);  if (protected.spell)    {    print("The witch can feel your protective spell and bids a hasty retreat.");    wander(a.witch);    set(witch.leaves);    }  else    {    if (ego.invisible)      {      print("Lucky for you that you are invisible, the witch can't find you.");      wander(a.witch);      set(witch.leaves);      }    else      {      if (have.shield)        {        print("There is a witch in the area, but with the shield no harm will "              "come to you.");        wander(a.witch);        set(witch.leaves);        }      else        {        if (ego.ducking)          {          print("The witch missed you, this time.");          random(1, 2, lv1);          }        else          {          print("The witch swoops down, grabs you by the neck, and carries you "                "off to a fate worse than death.");          program.control();          set(witch.catch.ego);          erase(a.witch);          set.view(ego, View91);          ignore.blocks(ego);          ignore.horizon(ego);          get.posn(ego, temp.x, temp.y);          if (temp.y > 120)            {            temp.y -= 50;            }          temp.x = 130;          set.priority(ego, 15);          move.obj.v(ego, temp.x, temp.y, witch.step, fly.with.ego);          set(keep.cycling);          }        }      }    }  }if (lv1 == 1)  {  move.obj(a.witch, 1, 24, 6, lf8);  lv1 = 0;  }if (lv1 == 2)  {  move.obj(a.witch, 130, 24, 6, lf8);  lv1 = 0;  }if (isset(lf8))  {  reset(lf8);  follow.ego(a.witch, 20, ego.caught);  }if (witch.leaves)  {  if ((edgeObjHit == RIGHT_EDGE ||       edgeObjHit == LEFT_EDGE ||       edgeObjHit == TOP_EDGE))    {    get.posn(a.witch, lv2, lv3);    if (lv3 < 80)      {      normal.cycle(a.witch);      reset(witch.leaves);      reset(witch.in.room);      erase(a.witch);      }    }  }if (!isset(witch.in.room))  {  if (said("anyword", "witch"))    {    print("There's no witch here.");    }  }if (witch.in.room)  {  if (said("check", "witch"))    {    print("This is not your friendly-type witch.");    }  if (said("kill", "witch"))    {    print("There is no way to kill a flying witch!");    }  if ((said("speak", "witch") ||       said("hello") ||       said("say", "hello")))    {    print("The wicked witch is not interested in chitchat.");    }  if (said("acquire", "witch"))    {    print("Are you kidding?");    }  }if ((said("jump") ||     controller(c.jump)))  {  if (ego.invisible)    {    print("There is no reason to jump now.");    }  if (witch.in.room && !ego.invisible)    {    if (!witch.catch.ego)      {      print("Jumping here would put you in even greater danger from that witch!");      }    else      {      print("There is no way you can now.");      }    }  if (!witch.in.room && !ego.invisible)    {    set(ego.jumping);    stop.motion(ego);    jump.cycle.time = 3;    cycle.time(ego, jump.cycle.time);    set.view(ego, View75);    set(keep.cycling);    end.of.loop(ego, jump.done);    }  }if (jump.done)  {  reset(ego.jumping);  reset(jump.done);  reset(keep.cycling);  start.motion(ego);  walk.cycle.time = 1;  cycle.time(ego, walk.cycle.time);  set.view(ego, View0);  }if (fly.with.ego)  {  new.room(rm.sky);  }if (edgeEgoHit == TOP_EDGE &&     !witch.catch.ego)  {  new.room(Logic28);  }if (edgeEgoHit == RIGHT_EDGE &&     !witch.catch.ego)  {  new.room(Logic20);  }if (edgeEgoHit == LEFT_EDGE &&     !witch.catch.ego)  {  new.room(Logic22);  }if (edgeEgoHit == BOTTOM_EDGE &&     !witch.catch.ego)  {  new.room(Logic12);  }if (goat.following)  {  call(lgc.goat);  }return();[ Messages#message 1 "It's a witch swooping through the sky... She's trying to catch you!  Look out!"#message 2 "There is a witch in the area, but since you have that menacing goat with you, she will keep her distance."#message 3 "There is a witch in the area, but with the shield no harm will come to you."#message 4 "Jumping here would put you in even greater danger from that witch!"#message 5 "Your protection is gone and you best look out for the witch!"#message 6 "With the goat now dead, you are fair game for the witch."#message 7 "This is not your friendly-type witch."#message 8 "There's no witch here."#message 9 "There is no way to kill a flying witch!"#message 10 "The wicked witch is not interested in chitchat."#message 11 "Are you kidding?"#message 12 "The witch swoops down, grabs you by the neck, and carries you off to a fate worse than death."#message 13 "The witch missed you, this time."#message 14 "The witch can feel your protective spell and bids a hasty retreat."#message 15 "Lucky for you that you are invisible, the witch can't find you."#message 16 "There is no way you can now."#message 17 "There is no reason to jump now."#message 18 "Oh NO!!  She's back!!!"