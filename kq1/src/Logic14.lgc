#define hit.ground f20#define getting.up  f21#define stun.timer v30if (newRoom)  {  load.pic(currentRoom);  draw.pic(currentRoom);  discard.pic(currentRoom);  set.horizon(40);  load.sound(Sound4);  load.sound(s.ego.fall);  if (goat.following)    {    load.logics(lgc.goat);    }  if (dead.goat.room == currentRoom)    {    add.to.pic(View62, 0, 0, 21, 90, 0, 0);    }  if (previousRoom == 63)    {    if (falling.from.tree)      {      load.view(View105);      load.view(View103);      load.view(View104);      set.view(ego, View105);      ignore.blocks(ego);      position(ego, 84, 41);      set.priority(ego, 12);      program.control();      move.obj(ego, 84, 132, 4, hit.ground);      set(f209);      }    else      {      position(ego, 84, 132);      }    }  draw(ego);  show.pic();  }if (said("check", "room"))  {  print("There is a very large oak tree here with branches stretching to the "        "sky.");  }if (falling.from.tree &&     !isset(lf2))  {  set(lf2);  set(ego.stunned);  sound(s.ego.fall, f198);  }--stun.timer;if (hit.ground)  {  reset(hit.ground);  reset(falling.from.tree);  observe.blocks(ego);  release.priority(ego);  stop.motion(ego);  set.view(ego, View103);  stun.timer = 20;  set(keep.cycling);  shake.screen(2);  print("OUCH!");  sound(Sound4, sound.done);  }if (sound.done)  {  if (stun.timer > 0)    {    reset(sound.done);    sound(Sound4, sound.done);    }  }if (stun.timer == 1)  {  stun.timer = 0;  reset(ego.stunned);  set.view(ego, View104);  end.of.loop(ego, getting.up);  }if (getting.up)  {  reset(getting.up);  reset(keep.cycling);  set.view(ego, View0);  start.motion(ego);  reset(f209);  player.control();  }if (said("check", "tree"))  {  if (posn(ego, 45, 125, 159, 167))    {    print("This is a very large oak tree with branches stretching to the sky.");    }  else    {    print("This is a very pretty maple tree.");    }  }if ((said("climb", "tree") ||     said("climb", "oak", "tree") ||     said("climb", "oak")))  {  if (ego.invisible)    {    print("You can't do that when you're invisible.");    }  else    {    if (goat.following)      {      print("The old goat is afraid of heights and refuses to climb the tree.");      }    else      {      if (posn(ego, 85, 131, 140, 167))        {        print("OK");        new.room(Logic63);        }      else        {        if (posn(ego, 36, 56, 73, 90))          {          print("This tree is too hard to climb.");          }        else          {          print("You can't climb a tree here!");          }        }      }    }  }if (edgeEgoHit == TOP_EDGE)  {  new.room(Logic19);  }if (edgeEgoHit == RIGHT_EDGE)  {  new.room(Logic15);  }if (edgeEgoHit == LEFT_EDGE)  {  new.room(Logic13);  }if (edgeEgoHit == BOTTOM_EDGE)  {  new.room(Logic3);  }if (goat.following)  {  call(lgc.goat);  }return();[ Messages#message 1 "This is a very pretty maple tree."#message 2 "This is a very large oak tree with branches stretching to the sky."#message 3 "You can't climb a tree here!"#message 4 "This tree is too hard to climb."#message 5 "You can't do that when you're invisible."#message 6 "The old goat is afraid of heights and refuses to climb the tree."#message 7 "OK"#message 8 "OUCH!"#message 9 "There is a very large oak tree here with branches stretching to the sky."