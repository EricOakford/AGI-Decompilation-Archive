#define aJack   o1#define aJackFace   o2#define aTalkBubble o3#define aCandle     o4#define candlestickTimer    v240#define nextRoomTimer       v241#define egoMoved    f240if (newDemoRoom)  {  reset(newDemoRoom);  animate.obj(aJack);  set.view(aJack, vJackBNimble);  position(aJack, 110, 115);  set.loop(aJack, 5);  set.cel(aJack, 5);  draw(aJack);  stop.cycling(aJack);  animate.obj(aJackFace);  set.view(aJackFace, vJackBNimble);  set.loop(aJackFace, 7);  set.cel(aJackFace, 0);  ignore.objs(aJackFace);  position(aJackFace, 110, 115);  draw(aJackFace);  work = 8;  cycle.time(aJackFace, work);  animate.obj(ego);  set.view.v(ego, kidView);  position(ego, 80, 120);  set.loop(ego, 0);  draw(ego);  move.obj(ego, 105, 120, 1, egoMoved);  show.pic();  if (monitorType != MONO)    {    clear.lines(21, 21, BLACK);    clear.text.rect(17, 4, 20, 35, WHITE);    set.text.attribute(BLACK, WHITE);    display(18, 6, "Here is Jack be Nimble who");    display(19, 6, "has lost his candlestick.");    }  else    {    clear.text.rect(19, 4, 22, 35, WHITE);    set.text.attribute(BLACK, WHITE);    display(20, 6, "Here is Jack be Nimble who");    display(21, 6, "has lost his candlestick.");    }  }if (egoMoved)  {  reset(egoMoved);  stop.cycling(ego);  stop.motion(ego);  elapsedSeconds = 0;  stop.cycling(aJackFace);  sound(Sound153, mgSoundDone);  animate.obj(aTalkBubble);  set.view(aTalkBubble, vTalkBubbles);  set.loop(aTalkBubble, 0);  set.cel(aTalkBubble, 0);  position(aTalkBubble, 65, 90);  set.priority(aTalkBubble, 14);  draw(aTalkBubble);  stop.update(aTalkBubble);  set.text.attribute(BLACK, WHITE);  display(5, 17, " Woe is me!");  display(6, 17, " I lost my");  display(7, 17, "candlestick.");  stop.motion(ego);  stop.cycling(ego);  candlestickTimer = 50;  set(f143);  }if (isset(f143))  {  --candlestickTimer;  }if (candlestickTimer == 1)  {  candlestickTimer = 0;  clear.text.rect(6, 17, 8, 27, WHITE);  erase(aTalkBubble);  set.cel(aTalkBubble, 1);  position(aTalkBubble, 73, 90);  draw(aTalkBubble);  stop.update(aTalkBubble);  animate.obj(aCandle);  ignore.horizon(aCandle);  set.view(aCandle, vMGStuff);  set.loop(aCandle, 5);  position(aCandle, 87, 70);  set.priority(aCandle, 15);  draw(aCandle);  stop.update(aCandle);  nextRoomTimer = 50;  }if (isset(f143))  {  --nextRoomTimer;  }if (nextRoomTimer == 1)  {  nextRoomTimer = 0;  reset(f143);  start.cycling(aJackFace);  erase(aCandle);  erase(aTalkBubble);  nextRoom = 155;  }return();[ Messages#message 1 " Woe is me!"#message 2 " I lost my"#message 3 "candlestick."#message 4 "Here is Jack be Nimble who"#message 5 "has lost his candlestick."